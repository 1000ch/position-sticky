/*! position-sticky - v0.1.0 */!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var o;"undefined"!=typeof window?o=window:"undefined"!=typeof global?o=global:"undefined"!=typeof self&&(o=self),o.PositionSticky=e()}}(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){(function(global){"use strict";if(global._babelPolyfill){throw new Error("only one instance of babel/polyfill is allowed")}global._babelPolyfill=true;require("core-js/shim");require("regenerator-babel/runtime")}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"core-js/shim":2,"regenerator-babel/runtime":3}],2:[function(require,module,exports){!function(global,framework,undefined){"use strict";var OBJECT="Object",FUNCTION="Function",ARRAY="Array",STRING="String",NUMBER="Number",REGEXP="RegExp",DATE="Date",MAP="Map",SET="Set",WEAKMAP="WeakMap",WEAKSET="WeakSet",SYMBOL="Symbol",PROMISE="Promise",MATH="Math",ARGUMENTS="Arguments",PROTOTYPE="prototype",CONSTRUCTOR="constructor",TO_STRING="toString",TO_STRING_TAG=TO_STRING+"Tag",TO_LOCALE="toLocaleString",HAS_OWN="hasOwnProperty",FOR_EACH="forEach",ITERATOR="iterator",FF_ITERATOR="@@"+ITERATOR,PROCESS="process",CREATE_ELEMENT="createElement",Function=global[FUNCTION],Object=global[OBJECT],Array=global[ARRAY],String=global[STRING],Number=global[NUMBER],RegExp=global[REGEXP],Date=global[DATE],Map=global[MAP],Set=global[SET],WeakMap=global[WEAKMAP],WeakSet=global[WEAKSET],Symbol=global[SYMBOL],Math=global[MATH],TypeError=global.TypeError,RangeError=global.RangeError,setTimeout=global.setTimeout,setImmediate=global.setImmediate,clearImmediate=global.clearImmediate,parseInt=global.parseInt,isFinite=global.isFinite,process=global[PROCESS],nextTick=process&&process.nextTick,document=global.document,html=document&&document.documentElement,navigator=global.navigator,define=global.define,console=global.console||{},ArrayProto=Array[PROTOTYPE],ObjectProto=Object[PROTOTYPE],FunctionProto=Function[PROTOTYPE],Infinity=1/0,DOT=".";function isObject(it){return it!==null&&(typeof it=="object"||typeof it=="function")}function isFunction(it){return typeof it=="function"}var isNative=ctx(/./.test,/\[native code\]\s*\}\s*$/,1);var toString=ObjectProto[TO_STRING];function setToStringTag(it,tag,stat){if(it&&!has(it=stat?it:it[PROTOTYPE],SYMBOL_TAG))hidden(it,SYMBOL_TAG,tag)}function cof(it){return toString.call(it).slice(8,-1)}function classof(it){var O,T;return it==undefined?it===undefined?"Undefined":"Null":typeof(T=(O=Object(it))[SYMBOL_TAG])=="string"?T:cof(O)}var call=FunctionProto.call,apply=FunctionProto.apply,REFERENCE_GET;function part(){var fn=assertFunction(this),length=arguments.length,args=Array(length),i=0,_=path._,holder=false;while(length>i)if((args[i]=arguments[i++])===_)holder=true;return function(){var that=this,_length=arguments.length,i=0,j=0,_args;if(!holder&&!_length)return invoke(fn,args,that);_args=args.slice();if(holder)for(;length>i;i++)if(_args[i]===_)_args[i]=arguments[j++];while(_length>j)_args.push(arguments[j++]);return invoke(fn,_args,that)}}function ctx(fn,that,length){assertFunction(fn);if(~length&&that===undefined)return fn;switch(length){case 1:return function(a){return fn.call(that,a)};case 2:return function(a,b){return fn.call(that,a,b)};case 3:return function(a,b,c){return fn.call(that,a,b,c)}}return function(){return fn.apply(that,arguments)}}function invoke(fn,args,that){var un=that===undefined;switch(args.length|0){case 0:return un?fn():fn.call(that);case 1:return un?fn(args[0]):fn.call(that,args[0]);case 2:return un?fn(args[0],args[1]):fn.call(that,args[0],args[1]);case 3:return un?fn(args[0],args[1],args[2]):fn.call(that,args[0],args[1],args[2]);case 4:return un?fn(args[0],args[1],args[2],args[3]):fn.call(that,args[0],args[1],args[2],args[3]);case 5:return un?fn(args[0],args[1],args[2],args[3],args[4]):fn.call(that,args[0],args[1],args[2],args[3],args[4])}return fn.apply(that,args)}var create=Object.create,getPrototypeOf=Object.getPrototypeOf,setPrototypeOf=Object.setPrototypeOf,defineProperty=Object.defineProperty,defineProperties=Object.defineProperties,getOwnDescriptor=Object.getOwnPropertyDescriptor,getKeys=Object.keys,getNames=Object.getOwnPropertyNames,getSymbols=Object.getOwnPropertySymbols,isFrozen=Object.isFrozen,has=ctx(call,ObjectProto[HAS_OWN],2),ES5Object=Object,Dict;function toObject(it){return ES5Object(assertDefined(it))}function returnIt(it){return it}function returnThis(){return this}function get(object,key){if(has(object,key))return object[key]}function ownKeys(it){assertObject(it);return getSymbols?getNames(it).concat(getSymbols(it)):getNames(it)}var assign=Object.assign||function(target,source){var T=Object(assertDefined(target)),l=arguments.length,i=1;while(l>i){var S=ES5Object(arguments[i++]),keys=getKeys(S),length=keys.length,j=0,key;while(length>j)T[key=keys[j++]]=S[key]}return T};function keyOf(object,el){var O=toObject(object),keys=getKeys(O),length=keys.length,index=0,key;while(length>index)if(O[key=keys[index++]]===el)return key}function array(it){return String(it).split(",")}var push=ArrayProto.push,unshift=ArrayProto.unshift,slice=ArrayProto.slice,splice=ArrayProto.splice,indexOf=ArrayProto.indexOf,forEach=ArrayProto[FOR_EACH];function createArrayMethod(type){var isMap=type==1,isFilter=type==2,isSome=type==3,isEvery=type==4,isFindIndex=type==6,noholes=type==5||isFindIndex;return function(callbackfn){var O=Object(assertDefined(this)),that=arguments[1],self=ES5Object(O),f=ctx(callbackfn,that,3),length=toLength(self.length),index=0,result=isMap?Array(length):isFilter?[]:undefined,val,res;for(;length>index;index++)if(noholes||index in self){val=self[index];res=f(val,index,O);if(type){if(isMap)result[index]=res;else if(res)switch(type){case 3:return true;case 5:return val;case 6:return index;case 2:result.push(val)}else if(isEvery)return false}}return isFindIndex?-1:isSome||isEvery?isEvery:result}}function createArrayContains(isContains){return function(el){var O=toObject(this),length=toLength(O.length),index=toIndex(arguments[1],length);if(isContains&&el!=el){for(;length>index;index++)if(sameNaN(O[index]))return isContains||index}else for(;length>index;index++)if(isContains||index in O){if(O[index]===el)return isContains||index}return!isContains&&-1}}function generic(A,B){return typeof A=="function"?A:B}var MAX_SAFE_INTEGER=9007199254740991,pow=Math.pow,abs=Math.abs,ceil=Math.ceil,floor=Math.floor,max=Math.max,min=Math.min,random=Math.random,trunc=Math.trunc||function(it){return(it>0?floor:ceil)(it)};function sameNaN(number){return number!=number}function toInteger(it){return isNaN(it)?0:trunc(it)}function toLength(it){return it>0?min(toInteger(it),MAX_SAFE_INTEGER):0}function toIndex(index,length){var index=toInteger(index);return index<0?max(index+length,0):min(index,length)}function lz(num){return num>9?num:"0"+num}function createReplacer(regExp,replace,isStatic){var replacer=isObject(replace)?function(part){return replace[part]}:replace;return function(it){return String(isStatic?it:this).replace(regExp,replacer)}}function createPointAt(toString){return function(pos){var s=String(assertDefined(this)),i=toInteger(pos),l=s.length,a,b;if(i<0||i>=l)return toString?"":undefined;a=s.charCodeAt(i);return a<55296||a>56319||i+1===l||(b=s.charCodeAt(i+1))<56320||b>57343?toString?s.charAt(i):a:toString?s.slice(i,i+2):(a-55296<<10)+(b-56320)+65536}}var REDUCE_ERROR="Reduce of empty object with no initial value";function assert(condition,msg1,msg2){if(!condition)throw TypeError(msg2?msg1+msg2:msg1)}function assertDefined(it){if(it==undefined)throw TypeError("Function called on null or undefined");return it}function assertFunction(it){assert(isFunction(it),it," is not a function!");return it}function assertObject(it){assert(isObject(it),it," is not an object!");return it}function assertInstance(it,Constructor,name){assert(it instanceof Constructor,name,": use the 'new' operator!")}function descriptor(bitmap,value){return{enumerable:!(bitmap&1),configurable:!(bitmap&2),writable:!(bitmap&4),value:value}}function simpleSet(object,key,value){object[key]=value;return object}function createDefiner(bitmap){return DESC?function(object,key,value){return defineProperty(object,key,descriptor(bitmap,value))}:simpleSet}function uid(key){return SYMBOL+"("+key+")_"+(++sid+random())[TO_STRING](36)}function getWellKnownSymbol(name,setter){return Symbol&&Symbol[name]||(setter?Symbol:safeSymbol)(SYMBOL+DOT+name)}var DESC=!!function(){try{return defineProperty({},"a",{get:function(){return 2}}).a==2}catch(e){}}(),sid=0,hidden=createDefiner(1),set=Symbol?simpleSet:hidden,safeSymbol=Symbol||uid;function assignHidden(target,src){for(var key in src)hidden(target,key,src[key]);return target}var SYMBOL_UNSCOPABLES=getWellKnownSymbol("unscopables"),ArrayUnscopables=ArrayProto[SYMBOL_UNSCOPABLES]||{},SYMBOL_TAG=getWellKnownSymbol(TO_STRING_TAG),SYMBOL_SPECIES=getWellKnownSymbol("species"),SYMBOL_ITERATOR;function setSpecies(C){if(DESC&&(framework||!isNative(C)))defineProperty(C,SYMBOL_SPECIES,{configurable:true,get:returnThis})}var NODE=cof(process)==PROCESS,core={},path=framework?global:core,old=global.core,exportGlobal,FORCED=1,GLOBAL=2,STATIC=4,PROTO=8,BIND=16,WRAP=32;function $define(type,name,source){var key,own,out,exp,isGlobal=type&GLOBAL,target=isGlobal?global:type&STATIC?global[name]:(global[name]||ObjectProto)[PROTOTYPE],exports=isGlobal?core:core[name]||(core[name]={});if(isGlobal)source=name;for(key in source){own=!(type&FORCED)&&target&&key in target&&(!isFunction(target[key])||isNative(target[key]));out=(own?target:source)[key];if(!framework&&isGlobal&&!isFunction(target[key]))exp=source[key];else if(type&BIND&&own)exp=ctx(out,global);else if(type&WRAP&&!framework&&target[key]==out){exp=function(param){return this instanceof out?new out(param):out(param)};exp[PROTOTYPE]=out[PROTOTYPE]}else exp=type&PROTO&&isFunction(out)?ctx(call,out):out;if(framework&&target&&!own){if(isGlobal)target[key]=out;else delete target[key]&&hidden(target,key,out)}if(exports[key]!=out)hidden(exports,key,exp)}}if(typeof module!="undefined"&&module.exports)module.exports=core;else if(isFunction(define)&&define.amd)define(function(){return core});else exportGlobal=true;if(exportGlobal||framework){core.noConflict=function(){global.core=old;return core};global.core=core}SYMBOL_ITERATOR=getWellKnownSymbol(ITERATOR);var ITER=safeSymbol("iter"),KEY=1,VALUE=2,Iterators={},IteratorPrototype={},BUGGY_ITERATORS="keys"in ArrayProto&&!("next"in[].keys());setIterator(IteratorPrototype,returnThis);function setIterator(O,value){hidden(O,SYMBOL_ITERATOR,value);FF_ITERATOR in ArrayProto&&hidden(O,FF_ITERATOR,value)}function createIterator(Constructor,NAME,next,proto){Constructor[PROTOTYPE]=create(proto||IteratorPrototype,{next:descriptor(1,next)});setToStringTag(Constructor,NAME+" Iterator")}function defineIterator(Constructor,NAME,value,DEFAULT){var proto=Constructor[PROTOTYPE],iter=get(proto,SYMBOL_ITERATOR)||get(proto,FF_ITERATOR)||DEFAULT&&get(proto,DEFAULT)||value;if(framework){setIterator(proto,iter);if(iter!==value){var iterProto=getPrototypeOf(iter.call(new Constructor));setToStringTag(iterProto,NAME+" Iterator",true);has(proto,FF_ITERATOR)&&setIterator(iterProto,returnThis)}}Iterators[NAME]=iter;Iterators[NAME+" Iterator"]=returnThis;return iter}function defineStdIterators(Base,NAME,Constructor,next,DEFAULT,IS_SET){function createIter(kind){return function(){return new Constructor(this,kind)}}createIterator(Constructor,NAME,next);var entries=createIter(KEY+VALUE),values=createIter(VALUE);if(DEFAULT==VALUE)values=defineIterator(Base,NAME,values,"values");else entries=defineIterator(Base,NAME,entries,"entries");if(DEFAULT){$define(PROTO+FORCED*BUGGY_ITERATORS,NAME,{entries:entries,keys:IS_SET?values:createIter(KEY),values:values})}}function iterResult(done,value){return{value:value,done:!!done}}function isIterable(it){var O=Object(it),Symbol=global[SYMBOL],hasExt=(Symbol&&Symbol[ITERATOR]||FF_ITERATOR)in O;return hasExt||SYMBOL_ITERATOR in O||has(Iterators,classof(O))}function getIterator(it){var Symbol=global[SYMBOL],ext=it[Symbol&&Symbol[ITERATOR]||FF_ITERATOR],getIter=ext||it[SYMBOL_ITERATOR]||Iterators[classof(it)];return assertObject(getIter.call(it))}function stepCall(fn,value,entries){return entries?invoke(fn,value):fn(value)}function checkDangerIterClosing(fn){var danger=true;var O={next:function(){throw 1},"return":function(){danger=false}};O[SYMBOL_ITERATOR]=returnThis;try{fn(O)}catch(e){}return danger}function closeIterator(iterator){var ret=iterator["return"];if(ret!==undefined)ret.call(iterator)}function safeIterClose(exec,iterator){try{exec(iterator)}catch(e){closeIterator(iterator);throw e}}function forOf(iterable,entries,fn,that){safeIterClose(function(iterator){var f=ctx(fn,that,entries?2:1),step;while(!(step=iterator.next()).done)if(stepCall(f,step.value,entries)===false){return closeIterator(iterator)}},getIterator(iterable))}!function(TAG,SymbolRegistry,AllSymbols,setter){if(!isNative(Symbol)){Symbol=function(description){assert(!(this instanceof Symbol),SYMBOL+" is not a "+CONSTRUCTOR);var tag=uid(description),sym=set(create(Symbol[PROTOTYPE]),TAG,tag);AllSymbols[tag]=sym;DESC&&setter&&defineProperty(ObjectProto,tag,{configurable:true,set:function(value){hidden(this,tag,value)}});return sym};hidden(Symbol[PROTOTYPE],TO_STRING,function(){return this[TAG]})}$define(GLOBAL+WRAP,{Symbol:Symbol});var symbolStatics={"for":function(key){return has(SymbolRegistry,key+="")?SymbolRegistry[key]:SymbolRegistry[key]=Symbol(key)},iterator:SYMBOL_ITERATOR||getWellKnownSymbol(ITERATOR),keyFor:part.call(keyOf,SymbolRegistry),species:SYMBOL_SPECIES,toStringTag:SYMBOL_TAG=getWellKnownSymbol(TO_STRING_TAG,true),unscopables:SYMBOL_UNSCOPABLES,pure:safeSymbol,set:set,useSetter:function(){setter=true},useSimple:function(){setter=false}};forEach.call(array("hasInstance,isConcatSpreadable,match,replace,search,split,toPrimitive"),function(it){symbolStatics[it]=getWellKnownSymbol(it)});$define(STATIC,SYMBOL,symbolStatics);setToStringTag(Symbol,SYMBOL);$define(STATIC+FORCED*!isNative(Symbol),OBJECT,{getOwnPropertyNames:function(it){var names=getNames(toObject(it)),result=[],key,i=0;while(names.length>i)has(AllSymbols,key=names[i++])||result.push(key);return result},getOwnPropertySymbols:function(it){var names=getNames(toObject(it)),result=[],key,i=0;while(names.length>i)has(AllSymbols,key=names[i++])&&result.push(AllSymbols[key]);return result}});setToStringTag(Math,MATH,true);setToStringTag(global.JSON,"JSON",true)}(safeSymbol("tag"),{},{},true);!function(){var objectStatic={assign:assign,is:function(x,y){return x===y?x!==0||1/x===1/y:x!=x&&y!=y}};"__proto__"in ObjectProto&&function(buggy,set){try{set=ctx(call,getOwnDescriptor(ObjectProto,"__proto__").set,2);set({},ArrayProto)}catch(e){buggy=true}objectStatic.setPrototypeOf=setPrototypeOf=setPrototypeOf||function(O,proto){assertObject(O);assert(proto===null||isObject(proto),proto,": can't set as prototype!");if(buggy)O.__proto__=proto;else set(O,proto);return O}}();$define(STATIC,OBJECT,objectStatic)}();!function(tmp){tmp[SYMBOL_TAG]=DOT;if(cof(tmp)!=DOT)hidden(ObjectProto,TO_STRING,function(){return"[object "+classof(this)+"]"})}({});!function(){function wrapObjectMethod(key,MODE){var fn=Object[key],exp=core[OBJECT][key],f=0,o={};if(!exp||isNative(exp)){o[key]=MODE==1?function(it){return isObject(it)?fn(it):it}:MODE==2?function(it){return isObject(it)?fn(it):true}:MODE==3?function(it){return isObject(it)?fn(it):false}:MODE==4?function(it,key){return fn(toObject(it),key)}:function(it){return fn(toObject(it))};try{fn(DOT)}catch(e){f=1}$define(STATIC+FORCED*f,OBJECT,o)}}wrapObjectMethod("freeze",1);wrapObjectMethod("seal",1);wrapObjectMethod("preventExtensions",1);wrapObjectMethod("isFrozen",2);wrapObjectMethod("isSealed",2);wrapObjectMethod("isExtensible",3);wrapObjectMethod("getOwnPropertyDescriptor",4);wrapObjectMethod("getPrototypeOf");wrapObjectMethod("keys");wrapObjectMethod("getOwnPropertyNames")}();!function(NAME){NAME in FunctionProto||DESC&&defineProperty(FunctionProto,NAME,{configurable:true,get:function(){var match=String(this).match(/^\s*function ([^ (]*)/),name=match?match[1]:"";has(this,NAME)||defineProperty(this,NAME,descriptor(5,name));return name},set:function(value){has(this,NAME)||defineProperty(this,NAME,descriptor(0,value))}})}("name");Number("0o1")&&Number("0b1")||function(_Number,NumberProto){function toNumber(it){if(isObject(it))it=toPrimitive(it);if(typeof it=="string"&&it.length>2&&it.charCodeAt(0)==48){var binary=false;switch(it.charCodeAt(1)){case 66:case 98:binary=true;case 79:case 111:return parseInt(it.slice(2),binary?2:8)}}return+it}function toPrimitive(it){var fn,val;if(isFunction(fn=it.valueOf)&&!isObject(val=fn.call(it)))return val;if(isFunction(fn=it[TO_STRING])&&!isObject(val=fn.call(it)))return val;throw TypeError("Can't convert object to number")}Number=function Number(it){return this instanceof Number?new _Number(toNumber(it)):toNumber(it)};forEach.call(DESC?getNames(_Number):array("MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY"),function(key){key in Number||defineProperty(Number,key,getOwnDescriptor(_Number,key))});Number[PROTOTYPE]=NumberProto;NumberProto[CONSTRUCTOR]=Number;hidden(global,NUMBER,Number)}(Number,Number[PROTOTYPE]);!function(isInteger){$define(STATIC,NUMBER,{EPSILON:pow(2,-52),isFinite:function(it){return typeof it=="number"&&isFinite(it)},isInteger:isInteger,isNaN:sameNaN,isSafeInteger:function(number){return isInteger(number)&&abs(number)<=MAX_SAFE_INTEGER},MAX_SAFE_INTEGER:MAX_SAFE_INTEGER,MIN_SAFE_INTEGER:-MAX_SAFE_INTEGER,parseFloat:parseFloat,parseInt:parseInt})}(Number.isInteger||function(it){return!isObject(it)&&isFinite(it)&&floor(it)===it});!function(){var E=Math.E,exp=Math.exp,log=Math.log,sqrt=Math.sqrt,sign=Math.sign||function(x){return(x=+x)==0||x!=x?x:x<0?-1:1};function asinh(x){return!isFinite(x=+x)||x==0?x:x<0?-asinh(-x):log(x+sqrt(x*x+1))}function expm1(x){return(x=+x)==0?x:x>-1e-6&&x<1e-6?x+x*x/2:exp(x)-1}$define(STATIC,MATH,{acosh:function(x){return(x=+x)<1?NaN:isFinite(x)?log(x/E+sqrt(x+1)*sqrt(x-1)/E)+1:x},asinh:asinh,atanh:function(x){return(x=+x)==0?x:log((1+x)/(1-x))/2},cbrt:function(x){return sign(x=+x)*pow(abs(x),1/3)},clz32:function(x){return(x>>>=0)?32-x[TO_STRING](2).length:32},cosh:function(x){return(exp(x=+x)+exp(-x))/2},expm1:expm1,fround:function(x){return new Float32Array([x])[0]},hypot:function(value1,value2){var sum=0,len1=arguments.length,len2=len1,args=Array(len1),larg=-Infinity,arg;while(len1--){arg=args[len1]=+arguments[len1];if(arg==Infinity||arg==-Infinity)return Infinity;if(arg>larg)larg=arg}larg=arg||1;while(len2--)sum+=pow(args[len2]/larg,2);return larg*sqrt(sum)},imul:function(x,y){var UInt16=65535,xn=+x,yn=+y,xl=UInt16&xn,yl=UInt16&yn;return 0|xl*yl+((UInt16&xn>>>16)*yl+xl*(UInt16&yn>>>16)<<16>>>0)},log1p:function(x){return(x=+x)>-1e-8&&x<1e-8?x-x*x/2:log(1+x)},log10:function(x){return log(x)/Math.LN10},log2:function(x){return log(x)/Math.LN2},sign:sign,sinh:function(x){return abs(x=+x)<1?(expm1(x)-expm1(-x))/2:(exp(x-1)-exp(-x-1))*(E/2)},tanh:function(x){var a=expm1(x=+x),b=expm1(-x);return a==Infinity?1:b==Infinity?-1:(a-b)/(exp(x)+exp(-x))},trunc:trunc})}();!function(fromCharCode){function assertNotRegExp(it){if(cof(it)==REGEXP)throw TypeError()}$define(STATIC,STRING,{fromCodePoint:function(x){var res=[],len=arguments.length,i=0,code;while(len>i){code=+arguments[i++];if(toIndex(code,1114111)!==code)throw RangeError(code+" is not a valid code point");res.push(code<65536?fromCharCode(code):fromCharCode(((code-=65536)>>10)+55296,code%1024+56320))}return res.join("")},raw:function(callSite){var raw=toObject(callSite.raw),len=toLength(raw.length),sln=arguments.length,res=[],i=0;while(len>i){res.push(String(raw[i++]));if(i<sln)res.push(String(arguments[i]))}return res.join("")}});$define(PROTO,STRING,{codePointAt:createPointAt(false),endsWith:function(searchString){assertNotRegExp(searchString);var that=String(assertDefined(this)),endPosition=arguments[1],len=toLength(that.length),end=endPosition===undefined?len:min(toLength(endPosition),len);searchString+="";return that.slice(end-searchString.length,end)===searchString},includes:function(searchString){assertNotRegExp(searchString);return!!~String(assertDefined(this)).indexOf(searchString,arguments[1])},repeat:function(count){var str=String(assertDefined(this)),res="",n=toInteger(count);if(0>n||n==Infinity)throw RangeError("Count can't be negative");for(;n>0;(n>>>=1)&&(str+=str))if(n&1)res+=str;return res},startsWith:function(searchString){assertNotRegExp(searchString);var that=String(assertDefined(this)),index=toLength(min(arguments[1],that.length));searchString+="";return that.slice(index,index+searchString.length)===searchString}})}(String.fromCharCode);!function(){$define(STATIC+FORCED*checkDangerIterClosing(Array.from),ARRAY,{from:function(arrayLike){var O=Object(assertDefined(arrayLike)),mapfn=arguments[1],mapping=mapfn!==undefined,f=mapping?ctx(mapfn,arguments[2],2):undefined,index=0,length,result,step;if(isIterable(O)){result=new(generic(this,Array));safeIterClose(function(iterator){for(;!(step=iterator.next()).done;index++){result[index]=mapping?f(step.value,index):step.value}},getIterator(O))}else{result=new(generic(this,Array))(length=toLength(O.length));for(;length>index;index++){result[index]=mapping?f(O[index],index):O[index]}}result.length=index;return result}});$define(STATIC,ARRAY,{of:function(){var index=0,length=arguments.length,result=new(generic(this,Array))(length);while(length>index)result[index]=arguments[index++];result.length=length;return result}});setSpecies(Array)}();!function(){$define(PROTO,ARRAY,{copyWithin:function(target,start){var O=Object(assertDefined(this)),len=toLength(O.length),to=toIndex(target,len),from=toIndex(start,len),end=arguments[2],fin=end===undefined?len:toIndex(end,len),count=min(fin-from,len-to),inc=1;if(from<to&&to<from+count){inc=-1;from=from+count-1;to=to+count-1}while(count-->0){if(from in O)O[to]=O[from];else delete O[to];to+=inc;from+=inc}return O},fill:function(value){var O=Object(assertDefined(this)),length=toLength(O.length),index=toIndex(arguments[1],length),end=arguments[2],endPos=end===undefined?length:toIndex(end,length);while(endPos>index)O[index++]=value;return O},find:createArrayMethod(5),findIndex:createArrayMethod(6)});if(framework){forEach.call(array("find,findIndex,fill,copyWithin,entries,keys,values"),function(it){ArrayUnscopables[it]=true});SYMBOL_UNSCOPABLES in ArrayProto||hidden(ArrayProto,SYMBOL_UNSCOPABLES,ArrayUnscopables)}}();!function(at){defineStdIterators(Array,ARRAY,function(iterated,kind){set(this,ITER,{o:toObject(iterated),i:0,k:kind})},function(){var iter=this[ITER],O=iter.o,kind=iter.k,index=iter.i++;if(!O||index>=O.length){iter.o=undefined;return iterResult(1)}if(kind==KEY)return iterResult(0,index);if(kind==VALUE)return iterResult(0,O[index]);return iterResult(0,[index,O[index]])},VALUE);Iterators[ARGUMENTS]=Iterators[ARRAY];defineStdIterators(String,STRING,function(iterated){set(this,ITER,{o:String(iterated),i:0})},function(){var iter=this[ITER],O=iter.o,index=iter.i,point;if(index>=O.length)return iterResult(1);point=at.call(O,index);iter.i+=point.length;return iterResult(0,point)})}(createPointAt(true));DESC&&!function(RegExpProto,_RegExp){if(!function(){try{return RegExp(/a/g,"i")=="/a/i"}catch(e){}}()){RegExp=function RegExp(pattern,flags){return new _RegExp(cof(pattern)==REGEXP&&flags!==undefined?pattern.source:pattern,flags)};forEach.call(getNames(_RegExp),function(key){key in RegExp||defineProperty(RegExp,key,{configurable:true,get:function(){return _RegExp[key]},set:function(it){_RegExp[key]=it}})});RegExpProto[CONSTRUCTOR]=RegExp;RegExp[PROTOTYPE]=RegExpProto;hidden(global,REGEXP,RegExp)}if(/./g.flags!="g")defineProperty(RegExpProto,"flags",{configurable:true,get:createReplacer(/^.*\/(\w*)$/,"$1")});setSpecies(RegExp)}(RegExp[PROTOTYPE],RegExp);isFunction(setImmediate)&&isFunction(clearImmediate)||function(ONREADYSTATECHANGE){var postMessage=global.postMessage,addEventListener=global.addEventListener,MessageChannel=global.MessageChannel,counter=0,queue={},defer,channel,port;setImmediate=function(fn){var args=[],i=1;while(arguments.length>i)args.push(arguments[i++]);queue[++counter]=function(){invoke(isFunction(fn)?fn:Function(fn),args)};defer(counter);return counter};clearImmediate=function(id){delete queue[id]};function run(id){if(has(queue,id)){var fn=queue[id];delete queue[id];fn()}}function listner(event){run(event.data)}if(NODE){defer=function(id){nextTick(part.call(run,id))}}else if(addEventListener&&isFunction(postMessage)&&!global.importScripts){defer=function(id){postMessage(id,"*")};addEventListener("message",listner,false)}else if(isFunction(MessageChannel)){channel=new MessageChannel;port=channel.port2;channel.port1.onmessage=listner;defer=ctx(port.postMessage,port,1)}else if(document&&ONREADYSTATECHANGE in document[CREATE_ELEMENT]("script")){defer=function(id){html.appendChild(document[CREATE_ELEMENT]("script"))[ONREADYSTATECHANGE]=function(){html.removeChild(this);run(id)}}}else{defer=function(id){setTimeout(run,0,id)}}}("onreadystatechange");$define(GLOBAL+BIND,{setImmediate:setImmediate,clearImmediate:clearImmediate});!function(Promise,test){isFunction(Promise)&&isFunction(Promise.resolve)&&Promise.resolve(test=new Promise(function(){}))==test||function(asap,RECORD){function isThenable(it){var then;if(isObject(it))then=it.then;return isFunction(then)?then:false}function handledRejectionOrHasOnRejected(promise){var record=promise[RECORD],chain=record.c,i=0,react;if(record.h)return true;while(chain.length>i){react=chain[i++];if(react.fail||handledRejectionOrHasOnRejected(react.P))return true}}function notify(record,reject){var chain=record.c;if(reject||chain.length)asap(function(){var promise=record.p,value=record.v,ok=record.s==1,i=0;if(reject&&!handledRejectionOrHasOnRejected(promise)){setTimeout(function(){if(!handledRejectionOrHasOnRejected(promise)){if(NODE){if(!process.emit("unhandledRejection",value,promise)){}}else if(isFunction(console.error)){console.error("Unhandled promise rejection",value)}}},1e3)}else while(chain.length>i)!function(react){var cb=ok?react.ok:react.fail,ret,then;try{if(cb){if(!ok)record.h=true;ret=cb===true?value:cb(value);if(ret===react.P){react.rej(TypeError(PROMISE+"-chain cycle"))}else if(then=isThenable(ret)){then.call(ret,react.res,react.rej)}else react.res(ret)}else react.rej(value)}catch(err){react.rej(err)}}(chain[i++]);chain.length=0})}function resolve(value){var record=this,then,wrapper;if(record.d)return;record.d=true;record=record.r||record;try{if(then=isThenable(value)){wrapper={r:record,d:false};then.call(value,ctx(resolve,wrapper,1),ctx(reject,wrapper,1))}else{record.v=value;record.s=1;notify(record)}}catch(err){reject.call(wrapper||{r:record,d:false},err)}}function reject(value){var record=this;if(record.d)return;record.d=true;record=record.r||record;record.v=value;record.s=2;notify(record,true)}function getConstructor(C){var S=assertObject(C)[SYMBOL_SPECIES];return S!=undefined?S:C}Promise=function(executor){assertFunction(executor);assertInstance(this,Promise,PROMISE);var record={p:this,c:[],s:0,d:false,v:undefined,h:false};hidden(this,RECORD,record);try{executor(ctx(resolve,record,1),ctx(reject,record,1))}catch(err){reject.call(record,err)}};assignHidden(Promise[PROTOTYPE],{then:function(onFulfilled,onRejected){var S=assertObject(assertObject(this)[CONSTRUCTOR])[SYMBOL_SPECIES];var react={ok:isFunction(onFulfilled)?onFulfilled:true,fail:isFunction(onRejected)?onRejected:false},P=react.P=new(S!=undefined?S:Promise)(function(resolve,reject){react.res=assertFunction(resolve);react.rej=assertFunction(reject)}),record=this[RECORD];record.c.push(react);record.s&&notify(record);return P},"catch":function(onRejected){return this.then(undefined,onRejected)}});assignHidden(Promise,{all:function(iterable){var Promise=getConstructor(this),values=[];return new Promise(function(resolve,reject){forOf(iterable,false,push,values);var remaining=values.length,results=Array(remaining);if(remaining)forEach.call(values,function(promise,index){Promise.resolve(promise).then(function(value){results[index]=value;--remaining||resolve(results)},reject)});else resolve(results)})},race:function(iterable){var Promise=getConstructor(this);return new Promise(function(resolve,reject){forOf(iterable,false,function(promise){Promise.resolve(promise).then(resolve,reject)})})},reject:function(r){return new(getConstructor(this))(function(resolve,reject){reject(r)})},resolve:function(x){return isObject(x)&&RECORD in x&&getPrototypeOf(x)===this[PROTOTYPE]?x:new(getConstructor(this))(function(resolve,reject){resolve(x)})}})}(nextTick||setImmediate,safeSymbol("record"));setToStringTag(Promise,PROMISE);setSpecies(Promise);$define(GLOBAL+FORCED*!isNative(Promise),{Promise:Promise})}(global[PROMISE]);!function(){var UID=safeSymbol("uid"),O1=safeSymbol("O1"),WEAK=safeSymbol("weak"),LEAK=safeSymbol("leak"),LAST=safeSymbol("last"),FIRST=safeSymbol("first"),SIZE=DESC?safeSymbol("size"):"size",uid=0,tmp={};function getCollection(C,NAME,methods,commonMethods,isMap,isWeak){var ADDER=isMap?"set":"add",proto=C&&C[PROTOTYPE],O={};function initFromIterable(that,iterable){if(iterable!=undefined)forOf(iterable,isMap,that[ADDER],that);return that}function fixSVZ(key,chain){var method=proto[key];if(framework)proto[key]=function(a,b){var result=method.call(this,a===0?0:a,b);return chain?this:result}}if(!isNative(C)||!(isWeak||!BUGGY_ITERATORS&&has(proto,FOR_EACH)&&has(proto,"entries"))){C=isWeak?function(iterable){assertInstance(this,C,NAME);set(this,UID,uid++);initFromIterable(this,iterable)}:function(iterable){var that=this;assertInstance(that,C,NAME);set(that,O1,create(null));set(that,SIZE,0);set(that,LAST,undefined);set(that,FIRST,undefined);initFromIterable(that,iterable)};assignHidden(assignHidden(C[PROTOTYPE],methods),commonMethods);isWeak||!DESC||defineProperty(C[PROTOTYPE],"size",{get:function(){return assertDefined(this[SIZE])}})}else{var Native=C,inst=new C,chain=inst[ADDER](isWeak?{}:-0,1),buggyZero;if(checkDangerIterClosing(function(O){new C(O)})){C=function(iterable){assertInstance(this,C,NAME);return initFromIterable(new Native,iterable)};C[PROTOTYPE]=proto;if(framework)proto[CONSTRUCTOR]=C}isWeak||inst[FOR_EACH](function(val,key){buggyZero=1/key===-Infinity});if(buggyZero){fixSVZ("delete");fixSVZ("has");isMap&&fixSVZ("get")}if(buggyZero||chain!==inst)fixSVZ(ADDER,true)}setToStringTag(C,NAME);setSpecies(C);O[NAME]=C;$define(GLOBAL+WRAP+FORCED*!isNative(C),O);isWeak||defineStdIterators(C,NAME,function(iterated,kind){set(this,ITER,{o:iterated,k:kind})},function(){var iter=this[ITER],kind=iter.k,entry=iter.l;while(entry&&entry.r)entry=entry.p;if(!iter.o||!(iter.l=entry=entry?entry.n:iter.o[FIRST])){iter.o=undefined;return iterResult(1)}if(kind==KEY)return iterResult(0,entry.k);if(kind==VALUE)return iterResult(0,entry.v);return iterResult(0,[entry.k,entry.v])},isMap?KEY+VALUE:VALUE,!isMap);return C}function fastKey(it,create){if(!isObject(it))return(typeof it=="string"?"S":"P")+it;if(isFrozen(it))return"F";if(!has(it,UID)){if(!create)return"E";hidden(it,UID,++uid)}return"O"+it[UID]}function getEntry(that,key){var index=fastKey(key),entry;if(index!="F")return that[O1][index];for(entry=that[FIRST];entry;entry=entry.n){if(entry.k==key)return entry}}function def(that,key,value){var entry=getEntry(that,key),prev,index;if(entry)entry.v=value;else{that[LAST]=entry={i:index=fastKey(key,true),k:key,v:value,p:prev=that[LAST],n:undefined,r:false};if(!that[FIRST])that[FIRST]=entry;if(prev)prev.n=entry;that[SIZE]++;if(index!="F")that[O1][index]=entry}return that}var collectionMethods={clear:function(){for(var that=this,data=that[O1],entry=that[FIRST];entry;entry=entry.n){
entry.r=true;if(entry.p)entry.p=entry.p.n=undefined;delete data[entry.i]}that[FIRST]=that[LAST]=undefined;that[SIZE]=0},"delete":function(key){var that=this,entry=getEntry(that,key);if(entry){var next=entry.n,prev=entry.p;delete that[O1][entry.i];entry.r=true;if(prev)prev.n=next;if(next)next.p=prev;if(that[FIRST]==entry)that[FIRST]=next;if(that[LAST]==entry)that[LAST]=prev;that[SIZE]--}return!!entry},forEach:function(callbackfn){var f=ctx(callbackfn,arguments[1],3),entry;while(entry=entry?entry.n:this[FIRST]){f(entry.v,entry.k,this);while(entry&&entry.r)entry=entry.p}},has:function(key){return!!getEntry(this,key)}};Map=getCollection(Map,MAP,{get:function(key){var entry=getEntry(this,key);return entry&&entry.v},set:function(key,value){return def(this,key===0?0:key,value)}},collectionMethods,true);Set=getCollection(Set,SET,{add:function(value){return def(this,value=value===0?0:value,value)}},collectionMethods);function defWeak(that,key,value){if(isFrozen(assertObject(key)))leakStore(that).set(key,value);else{has(key,WEAK)||hidden(key,WEAK,{});key[WEAK][that[UID]]=value}return that}function leakStore(that){return that[LEAK]||hidden(that,LEAK,new Map)[LEAK]}var weakMethods={"delete":function(key){if(!isObject(key))return false;if(isFrozen(key))return leakStore(this)["delete"](key);return has(key,WEAK)&&has(key[WEAK],this[UID])&&delete key[WEAK][this[UID]]},has:function(key){if(!isObject(key))return false;if(isFrozen(key))return leakStore(this).has(key);return has(key,WEAK)&&has(key[WEAK],this[UID])}};WeakMap=getCollection(WeakMap,WEAKMAP,{get:function(key){if(isObject(key)){if(isFrozen(key))return leakStore(this).get(key);if(has(key,WEAK))return key[WEAK][this[UID]]}},set:function(key,value){return defWeak(this,key,value)}},weakMethods,true,true);if(framework&&(new WeakMap).set(Object.freeze(tmp),7).get(tmp)!=7){forEach.call(array("delete,has,get,set"),function(key){var method=WeakMap[PROTOTYPE][key];WeakMap[PROTOTYPE][key]=function(a,b){if(isObject(a)&&isFrozen(a)){var result=leakStore(this)[key](a,b);return key=="set"?this:result}return method.call(this,a,b)}})}WeakSet=getCollection(WeakSet,WEAKSET,{add:function(value){return defWeak(this,value,true)}},weakMethods,false,true)}();!function(){function Enumerate(iterated){var keys=[],key;for(key in iterated)keys.push(key);set(this,ITER,{o:iterated,a:keys,i:0})}createIterator(Enumerate,OBJECT,function(){var iter=this[ITER],keys=iter.a,key;do{if(iter.i>=keys.length)return iterResult(1)}while(!((key=keys[iter.i++])in iter.o));return iterResult(0,key)});function wrap(fn){return function(it){assertObject(it);try{return fn.apply(undefined,arguments),true}catch(e){return false}}}function reflectGet(target,propertyKey){var receiver=arguments.length<3?target:arguments[2],desc=getOwnDescriptor(assertObject(target),propertyKey),proto;if(desc)return has(desc,"value")?desc.value:desc.get===undefined?undefined:desc.get.call(receiver);return isObject(proto=getPrototypeOf(target))?reflectGet(proto,propertyKey,receiver):undefined}function reflectSet(target,propertyKey,V){var receiver=arguments.length<4?target:arguments[3],ownDesc=getOwnDescriptor(assertObject(target),propertyKey),existingDescriptor,proto;if(!ownDesc){if(isObject(proto=getPrototypeOf(target))){return reflectSet(proto,propertyKey,V,receiver)}ownDesc=descriptor(0)}if(has(ownDesc,"value")){if(ownDesc.writable===false||!isObject(receiver))return false;existingDescriptor=getOwnDescriptor(receiver,propertyKey)||descriptor(0);existingDescriptor.value=V;return defineProperty(receiver,propertyKey,existingDescriptor),true}return ownDesc.set===undefined?false:(ownDesc.set.call(receiver,V),true)}var isExtensible=Object.isExtensible||returnIt;var reflect={apply:ctx(call,apply,3),construct:function(target,argumentsList){var proto=assertFunction(arguments.length<3?target:arguments[2])[PROTOTYPE],instance=create(isObject(proto)?proto:ObjectProto),result=apply.call(target,instance,argumentsList);return isObject(result)?result:instance},defineProperty:wrap(defineProperty),deleteProperty:function(target,propertyKey){var desc=getOwnDescriptor(assertObject(target),propertyKey);return desc&&!desc.configurable?false:delete target[propertyKey]},enumerate:function(target){return new Enumerate(assertObject(target))},get:reflectGet,getOwnPropertyDescriptor:function(target,propertyKey){return getOwnDescriptor(assertObject(target),propertyKey)},getPrototypeOf:function(target){return getPrototypeOf(assertObject(target))},has:function(target,propertyKey){return propertyKey in target},isExtensible:function(target){return!!isExtensible(assertObject(target))},ownKeys:ownKeys,preventExtensions:wrap(Object.preventExtensions||returnIt),set:reflectSet};if(setPrototypeOf)reflect.setPrototypeOf=function(target,proto){return setPrototypeOf(assertObject(target),proto),true};$define(GLOBAL,{Reflect:{}});$define(STATIC,"Reflect",reflect)}();!function(){$define(PROTO,ARRAY,{includes:createArrayContains(true)});$define(PROTO,STRING,{at:createPointAt(true)});function createObjectToArray(isEntries){return function(object){var O=toObject(object),keys=getKeys(object),length=keys.length,i=0,result=Array(length),key;if(isEntries)while(length>i)result[i]=[key=keys[i++],O[key]];else while(length>i)result[i]=O[keys[i++]];return result}}$define(STATIC,OBJECT,{getOwnPropertyDescriptors:function(object){var O=toObject(object),result={};forEach.call(ownKeys(O),function(key){defineProperty(result,key,descriptor(0,getOwnDescriptor(O,key)))});return result},values:createObjectToArray(false),entries:createObjectToArray(true)});$define(STATIC,REGEXP,{escape:createReplacer(/([\\\-[\]{}()*+?.,^$|])/g,"\\$1",true)})}();!function(REFERENCE){REFERENCE_GET=getWellKnownSymbol(REFERENCE+"Get",true);var REFERENCE_SET=getWellKnownSymbol(REFERENCE+SET,true),REFERENCE_DELETE=getWellKnownSymbol(REFERENCE+"Delete",true);$define(STATIC,SYMBOL,{referenceGet:REFERENCE_GET,referenceSet:REFERENCE_SET,referenceDelete:REFERENCE_DELETE});hidden(FunctionProto,REFERENCE_GET,returnThis);function setMapMethods(Constructor){if(Constructor){var MapProto=Constructor[PROTOTYPE];hidden(MapProto,REFERENCE_GET,MapProto.get);hidden(MapProto,REFERENCE_SET,MapProto.set);hidden(MapProto,REFERENCE_DELETE,MapProto["delete"])}}setMapMethods(Map);setMapMethods(WeakMap)}("reference");!function(arrayStatics){function setArrayStatics(keys,length){forEach.call(array(keys),function(key){if(key in ArrayProto)arrayStatics[key]=ctx(call,ArrayProto[key],length)})}setArrayStatics("pop,reverse,shift,keys,values,entries",1);setArrayStatics("indexOf,every,some,forEach,map,filter,find,findIndex,includes",3);setArrayStatics("join,slice,concat,push,splice,unshift,sort,lastIndexOf,"+"reduce,reduceRight,copyWithin,fill,turn");$define(STATIC,ARRAY,arrayStatics)}({});!function(NodeList){if(framework&&NodeList&&!(SYMBOL_ITERATOR in NodeList[PROTOTYPE])){hidden(NodeList[PROTOTYPE],SYMBOL_ITERATOR,Iterators[ARRAY])}Iterators.NodeList=Iterators[ARRAY]}(global.NodeList)}(typeof self!="undefined"&&self.Math===Math?self:Function("return this")(),true)},{}],3:[function(require,module,exports){(function(global){!function(global){"use strict";var hasOwn=Object.prototype.hasOwnProperty;var undefined;var iteratorSymbol=typeof Symbol==="function"&&Symbol.iterator||"@@iterator";var inModule=typeof module==="object";var runtime=global.regeneratorRuntime;if(runtime){if(inModule){module.exports=runtime}return}runtime=global.regeneratorRuntime=inModule?module.exports:{};function wrap(innerFn,outerFn,self,tryLocsList){return new Generator(innerFn,outerFn,self||null,tryLocsList||[])}runtime.wrap=wrap;function tryCatch(fn,obj,arg){try{return{type:"normal",arg:fn.call(obj,arg)}}catch(err){return{type:"throw",arg:err}}}var GenStateSuspendedStart="suspendedStart";var GenStateSuspendedYield="suspendedYield";var GenStateExecuting="executing";var GenStateCompleted="completed";var ContinueSentinel={};function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var Gp=GeneratorFunctionPrototype.prototype=Generator.prototype;GeneratorFunction.prototype=Gp.constructor=GeneratorFunctionPrototype;GeneratorFunctionPrototype.constructor=GeneratorFunction;GeneratorFunction.displayName="GeneratorFunction";runtime.isGeneratorFunction=function(genFun){var ctor=typeof genFun==="function"&&genFun.constructor;return ctor?ctor===GeneratorFunction||(ctor.displayName||ctor.name)==="GeneratorFunction":false};runtime.mark=function(genFun){genFun.__proto__=GeneratorFunctionPrototype;genFun.prototype=Object.create(Gp);return genFun};runtime.async=function(innerFn,outerFn,self,tryLocsList){return new Promise(function(resolve,reject){var generator=wrap(innerFn,outerFn,self,tryLocsList);var callNext=step.bind(generator.next);var callThrow=step.bind(generator["throw"]);function step(arg){var record=tryCatch(this,null,arg);if(record.type==="throw"){reject(record.arg);return}var info=record.arg;if(info.done){resolve(info.value)}else{Promise.resolve(info.value).then(callNext,callThrow)}}callNext()})};function Generator(innerFn,outerFn,self,tryLocsList){var generator=outerFn?Object.create(outerFn.prototype):this;var context=new Context(tryLocsList);var state=GenStateSuspendedStart;function invoke(method,arg){if(state===GenStateExecuting){throw new Error("Generator is already running")}if(state===GenStateCompleted){return doneResult()}while(true){var delegate=context.delegate;if(delegate){var record=tryCatch(delegate.iterator[method],delegate.iterator,arg);if(record.type==="throw"){context.delegate=null;method="throw";arg=record.arg;continue}method="next";arg=undefined;var info=record.arg;if(info.done){context[delegate.resultName]=info.value;context.next=delegate.nextLoc}else{state=GenStateSuspendedYield;return info}context.delegate=null}if(method==="next"){if(state===GenStateSuspendedStart&&typeof arg!=="undefined"){throw new TypeError("attempt to send "+JSON.stringify(arg)+" to newborn generator")}if(state===GenStateSuspendedYield){context.sent=arg}else{delete context.sent}}else if(method==="throw"){if(state===GenStateSuspendedStart){state=GenStateCompleted;throw arg}if(context.dispatchException(arg)){method="next";arg=undefined}}else if(method==="return"){context.abrupt("return",arg)}state=GenStateExecuting;var record=tryCatch(innerFn,self,context);if(record.type==="normal"){state=context.done?GenStateCompleted:GenStateSuspendedYield;var info={value:record.arg,done:context.done};if(record.arg===ContinueSentinel){if(context.delegate&&method==="next"){arg=undefined}}else{return info}}else if(record.type==="throw"){state=GenStateCompleted;if(method==="next"){context.dispatchException(record.arg)}else{arg=record.arg}}}}generator.next=invoke.bind(generator,"next");generator["throw"]=invoke.bind(generator,"throw");generator["return"]=invoke.bind(generator,"return");return generator}Gp[iteratorSymbol]=function(){return this};Gp.toString=function(){return"[object Generator]"};function pushTryEntry(locs){var entry={tryLoc:locs[0]};if(1 in locs){entry.catchLoc=locs[1]}if(2 in locs){entry.finallyLoc=locs[2];entry.afterLoc=locs[3]}this.tryEntries.push(entry)}function resetTryEntry(entry){var record=entry.completion||{};record.type="normal";delete record.arg;entry.completion=record}function Context(tryLocsList){this.tryEntries=[{tryLoc:"root"}];tryLocsList.forEach(pushTryEntry,this);this.reset()}runtime.keys=function(object){var keys=[];for(var key in object){keys.push(key)}keys.reverse();return function next(){while(keys.length){var key=keys.pop();if(key in object){next.value=key;next.done=false;return next}}next.done=true;return next}};function values(iterable){if(iterable){var iteratorMethod=iterable[iteratorSymbol];if(iteratorMethod){return iteratorMethod.call(iterable)}if(typeof iterable.next==="function"){return iterable}if(!isNaN(iterable.length)){var i=-1,next=function next(){while(++i<iterable.length){if(hasOwn.call(iterable,i)){next.value=iterable[i];next.done=false;return next}}next.value=undefined;next.done=true;return next};return next.next=next}}return{next:doneResult}}runtime.values=values;function doneResult(){return{value:undefined,done:true}}Context.prototype={constructor:Context,reset:function(){this.prev=0;this.next=0;this.sent=undefined;this.done=false;this.delegate=null;this.tryEntries.forEach(resetTryEntry);for(var tempIndex=0,tempName;hasOwn.call(this,tempName="t"+tempIndex)||tempIndex<20;++tempIndex){this[tempName]=null}},stop:function(){this.done=true;var rootEntry=this.tryEntries[0];var rootRecord=rootEntry.completion;if(rootRecord.type==="throw"){throw rootRecord.arg}return this.rval},dispatchException:function(exception){if(this.done){throw exception}var context=this;function handle(loc,caught){record.type="throw";record.arg=exception;context.next=loc;return!!caught}for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];var record=entry.completion;if(entry.tryLoc==="root"){return handle("end")}if(entry.tryLoc<=this.prev){var hasCatch=hasOwn.call(entry,"catchLoc");var hasFinally=hasOwn.call(entry,"finallyLoc");if(hasCatch&&hasFinally){if(this.prev<entry.catchLoc){return handle(entry.catchLoc,true)}else if(this.prev<entry.finallyLoc){return handle(entry.finallyLoc)}}else if(hasCatch){if(this.prev<entry.catchLoc){return handle(entry.catchLoc,true)}}else if(hasFinally){if(this.prev<entry.finallyLoc){return handle(entry.finallyLoc)}}else{throw new Error("try statement without catch or finally")}}}},abrupt:function(type,arg){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc<=this.prev&&hasOwn.call(entry,"finallyLoc")&&this.prev<entry.finallyLoc){var finallyEntry=entry;break}}if(finallyEntry&&(type==="break"||type==="continue")&&finallyEntry.tryLoc<=arg&&arg<finallyEntry.finallyLoc){finallyEntry=null}var record=finallyEntry?finallyEntry.completion:{};record.type=type;record.arg=arg;if(finallyEntry){this.next=finallyEntry.finallyLoc}else{this.complete(record)}return ContinueSentinel},complete:function(record,afterLoc){if(record.type==="throw"){throw record.arg}if(record.type==="break"||record.type==="continue"){this.next=record.arg}else if(record.type==="return"){this.rval=record.arg;this.next="end"}else if(record.type==="normal"&&afterLoc){this.next=afterLoc}return ContinueSentinel},finish:function(finallyLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.finallyLoc===finallyLoc){return this.complete(entry.completion,entry.afterLoc)}}},"catch":function(tryLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc===tryLoc){var record=entry.completion;if(record.type==="throw"){var thrown=record.arg;resetTryEntry(entry)}return thrown}}throw new Error("illegal catch attempt")},delegateYield:function(iterable,resultName,nextLoc){this.delegate={iterator:values(iterable),resultName:resultName,nextLoc:nextLoc};return ContinueSentinel}}}(typeof global==="object"?global:typeof window==="object"?window:this)}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}]},{},[1]);
},{}],2:[function(require,module,exports){
"use strict";

var _interopRequire = function (obj) { return obj && obj.__esModule ? obj["default"] : obj; };

/**
 * if using a feature that requires a browser-polyfill
 * @see https://babeljs.io/docs/usage/polyfill/
 */
require("babel/browser-polyfill");

var PositionSticky = _interopRequire(require("./position-sticky"));

module.exports = function (element) {
  return new PositionSticky(element);
};

var StickyElementPrototype = Object.create(HTMLElement.prototype);

StickyElementPrototype.attachedCallback = function () {
  new PositionSticky(this);
};

document.registerElement("position-sticky", {
  prototype: StickyElementPrototype,
  "extends": "div"
});

},{"./position-sticky":3,"babel/browser-polyfill":1}],3:[function(require,module,exports){
"use strict";

var _interopRequire = function (obj) { return obj && obj.__esModule ? obj["default"] : obj; };

var _prototypeProperties = function (child, staticProps, instanceProps) { if (staticProps) Object.defineProperties(child, staticProps); if (instanceProps) Object.defineProperties(child.prototype, instanceProps); };

var _classCallCheck = function (instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } };

var Rectangle = _interopRequire(require("./rectangle"));

var util = _interopRequire(require("./util"));

var PositionSticky = (function () {
  function PositionSticky(element) {
    _classCallCheck(this, PositionSticky);

    this.sticky = element;
    this.parent = element.parentNode;
    this.rectangle = new WeakMap();

    this.rectangle.set(this.sticky, new Rectangle(this.sticky));
    this.rectangle.set(this.parent, new Rectangle(this.parent));

    this.diff = {
      top: this.sticky.offsetTop - this.parent.offsetTop,
      left: this.sticky.offsetLeft - this.parent.offsetLeft
    };

    this.original = {
      position: element.style.position,
      top: element.style.top.replace("px", "") - 0,
      bottom: element.style.bottom.replace("px", "") - 0,
      width: element.style.width,
      height: element.style.height
    };

    window.addEventListener("scroll", this.onScroll.bind(this));
    window.addEventListener("resize", this.onResize.bind(this));
  }

  _prototypeProperties(PositionSticky, null, {
    onScroll: {
      value: function onScroll(e) {

        var sticky = this.rectangle.get(this.sticky);
        var parent = this.rectangle.get(this.parent);

        if (window.scrollY + sticky.height - this.original.bottom > parent.bottom - this.diff.top) {

          util.setStyle(this.sticky, {
            position: "absolute",
            top: "" + (parent.bottom - sticky.height - this.diff.top) + "px",
            left: "auto"
          });
        } else if (window.scrollY >= parent.top - this.original.top) {

          util.setStyle(this.sticky, {
            position: "fixed",
            top: "" + this.original.top + "px",
            left: "" + (parent.left + this.diff.left) + "px",
            width: "" + sticky.width + "px"
          });
        } else {

          util.setStyle(this.sticky, {
            position: this.original.position,
            width: this.original.width,
            height: this.original.height
          });
        }
      },
      writable: true,
      configurable: true
    },
    onResize: {
      value: function onResize(e) {

        this.rectangle.set(this.sticky, new Rectangle(this.sticky));
        this.rectangle.set(this.parent, new Rectangle(this.parent));

        this.onScroll.call(this);
      },
      writable: true,
      configurable: true
    }
  });

  return PositionSticky;
})();

module.exports = PositionSticky;

},{"./rectangle":4,"./util":5}],4:[function(require,module,exports){
"use strict";

var _prototypeProperties = function (child, staticProps, instanceProps) { if (staticProps) Object.defineProperties(child, staticProps); if (instanceProps) Object.defineProperties(child.prototype, instanceProps); };

var _classCallCheck = function (instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } };

var Rectangle = (function () {
  function Rectangle(element) {
    _classCallCheck(this, Rectangle);

    this._top = element.offsetTop;
    this._left = element.offsetLeft;
    this._width = element.clientWidth;
    this._height = element.clientHeight;
  }

  _prototypeProperties(Rectangle, null, {
    top: {
      get: function () {
        return this._top;
      },
      set: function (value) {
        this._top = value;
      },
      configurable: true
    },
    left: {
      get: function () {
        return this._left;
      },
      set: function (value) {
        this._left = value;
      },
      configurable: true
    },
    right: {
      get: function () {
        return this._left + this._width;
      },
      configurable: true
    },
    bottom: {
      get: function () {
        return this._top + this._height;
      },
      configurable: true
    },
    width: {
      get: function () {
        return this._width;
      },
      set: function (value) {
        this._width = value;
      },
      configurable: true
    },
    height: {
      get: function () {
        return this._height;
      },
      set: function (value) {
        this._height = value;
      },
      configurable: true
    }
  });

  return Rectangle;
})();

module.exports = Rectangle;

},{}],5:[function(require,module,exports){
"use strict";

module.exports = {

  setStyle: function (element, properties) {
    Object.keys(properties).forEach(function (key) {
      element.style[key] = properties[key];
    });
  }

};

},{}]},{},[2])(2)
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJub2RlX21vZHVsZXMvYmFiZWwvYnJvd3Nlci1wb2x5ZmlsbC5qcyIsIi9Vc2Vycy9zZW5zdWlfc2hvZ28vd29ya3NwYWNlL2dpdGh1Yi9wb3NpdGlvbi1zdGlja3kvc3JjL2luZGV4LmpzIiwiL1VzZXJzL3NlbnN1aV9zaG9nby93b3Jrc3BhY2UvZ2l0aHViL3Bvc2l0aW9uLXN0aWNreS9zcmMvcG9zaXRpb24tc3RpY2t5LmpzIiwiL1VzZXJzL3NlbnN1aV9zaG9nby93b3Jrc3BhY2UvZ2l0aHViL3Bvc2l0aW9uLXN0aWNreS9zcmMvcmVjdGFuZ2xlLmpzIiwiL1VzZXJzL3NlbnN1aV9zaG9nby93b3Jrc3BhY2UvZ2l0aHViL3Bvc2l0aW9uLXN0aWNreS9zcmMvdXRpbC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQ0FBO0FBQ0E7Ozs7Ozs7Ozs7QUNLQSxPQUFPLENBQUMsd0JBQXdCLENBQUMsQ0FBQzs7SUFFM0IsY0FBYywyQkFBTSxtQkFBbUI7O2lCQUUvQixVQUFVLE9BQU8sRUFBRTtBQUNoQyxTQUFPLElBQUksY0FBYyxDQUFDLE9BQU8sQ0FBQyxDQUFDO0NBQ3BDOztBQUVELElBQUksc0JBQXNCLEdBQUcsTUFBTSxDQUFDLE1BQU0sQ0FBQyxXQUFXLENBQUMsU0FBUyxDQUFDLENBQUM7O0FBRWxFLHNCQUFzQixDQUFDLGdCQUFnQixHQUFHLFlBQVk7QUFDcEQsTUFBSSxjQUFjLENBQUMsSUFBSSxDQUFDLENBQUM7Q0FDMUIsQ0FBQzs7QUFFRixRQUFRLENBQUMsZUFBZSxDQUFDLGlCQUFpQixFQUFFO0FBQzFDLFdBQVMsRUFBRSxzQkFBc0I7QUFDakMsYUFBUyxLQUFLO0NBQ2YsQ0FBQyxDQUFDOzs7Ozs7Ozs7OztJQ3JCSSxTQUFTLDJCQUFNLGFBQWE7O0lBQzVCLElBQUksMkJBQU0sUUFBUTs7SUFFSixjQUFjO0FBRXRCLFdBRlEsY0FBYyxDQUVyQixPQUFPOzBCQUZBLGNBQWM7O0FBSS9CLFFBQUksQ0FBQyxNQUFNLEdBQUcsT0FBTyxDQUFDO0FBQ3RCLFFBQUksQ0FBQyxNQUFNLEdBQUcsT0FBTyxDQUFDLFVBQVUsQ0FBQztBQUNqQyxRQUFJLENBQUMsU0FBUyxHQUFHLElBQUksT0FBTyxFQUFFLENBQUM7O0FBRS9CLFFBQUksQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxNQUFNLEVBQUUsSUFBSSxTQUFTLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUM7QUFDNUQsUUFBSSxDQUFDLFNBQVMsQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLE1BQU0sRUFBRSxJQUFJLFNBQVMsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQzs7QUFFNUQsUUFBSSxDQUFDLElBQUksR0FBRztBQUNWLFNBQUcsRUFBRSxJQUFJLENBQUMsTUFBTSxDQUFDLFNBQVMsR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDLFNBQVM7QUFDbEQsVUFBSSxFQUFFLElBQUksQ0FBQyxNQUFNLENBQUMsVUFBVSxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsVUFBVTtLQUN0RCxDQUFDOztBQUVGLFFBQUksQ0FBQyxRQUFRLEdBQUc7QUFDZCxjQUFRLEVBQUUsT0FBTyxDQUFDLEtBQUssQ0FBQyxRQUFRO0FBQ2hDLFNBQUcsRUFBRSxPQUFPLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxPQUFPLENBQUMsSUFBSSxFQUFFLEVBQUUsQ0FBQyxHQUFHLENBQUM7QUFDNUMsWUFBTSxFQUFFLE9BQU8sQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxJQUFJLEVBQUUsRUFBRSxDQUFDLEdBQUcsQ0FBQztBQUNsRCxXQUFLLEVBQUUsT0FBTyxDQUFDLEtBQUssQ0FBQyxLQUFLO0FBQzFCLFlBQU0sRUFBRSxPQUFPLENBQUMsS0FBSyxDQUFDLE1BQU07S0FDN0IsQ0FBQzs7QUFFRixVQUFNLENBQUMsZ0JBQWdCLENBQUMsUUFBUSxFQUFFLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUM7QUFDNUQsVUFBTSxDQUFDLGdCQUFnQixDQUFDLFFBQVEsRUFBRSxJQUFJLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO0dBQzdEOzt1QkExQmtCLGNBQWM7QUE0QmpDLFlBQVE7YUFBQSxrQkFBQyxDQUFDLEVBQUU7O0FBRVYsWUFBSSxNQUFNLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDO0FBQzdDLFlBQUksTUFBTSxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQzs7QUFFN0MsWUFBSSxNQUFNLENBQUMsT0FBTyxHQUFHLE1BQU0sQ0FBQyxNQUFNLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQyxNQUFNLEdBQUcsTUFBTSxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsRUFBRTs7QUFFekYsY0FBSSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFFO0FBQ3pCLG9CQUFRLEVBQUUsVUFBVTtBQUNwQixlQUFHLFFBQUssTUFBTSxDQUFDLE1BQU0sR0FBRyxNQUFNLENBQUMsTUFBTSxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFBLE9BQUk7QUFDekQsZ0JBQUksRUFBRSxNQUFNO1dBQ2IsQ0FBQyxDQUFDO1NBRUosTUFBTSxJQUFJLE1BQU0sQ0FBQyxPQUFPLElBQUksTUFBTSxDQUFDLEdBQUcsR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDLEdBQUcsRUFBRTs7QUFFM0QsY0FBSSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFFO0FBQ3pCLG9CQUFRLEVBQUUsT0FBTztBQUNqQixlQUFHLE9BQUssSUFBSSxDQUFDLFFBQVEsQ0FBQyxHQUFHLE9BQUk7QUFDN0IsZ0JBQUksUUFBSyxNQUFNLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFBLE9BQUk7QUFDekMsaUJBQUssT0FBSyxNQUFNLENBQUMsS0FBSyxPQUFJO1dBQzNCLENBQUMsQ0FBQztTQUVKLE1BQU07O0FBRUwsY0FBSSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFFO0FBQ3pCLG9CQUFRLEVBQUUsSUFBSSxDQUFDLFFBQVEsQ0FBQyxRQUFRO0FBQ2hDLGlCQUFLLEVBQUUsSUFBSSxDQUFDLFFBQVEsQ0FBQyxLQUFLO0FBQzFCLGtCQUFNLEVBQUUsSUFBSSxDQUFDLFFBQVEsQ0FBQyxNQUFNO1dBQzdCLENBQUMsQ0FBQztTQUNKO09BQ0Y7Ozs7QUFFRCxZQUFRO2FBQUEsa0JBQUMsQ0FBQyxFQUFFOztBQUVWLFlBQUksQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxNQUFNLEVBQUUsSUFBSSxTQUFTLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUM7QUFDNUQsWUFBSSxDQUFDLFNBQVMsQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLE1BQU0sRUFBRSxJQUFJLFNBQVMsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQzs7QUFFNUQsWUFBSSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7T0FDMUI7Ozs7OztTQWxFa0IsY0FBYzs7O2lCQUFkLGNBQWM7Ozs7Ozs7OztJQ0hkLFNBQVM7QUFFakIsV0FGUSxTQUFTLENBRWhCLE9BQU87MEJBRkEsU0FBUzs7QUFHMUIsUUFBSSxDQUFDLElBQUksR0FBRyxPQUFPLENBQUMsU0FBUyxDQUFDO0FBQzlCLFFBQUksQ0FBQyxLQUFLLEdBQUcsT0FBTyxDQUFDLFVBQVUsQ0FBQztBQUNoQyxRQUFJLENBQUMsTUFBTSxHQUFHLE9BQU8sQ0FBQyxXQUFXLENBQUM7QUFDbEMsUUFBSSxDQUFDLE9BQU8sR0FBRyxPQUFPLENBQUMsWUFBWSxDQUFDO0dBQ3JDOzt1QkFQa0IsU0FBUztBQWF4QixPQUFHO1dBSkEsWUFBRztBQUNSLGVBQU8sSUFBSSxDQUFDLElBQUksQ0FBQztPQUNsQjtXQUVNLFVBQUMsS0FBSyxFQUFFO0FBQ2IsWUFBSSxDQUFDLElBQUksR0FBRyxLQUFLLENBQUM7T0FDbkI7OztBQU1HLFFBQUk7V0FKQSxZQUFHO0FBQ1QsZUFBTyxJQUFJLENBQUMsS0FBSyxDQUFDO09BQ25CO1dBRU8sVUFBQyxLQUFLLEVBQUU7QUFDZCxZQUFJLENBQUMsS0FBSyxHQUFHLEtBQUssQ0FBQztPQUNwQjs7O0FBRUcsU0FBSztXQUFBLFlBQUc7QUFDVixlQUFPLElBQUksQ0FBQyxLQUFLLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQztPQUNqQzs7O0FBRUcsVUFBTTtXQUFBLFlBQUc7QUFDWCxlQUFPLElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQztPQUNqQzs7O0FBTUcsU0FBSztXQUpBLFlBQUc7QUFDVixlQUFPLElBQUksQ0FBQyxNQUFNLENBQUM7T0FDcEI7V0FFUSxVQUFDLEtBQUssRUFBRTtBQUNmLFlBQUksQ0FBQyxNQUFNLEdBQUcsS0FBSyxDQUFDO09BQ3JCOzs7QUFNRyxVQUFNO1dBSkEsWUFBRztBQUNYLGVBQU8sSUFBSSxDQUFDLE9BQU8sQ0FBQztPQUNyQjtXQUVTLFVBQUMsS0FBSyxFQUFFO0FBQ2hCLFlBQUksQ0FBQyxPQUFPLEdBQUcsS0FBSyxDQUFDO09BQ3RCOzs7OztTQS9Da0IsU0FBUzs7O2lCQUFULFNBQVM7Ozs7O2lCQ0FmOztBQUViLFVBQVEsRUFBRSxVQUFDLE9BQU8sRUFBRSxVQUFVLEVBQUs7QUFDakMsVUFBTSxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQyxPQUFPLENBQUMsVUFBQyxHQUFHLEVBQUs7QUFDdkMsYUFBTyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsR0FBRyxVQUFVLENBQUMsR0FBRyxDQUFDLENBQUM7S0FDdEMsQ0FBQyxDQUFDO0dBQ0o7O0NBRUYiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkoezE6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpeyhmdW5jdGlvbihnbG9iYWwpe1widXNlIHN0cmljdFwiO2lmKGdsb2JhbC5fYmFiZWxQb2x5ZmlsbCl7dGhyb3cgbmV3IEVycm9yKFwib25seSBvbmUgaW5zdGFuY2Ugb2YgYmFiZWwvcG9seWZpbGwgaXMgYWxsb3dlZFwiKX1nbG9iYWwuX2JhYmVsUG9seWZpbGw9dHJ1ZTtyZXF1aXJlKFwiY29yZS1qcy9zaGltXCIpO3JlcXVpcmUoXCJyZWdlbmVyYXRvci1iYWJlbC9ydW50aW1lXCIpfSkuY2FsbCh0aGlzLHR5cGVvZiBnbG9iYWwhPT1cInVuZGVmaW5lZFwiP2dsb2JhbDp0eXBlb2Ygc2VsZiE9PVwidW5kZWZpbmVkXCI/c2VsZjp0eXBlb2Ygd2luZG93IT09XCJ1bmRlZmluZWRcIj93aW5kb3c6e30pfSx7XCJjb3JlLWpzL3NoaW1cIjoyLFwicmVnZW5lcmF0b3ItYmFiZWwvcnVudGltZVwiOjN9XSwyOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXshZnVuY3Rpb24oZ2xvYmFsLGZyYW1ld29yayx1bmRlZmluZWQpe1widXNlIHN0cmljdFwiO3ZhciBPQkpFQ1Q9XCJPYmplY3RcIixGVU5DVElPTj1cIkZ1bmN0aW9uXCIsQVJSQVk9XCJBcnJheVwiLFNUUklORz1cIlN0cmluZ1wiLE5VTUJFUj1cIk51bWJlclwiLFJFR0VYUD1cIlJlZ0V4cFwiLERBVEU9XCJEYXRlXCIsTUFQPVwiTWFwXCIsU0VUPVwiU2V0XCIsV0VBS01BUD1cIldlYWtNYXBcIixXRUFLU0VUPVwiV2Vha1NldFwiLFNZTUJPTD1cIlN5bWJvbFwiLFBST01JU0U9XCJQcm9taXNlXCIsTUFUSD1cIk1hdGhcIixBUkdVTUVOVFM9XCJBcmd1bWVudHNcIixQUk9UT1RZUEU9XCJwcm90b3R5cGVcIixDT05TVFJVQ1RPUj1cImNvbnN0cnVjdG9yXCIsVE9fU1RSSU5HPVwidG9TdHJpbmdcIixUT19TVFJJTkdfVEFHPVRPX1NUUklORytcIlRhZ1wiLFRPX0xPQ0FMRT1cInRvTG9jYWxlU3RyaW5nXCIsSEFTX09XTj1cImhhc093blByb3BlcnR5XCIsRk9SX0VBQ0g9XCJmb3JFYWNoXCIsSVRFUkFUT1I9XCJpdGVyYXRvclwiLEZGX0lURVJBVE9SPVwiQEBcIitJVEVSQVRPUixQUk9DRVNTPVwicHJvY2Vzc1wiLENSRUFURV9FTEVNRU5UPVwiY3JlYXRlRWxlbWVudFwiLEZ1bmN0aW9uPWdsb2JhbFtGVU5DVElPTl0sT2JqZWN0PWdsb2JhbFtPQkpFQ1RdLEFycmF5PWdsb2JhbFtBUlJBWV0sU3RyaW5nPWdsb2JhbFtTVFJJTkddLE51bWJlcj1nbG9iYWxbTlVNQkVSXSxSZWdFeHA9Z2xvYmFsW1JFR0VYUF0sRGF0ZT1nbG9iYWxbREFURV0sTWFwPWdsb2JhbFtNQVBdLFNldD1nbG9iYWxbU0VUXSxXZWFrTWFwPWdsb2JhbFtXRUFLTUFQXSxXZWFrU2V0PWdsb2JhbFtXRUFLU0VUXSxTeW1ib2w9Z2xvYmFsW1NZTUJPTF0sTWF0aD1nbG9iYWxbTUFUSF0sVHlwZUVycm9yPWdsb2JhbC5UeXBlRXJyb3IsUmFuZ2VFcnJvcj1nbG9iYWwuUmFuZ2VFcnJvcixzZXRUaW1lb3V0PWdsb2JhbC5zZXRUaW1lb3V0LHNldEltbWVkaWF0ZT1nbG9iYWwuc2V0SW1tZWRpYXRlLGNsZWFySW1tZWRpYXRlPWdsb2JhbC5jbGVhckltbWVkaWF0ZSxwYXJzZUludD1nbG9iYWwucGFyc2VJbnQsaXNGaW5pdGU9Z2xvYmFsLmlzRmluaXRlLHByb2Nlc3M9Z2xvYmFsW1BST0NFU1NdLG5leHRUaWNrPXByb2Nlc3MmJnByb2Nlc3MubmV4dFRpY2ssZG9jdW1lbnQ9Z2xvYmFsLmRvY3VtZW50LGh0bWw9ZG9jdW1lbnQmJmRvY3VtZW50LmRvY3VtZW50RWxlbWVudCxuYXZpZ2F0b3I9Z2xvYmFsLm5hdmlnYXRvcixkZWZpbmU9Z2xvYmFsLmRlZmluZSxjb25zb2xlPWdsb2JhbC5jb25zb2xlfHx7fSxBcnJheVByb3RvPUFycmF5W1BST1RPVFlQRV0sT2JqZWN0UHJvdG89T2JqZWN0W1BST1RPVFlQRV0sRnVuY3Rpb25Qcm90bz1GdW5jdGlvbltQUk9UT1RZUEVdLEluZmluaXR5PTEvMCxET1Q9XCIuXCI7ZnVuY3Rpb24gaXNPYmplY3QoaXQpe3JldHVybiBpdCE9PW51bGwmJih0eXBlb2YgaXQ9PVwib2JqZWN0XCJ8fHR5cGVvZiBpdD09XCJmdW5jdGlvblwiKX1mdW5jdGlvbiBpc0Z1bmN0aW9uKGl0KXtyZXR1cm4gdHlwZW9mIGl0PT1cImZ1bmN0aW9uXCJ9dmFyIGlzTmF0aXZlPWN0eCgvLi8udGVzdCwvXFxbbmF0aXZlIGNvZGVcXF1cXHMqXFx9XFxzKiQvLDEpO3ZhciB0b1N0cmluZz1PYmplY3RQcm90b1tUT19TVFJJTkddO2Z1bmN0aW9uIHNldFRvU3RyaW5nVGFnKGl0LHRhZyxzdGF0KXtpZihpdCYmIWhhcyhpdD1zdGF0P2l0Oml0W1BST1RPVFlQRV0sU1lNQk9MX1RBRykpaGlkZGVuKGl0LFNZTUJPTF9UQUcsdGFnKX1mdW5jdGlvbiBjb2YoaXQpe3JldHVybiB0b1N0cmluZy5jYWxsKGl0KS5zbGljZSg4LC0xKX1mdW5jdGlvbiBjbGFzc29mKGl0KXt2YXIgTyxUO3JldHVybiBpdD09dW5kZWZpbmVkP2l0PT09dW5kZWZpbmVkP1wiVW5kZWZpbmVkXCI6XCJOdWxsXCI6dHlwZW9mKFQ9KE89T2JqZWN0KGl0KSlbU1lNQk9MX1RBR10pPT1cInN0cmluZ1wiP1Q6Y29mKE8pfXZhciBjYWxsPUZ1bmN0aW9uUHJvdG8uY2FsbCxhcHBseT1GdW5jdGlvblByb3RvLmFwcGx5LFJFRkVSRU5DRV9HRVQ7ZnVuY3Rpb24gcGFydCgpe3ZhciBmbj1hc3NlcnRGdW5jdGlvbih0aGlzKSxsZW5ndGg9YXJndW1lbnRzLmxlbmd0aCxhcmdzPUFycmF5KGxlbmd0aCksaT0wLF89cGF0aC5fLGhvbGRlcj1mYWxzZTt3aGlsZShsZW5ndGg+aSlpZigoYXJnc1tpXT1hcmd1bWVudHNbaSsrXSk9PT1fKWhvbGRlcj10cnVlO3JldHVybiBmdW5jdGlvbigpe3ZhciB0aGF0PXRoaXMsX2xlbmd0aD1hcmd1bWVudHMubGVuZ3RoLGk9MCxqPTAsX2FyZ3M7aWYoIWhvbGRlciYmIV9sZW5ndGgpcmV0dXJuIGludm9rZShmbixhcmdzLHRoYXQpO19hcmdzPWFyZ3Muc2xpY2UoKTtpZihob2xkZXIpZm9yKDtsZW5ndGg+aTtpKyspaWYoX2FyZ3NbaV09PT1fKV9hcmdzW2ldPWFyZ3VtZW50c1tqKytdO3doaWxlKF9sZW5ndGg+ailfYXJncy5wdXNoKGFyZ3VtZW50c1tqKytdKTtyZXR1cm4gaW52b2tlKGZuLF9hcmdzLHRoYXQpfX1mdW5jdGlvbiBjdHgoZm4sdGhhdCxsZW5ndGgpe2Fzc2VydEZ1bmN0aW9uKGZuKTtpZih+bGVuZ3RoJiZ0aGF0PT09dW5kZWZpbmVkKXJldHVybiBmbjtzd2l0Y2gobGVuZ3RoKXtjYXNlIDE6cmV0dXJuIGZ1bmN0aW9uKGEpe3JldHVybiBmbi5jYWxsKHRoYXQsYSl9O2Nhc2UgMjpyZXR1cm4gZnVuY3Rpb24oYSxiKXtyZXR1cm4gZm4uY2FsbCh0aGF0LGEsYil9O2Nhc2UgMzpyZXR1cm4gZnVuY3Rpb24oYSxiLGMpe3JldHVybiBmbi5jYWxsKHRoYXQsYSxiLGMpfX1yZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gZm4uYXBwbHkodGhhdCxhcmd1bWVudHMpfX1mdW5jdGlvbiBpbnZva2UoZm4sYXJncyx0aGF0KXt2YXIgdW49dGhhdD09PXVuZGVmaW5lZDtzd2l0Y2goYXJncy5sZW5ndGh8MCl7Y2FzZSAwOnJldHVybiB1bj9mbigpOmZuLmNhbGwodGhhdCk7Y2FzZSAxOnJldHVybiB1bj9mbihhcmdzWzBdKTpmbi5jYWxsKHRoYXQsYXJnc1swXSk7Y2FzZSAyOnJldHVybiB1bj9mbihhcmdzWzBdLGFyZ3NbMV0pOmZuLmNhbGwodGhhdCxhcmdzWzBdLGFyZ3NbMV0pO2Nhc2UgMzpyZXR1cm4gdW4/Zm4oYXJnc1swXSxhcmdzWzFdLGFyZ3NbMl0pOmZuLmNhbGwodGhhdCxhcmdzWzBdLGFyZ3NbMV0sYXJnc1syXSk7Y2FzZSA0OnJldHVybiB1bj9mbihhcmdzWzBdLGFyZ3NbMV0sYXJnc1syXSxhcmdzWzNdKTpmbi5jYWxsKHRoYXQsYXJnc1swXSxhcmdzWzFdLGFyZ3NbMl0sYXJnc1szXSk7Y2FzZSA1OnJldHVybiB1bj9mbihhcmdzWzBdLGFyZ3NbMV0sYXJnc1syXSxhcmdzWzNdLGFyZ3NbNF0pOmZuLmNhbGwodGhhdCxhcmdzWzBdLGFyZ3NbMV0sYXJnc1syXSxhcmdzWzNdLGFyZ3NbNF0pfXJldHVybiBmbi5hcHBseSh0aGF0LGFyZ3MpfXZhciBjcmVhdGU9T2JqZWN0LmNyZWF0ZSxnZXRQcm90b3R5cGVPZj1PYmplY3QuZ2V0UHJvdG90eXBlT2Ysc2V0UHJvdG90eXBlT2Y9T2JqZWN0LnNldFByb3RvdHlwZU9mLGRlZmluZVByb3BlcnR5PU9iamVjdC5kZWZpbmVQcm9wZXJ0eSxkZWZpbmVQcm9wZXJ0aWVzPU9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzLGdldE93bkRlc2NyaXB0b3I9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcixnZXRLZXlzPU9iamVjdC5rZXlzLGdldE5hbWVzPU9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzLGdldFN5bWJvbHM9T2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyxpc0Zyb3plbj1PYmplY3QuaXNGcm96ZW4saGFzPWN0eChjYWxsLE9iamVjdFByb3RvW0hBU19PV05dLDIpLEVTNU9iamVjdD1PYmplY3QsRGljdDtmdW5jdGlvbiB0b09iamVjdChpdCl7cmV0dXJuIEVTNU9iamVjdChhc3NlcnREZWZpbmVkKGl0KSl9ZnVuY3Rpb24gcmV0dXJuSXQoaXQpe3JldHVybiBpdH1mdW5jdGlvbiByZXR1cm5UaGlzKCl7cmV0dXJuIHRoaXN9ZnVuY3Rpb24gZ2V0KG9iamVjdCxrZXkpe2lmKGhhcyhvYmplY3Qsa2V5KSlyZXR1cm4gb2JqZWN0W2tleV19ZnVuY3Rpb24gb3duS2V5cyhpdCl7YXNzZXJ0T2JqZWN0KGl0KTtyZXR1cm4gZ2V0U3ltYm9scz9nZXROYW1lcyhpdCkuY29uY2F0KGdldFN5bWJvbHMoaXQpKTpnZXROYW1lcyhpdCl9dmFyIGFzc2lnbj1PYmplY3QuYXNzaWdufHxmdW5jdGlvbih0YXJnZXQsc291cmNlKXt2YXIgVD1PYmplY3QoYXNzZXJ0RGVmaW5lZCh0YXJnZXQpKSxsPWFyZ3VtZW50cy5sZW5ndGgsaT0xO3doaWxlKGw+aSl7dmFyIFM9RVM1T2JqZWN0KGFyZ3VtZW50c1tpKytdKSxrZXlzPWdldEtleXMoUyksbGVuZ3RoPWtleXMubGVuZ3RoLGo9MCxrZXk7d2hpbGUobGVuZ3RoPmopVFtrZXk9a2V5c1tqKytdXT1TW2tleV19cmV0dXJuIFR9O2Z1bmN0aW9uIGtleU9mKG9iamVjdCxlbCl7dmFyIE89dG9PYmplY3Qob2JqZWN0KSxrZXlzPWdldEtleXMoTyksbGVuZ3RoPWtleXMubGVuZ3RoLGluZGV4PTAsa2V5O3doaWxlKGxlbmd0aD5pbmRleClpZihPW2tleT1rZXlzW2luZGV4KytdXT09PWVsKXJldHVybiBrZXl9ZnVuY3Rpb24gYXJyYXkoaXQpe3JldHVybiBTdHJpbmcoaXQpLnNwbGl0KFwiLFwiKX12YXIgcHVzaD1BcnJheVByb3RvLnB1c2gsdW5zaGlmdD1BcnJheVByb3RvLnVuc2hpZnQsc2xpY2U9QXJyYXlQcm90by5zbGljZSxzcGxpY2U9QXJyYXlQcm90by5zcGxpY2UsaW5kZXhPZj1BcnJheVByb3RvLmluZGV4T2YsZm9yRWFjaD1BcnJheVByb3RvW0ZPUl9FQUNIXTtmdW5jdGlvbiBjcmVhdGVBcnJheU1ldGhvZCh0eXBlKXt2YXIgaXNNYXA9dHlwZT09MSxpc0ZpbHRlcj10eXBlPT0yLGlzU29tZT10eXBlPT0zLGlzRXZlcnk9dHlwZT09NCxpc0ZpbmRJbmRleD10eXBlPT02LG5vaG9sZXM9dHlwZT09NXx8aXNGaW5kSW5kZXg7cmV0dXJuIGZ1bmN0aW9uKGNhbGxiYWNrZm4pe3ZhciBPPU9iamVjdChhc3NlcnREZWZpbmVkKHRoaXMpKSx0aGF0PWFyZ3VtZW50c1sxXSxzZWxmPUVTNU9iamVjdChPKSxmPWN0eChjYWxsYmFja2ZuLHRoYXQsMyksbGVuZ3RoPXRvTGVuZ3RoKHNlbGYubGVuZ3RoKSxpbmRleD0wLHJlc3VsdD1pc01hcD9BcnJheShsZW5ndGgpOmlzRmlsdGVyP1tdOnVuZGVmaW5lZCx2YWwscmVzO2Zvcig7bGVuZ3RoPmluZGV4O2luZGV4KyspaWYobm9ob2xlc3x8aW5kZXggaW4gc2VsZil7dmFsPXNlbGZbaW5kZXhdO3Jlcz1mKHZhbCxpbmRleCxPKTtpZih0eXBlKXtpZihpc01hcClyZXN1bHRbaW5kZXhdPXJlcztlbHNlIGlmKHJlcylzd2l0Y2godHlwZSl7Y2FzZSAzOnJldHVybiB0cnVlO2Nhc2UgNTpyZXR1cm4gdmFsO2Nhc2UgNjpyZXR1cm4gaW5kZXg7Y2FzZSAyOnJlc3VsdC5wdXNoKHZhbCl9ZWxzZSBpZihpc0V2ZXJ5KXJldHVybiBmYWxzZX19cmV0dXJuIGlzRmluZEluZGV4Py0xOmlzU29tZXx8aXNFdmVyeT9pc0V2ZXJ5OnJlc3VsdH19ZnVuY3Rpb24gY3JlYXRlQXJyYXlDb250YWlucyhpc0NvbnRhaW5zKXtyZXR1cm4gZnVuY3Rpb24oZWwpe3ZhciBPPXRvT2JqZWN0KHRoaXMpLGxlbmd0aD10b0xlbmd0aChPLmxlbmd0aCksaW5kZXg9dG9JbmRleChhcmd1bWVudHNbMV0sbGVuZ3RoKTtpZihpc0NvbnRhaW5zJiZlbCE9ZWwpe2Zvcig7bGVuZ3RoPmluZGV4O2luZGV4KyspaWYoc2FtZU5hTihPW2luZGV4XSkpcmV0dXJuIGlzQ29udGFpbnN8fGluZGV4fWVsc2UgZm9yKDtsZW5ndGg+aW5kZXg7aW5kZXgrKylpZihpc0NvbnRhaW5zfHxpbmRleCBpbiBPKXtpZihPW2luZGV4XT09PWVsKXJldHVybiBpc0NvbnRhaW5zfHxpbmRleH1yZXR1cm4haXNDb250YWlucyYmLTF9fWZ1bmN0aW9uIGdlbmVyaWMoQSxCKXtyZXR1cm4gdHlwZW9mIEE9PVwiZnVuY3Rpb25cIj9BOkJ9dmFyIE1BWF9TQUZFX0lOVEVHRVI9OTAwNzE5OTI1NDc0MDk5MSxwb3c9TWF0aC5wb3csYWJzPU1hdGguYWJzLGNlaWw9TWF0aC5jZWlsLGZsb29yPU1hdGguZmxvb3IsbWF4PU1hdGgubWF4LG1pbj1NYXRoLm1pbixyYW5kb209TWF0aC5yYW5kb20sdHJ1bmM9TWF0aC50cnVuY3x8ZnVuY3Rpb24oaXQpe3JldHVybihpdD4wP2Zsb29yOmNlaWwpKGl0KX07ZnVuY3Rpb24gc2FtZU5hTihudW1iZXIpe3JldHVybiBudW1iZXIhPW51bWJlcn1mdW5jdGlvbiB0b0ludGVnZXIoaXQpe3JldHVybiBpc05hTihpdCk/MDp0cnVuYyhpdCl9ZnVuY3Rpb24gdG9MZW5ndGgoaXQpe3JldHVybiBpdD4wP21pbih0b0ludGVnZXIoaXQpLE1BWF9TQUZFX0lOVEVHRVIpOjB9ZnVuY3Rpb24gdG9JbmRleChpbmRleCxsZW5ndGgpe3ZhciBpbmRleD10b0ludGVnZXIoaW5kZXgpO3JldHVybiBpbmRleDwwP21heChpbmRleCtsZW5ndGgsMCk6bWluKGluZGV4LGxlbmd0aCl9ZnVuY3Rpb24gbHoobnVtKXtyZXR1cm4gbnVtPjk/bnVtOlwiMFwiK251bX1mdW5jdGlvbiBjcmVhdGVSZXBsYWNlcihyZWdFeHAscmVwbGFjZSxpc1N0YXRpYyl7dmFyIHJlcGxhY2VyPWlzT2JqZWN0KHJlcGxhY2UpP2Z1bmN0aW9uKHBhcnQpe3JldHVybiByZXBsYWNlW3BhcnRdfTpyZXBsYWNlO3JldHVybiBmdW5jdGlvbihpdCl7cmV0dXJuIFN0cmluZyhpc1N0YXRpYz9pdDp0aGlzKS5yZXBsYWNlKHJlZ0V4cCxyZXBsYWNlcil9fWZ1bmN0aW9uIGNyZWF0ZVBvaW50QXQodG9TdHJpbmcpe3JldHVybiBmdW5jdGlvbihwb3Mpe3ZhciBzPVN0cmluZyhhc3NlcnREZWZpbmVkKHRoaXMpKSxpPXRvSW50ZWdlcihwb3MpLGw9cy5sZW5ndGgsYSxiO2lmKGk8MHx8aT49bClyZXR1cm4gdG9TdHJpbmc/XCJcIjp1bmRlZmluZWQ7YT1zLmNoYXJDb2RlQXQoaSk7cmV0dXJuIGE8NTUyOTZ8fGE+NTYzMTl8fGkrMT09PWx8fChiPXMuY2hhckNvZGVBdChpKzEpKTw1NjMyMHx8Yj41NzM0Mz90b1N0cmluZz9zLmNoYXJBdChpKTphOnRvU3RyaW5nP3Muc2xpY2UoaSxpKzIpOihhLTU1Mjk2PDwxMCkrKGItNTYzMjApKzY1NTM2fX12YXIgUkVEVUNFX0VSUk9SPVwiUmVkdWNlIG9mIGVtcHR5IG9iamVjdCB3aXRoIG5vIGluaXRpYWwgdmFsdWVcIjtmdW5jdGlvbiBhc3NlcnQoY29uZGl0aW9uLG1zZzEsbXNnMil7aWYoIWNvbmRpdGlvbil0aHJvdyBUeXBlRXJyb3IobXNnMj9tc2cxK21zZzI6bXNnMSl9ZnVuY3Rpb24gYXNzZXJ0RGVmaW5lZChpdCl7aWYoaXQ9PXVuZGVmaW5lZCl0aHJvdyBUeXBlRXJyb3IoXCJGdW5jdGlvbiBjYWxsZWQgb24gbnVsbCBvciB1bmRlZmluZWRcIik7cmV0dXJuIGl0fWZ1bmN0aW9uIGFzc2VydEZ1bmN0aW9uKGl0KXthc3NlcnQoaXNGdW5jdGlvbihpdCksaXQsXCIgaXMgbm90IGEgZnVuY3Rpb24hXCIpO3JldHVybiBpdH1mdW5jdGlvbiBhc3NlcnRPYmplY3QoaXQpe2Fzc2VydChpc09iamVjdChpdCksaXQsXCIgaXMgbm90IGFuIG9iamVjdCFcIik7cmV0dXJuIGl0fWZ1bmN0aW9uIGFzc2VydEluc3RhbmNlKGl0LENvbnN0cnVjdG9yLG5hbWUpe2Fzc2VydChpdCBpbnN0YW5jZW9mIENvbnN0cnVjdG9yLG5hbWUsXCI6IHVzZSB0aGUgJ25ldycgb3BlcmF0b3IhXCIpfWZ1bmN0aW9uIGRlc2NyaXB0b3IoYml0bWFwLHZhbHVlKXtyZXR1cm57ZW51bWVyYWJsZTohKGJpdG1hcCYxKSxjb25maWd1cmFibGU6IShiaXRtYXAmMiksd3JpdGFibGU6IShiaXRtYXAmNCksdmFsdWU6dmFsdWV9fWZ1bmN0aW9uIHNpbXBsZVNldChvYmplY3Qsa2V5LHZhbHVlKXtvYmplY3Rba2V5XT12YWx1ZTtyZXR1cm4gb2JqZWN0fWZ1bmN0aW9uIGNyZWF0ZURlZmluZXIoYml0bWFwKXtyZXR1cm4gREVTQz9mdW5jdGlvbihvYmplY3Qsa2V5LHZhbHVlKXtyZXR1cm4gZGVmaW5lUHJvcGVydHkob2JqZWN0LGtleSxkZXNjcmlwdG9yKGJpdG1hcCx2YWx1ZSkpfTpzaW1wbGVTZXR9ZnVuY3Rpb24gdWlkKGtleSl7cmV0dXJuIFNZTUJPTCtcIihcIitrZXkrXCIpX1wiKygrK3NpZCtyYW5kb20oKSlbVE9fU1RSSU5HXSgzNil9ZnVuY3Rpb24gZ2V0V2VsbEtub3duU3ltYm9sKG5hbWUsc2V0dGVyKXtyZXR1cm4gU3ltYm9sJiZTeW1ib2xbbmFtZV18fChzZXR0ZXI/U3ltYm9sOnNhZmVTeW1ib2wpKFNZTUJPTCtET1QrbmFtZSl9dmFyIERFU0M9ISFmdW5jdGlvbigpe3RyeXtyZXR1cm4gZGVmaW5lUHJvcGVydHkoe30sXCJhXCIse2dldDpmdW5jdGlvbigpe3JldHVybiAyfX0pLmE9PTJ9Y2F0Y2goZSl7fX0oKSxzaWQ9MCxoaWRkZW49Y3JlYXRlRGVmaW5lcigxKSxzZXQ9U3ltYm9sP3NpbXBsZVNldDpoaWRkZW4sc2FmZVN5bWJvbD1TeW1ib2x8fHVpZDtmdW5jdGlvbiBhc3NpZ25IaWRkZW4odGFyZ2V0LHNyYyl7Zm9yKHZhciBrZXkgaW4gc3JjKWhpZGRlbih0YXJnZXQsa2V5LHNyY1trZXldKTtyZXR1cm4gdGFyZ2V0fXZhciBTWU1CT0xfVU5TQ09QQUJMRVM9Z2V0V2VsbEtub3duU3ltYm9sKFwidW5zY29wYWJsZXNcIiksQXJyYXlVbnNjb3BhYmxlcz1BcnJheVByb3RvW1NZTUJPTF9VTlNDT1BBQkxFU118fHt9LFNZTUJPTF9UQUc9Z2V0V2VsbEtub3duU3ltYm9sKFRPX1NUUklOR19UQUcpLFNZTUJPTF9TUEVDSUVTPWdldFdlbGxLbm93blN5bWJvbChcInNwZWNpZXNcIiksU1lNQk9MX0lURVJBVE9SO2Z1bmN0aW9uIHNldFNwZWNpZXMoQyl7aWYoREVTQyYmKGZyYW1ld29ya3x8IWlzTmF0aXZlKEMpKSlkZWZpbmVQcm9wZXJ0eShDLFNZTUJPTF9TUEVDSUVTLHtjb25maWd1cmFibGU6dHJ1ZSxnZXQ6cmV0dXJuVGhpc30pfXZhciBOT0RFPWNvZihwcm9jZXNzKT09UFJPQ0VTUyxjb3JlPXt9LHBhdGg9ZnJhbWV3b3JrP2dsb2JhbDpjb3JlLG9sZD1nbG9iYWwuY29yZSxleHBvcnRHbG9iYWwsRk9SQ0VEPTEsR0xPQkFMPTIsU1RBVElDPTQsUFJPVE89OCxCSU5EPTE2LFdSQVA9MzI7ZnVuY3Rpb24gJGRlZmluZSh0eXBlLG5hbWUsc291cmNlKXt2YXIga2V5LG93bixvdXQsZXhwLGlzR2xvYmFsPXR5cGUmR0xPQkFMLHRhcmdldD1pc0dsb2JhbD9nbG9iYWw6dHlwZSZTVEFUSUM/Z2xvYmFsW25hbWVdOihnbG9iYWxbbmFtZV18fE9iamVjdFByb3RvKVtQUk9UT1RZUEVdLGV4cG9ydHM9aXNHbG9iYWw/Y29yZTpjb3JlW25hbWVdfHwoY29yZVtuYW1lXT17fSk7aWYoaXNHbG9iYWwpc291cmNlPW5hbWU7Zm9yKGtleSBpbiBzb3VyY2Upe293bj0hKHR5cGUmRk9SQ0VEKSYmdGFyZ2V0JiZrZXkgaW4gdGFyZ2V0JiYoIWlzRnVuY3Rpb24odGFyZ2V0W2tleV0pfHxpc05hdGl2ZSh0YXJnZXRba2V5XSkpO291dD0ob3duP3RhcmdldDpzb3VyY2UpW2tleV07aWYoIWZyYW1ld29yayYmaXNHbG9iYWwmJiFpc0Z1bmN0aW9uKHRhcmdldFtrZXldKSlleHA9c291cmNlW2tleV07ZWxzZSBpZih0eXBlJkJJTkQmJm93billeHA9Y3R4KG91dCxnbG9iYWwpO2Vsc2UgaWYodHlwZSZXUkFQJiYhZnJhbWV3b3JrJiZ0YXJnZXRba2V5XT09b3V0KXtleHA9ZnVuY3Rpb24ocGFyYW0pe3JldHVybiB0aGlzIGluc3RhbmNlb2Ygb3V0P25ldyBvdXQocGFyYW0pOm91dChwYXJhbSl9O2V4cFtQUk9UT1RZUEVdPW91dFtQUk9UT1RZUEVdfWVsc2UgZXhwPXR5cGUmUFJPVE8mJmlzRnVuY3Rpb24ob3V0KT9jdHgoY2FsbCxvdXQpOm91dDtpZihmcmFtZXdvcmsmJnRhcmdldCYmIW93bil7aWYoaXNHbG9iYWwpdGFyZ2V0W2tleV09b3V0O2Vsc2UgZGVsZXRlIHRhcmdldFtrZXldJiZoaWRkZW4odGFyZ2V0LGtleSxvdXQpfWlmKGV4cG9ydHNba2V5XSE9b3V0KWhpZGRlbihleHBvcnRzLGtleSxleHApfX1pZih0eXBlb2YgbW9kdWxlIT1cInVuZGVmaW5lZFwiJiZtb2R1bGUuZXhwb3J0cyltb2R1bGUuZXhwb3J0cz1jb3JlO2Vsc2UgaWYoaXNGdW5jdGlvbihkZWZpbmUpJiZkZWZpbmUuYW1kKWRlZmluZShmdW5jdGlvbigpe3JldHVybiBjb3JlfSk7ZWxzZSBleHBvcnRHbG9iYWw9dHJ1ZTtpZihleHBvcnRHbG9iYWx8fGZyYW1ld29yayl7Y29yZS5ub0NvbmZsaWN0PWZ1bmN0aW9uKCl7Z2xvYmFsLmNvcmU9b2xkO3JldHVybiBjb3JlfTtnbG9iYWwuY29yZT1jb3JlfVNZTUJPTF9JVEVSQVRPUj1nZXRXZWxsS25vd25TeW1ib2woSVRFUkFUT1IpO3ZhciBJVEVSPXNhZmVTeW1ib2woXCJpdGVyXCIpLEtFWT0xLFZBTFVFPTIsSXRlcmF0b3JzPXt9LEl0ZXJhdG9yUHJvdG90eXBlPXt9LEJVR0dZX0lURVJBVE9SUz1cImtleXNcImluIEFycmF5UHJvdG8mJiEoXCJuZXh0XCJpbltdLmtleXMoKSk7c2V0SXRlcmF0b3IoSXRlcmF0b3JQcm90b3R5cGUscmV0dXJuVGhpcyk7ZnVuY3Rpb24gc2V0SXRlcmF0b3IoTyx2YWx1ZSl7aGlkZGVuKE8sU1lNQk9MX0lURVJBVE9SLHZhbHVlKTtGRl9JVEVSQVRPUiBpbiBBcnJheVByb3RvJiZoaWRkZW4oTyxGRl9JVEVSQVRPUix2YWx1ZSl9ZnVuY3Rpb24gY3JlYXRlSXRlcmF0b3IoQ29uc3RydWN0b3IsTkFNRSxuZXh0LHByb3RvKXtDb25zdHJ1Y3RvcltQUk9UT1RZUEVdPWNyZWF0ZShwcm90b3x8SXRlcmF0b3JQcm90b3R5cGUse25leHQ6ZGVzY3JpcHRvcigxLG5leHQpfSk7c2V0VG9TdHJpbmdUYWcoQ29uc3RydWN0b3IsTkFNRStcIiBJdGVyYXRvclwiKX1mdW5jdGlvbiBkZWZpbmVJdGVyYXRvcihDb25zdHJ1Y3RvcixOQU1FLHZhbHVlLERFRkFVTFQpe3ZhciBwcm90bz1Db25zdHJ1Y3RvcltQUk9UT1RZUEVdLGl0ZXI9Z2V0KHByb3RvLFNZTUJPTF9JVEVSQVRPUil8fGdldChwcm90byxGRl9JVEVSQVRPUil8fERFRkFVTFQmJmdldChwcm90byxERUZBVUxUKXx8dmFsdWU7aWYoZnJhbWV3b3JrKXtzZXRJdGVyYXRvcihwcm90byxpdGVyKTtpZihpdGVyIT09dmFsdWUpe3ZhciBpdGVyUHJvdG89Z2V0UHJvdG90eXBlT2YoaXRlci5jYWxsKG5ldyBDb25zdHJ1Y3RvcikpO3NldFRvU3RyaW5nVGFnKGl0ZXJQcm90byxOQU1FK1wiIEl0ZXJhdG9yXCIsdHJ1ZSk7aGFzKHByb3RvLEZGX0lURVJBVE9SKSYmc2V0SXRlcmF0b3IoaXRlclByb3RvLHJldHVyblRoaXMpfX1JdGVyYXRvcnNbTkFNRV09aXRlcjtJdGVyYXRvcnNbTkFNRStcIiBJdGVyYXRvclwiXT1yZXR1cm5UaGlzO3JldHVybiBpdGVyfWZ1bmN0aW9uIGRlZmluZVN0ZEl0ZXJhdG9ycyhCYXNlLE5BTUUsQ29uc3RydWN0b3IsbmV4dCxERUZBVUxULElTX1NFVCl7ZnVuY3Rpb24gY3JlYXRlSXRlcihraW5kKXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gbmV3IENvbnN0cnVjdG9yKHRoaXMsa2luZCl9fWNyZWF0ZUl0ZXJhdG9yKENvbnN0cnVjdG9yLE5BTUUsbmV4dCk7dmFyIGVudHJpZXM9Y3JlYXRlSXRlcihLRVkrVkFMVUUpLHZhbHVlcz1jcmVhdGVJdGVyKFZBTFVFKTtpZihERUZBVUxUPT1WQUxVRSl2YWx1ZXM9ZGVmaW5lSXRlcmF0b3IoQmFzZSxOQU1FLHZhbHVlcyxcInZhbHVlc1wiKTtlbHNlIGVudHJpZXM9ZGVmaW5lSXRlcmF0b3IoQmFzZSxOQU1FLGVudHJpZXMsXCJlbnRyaWVzXCIpO2lmKERFRkFVTFQpeyRkZWZpbmUoUFJPVE8rRk9SQ0VEKkJVR0dZX0lURVJBVE9SUyxOQU1FLHtlbnRyaWVzOmVudHJpZXMsa2V5czpJU19TRVQ/dmFsdWVzOmNyZWF0ZUl0ZXIoS0VZKSx2YWx1ZXM6dmFsdWVzfSl9fWZ1bmN0aW9uIGl0ZXJSZXN1bHQoZG9uZSx2YWx1ZSl7cmV0dXJue3ZhbHVlOnZhbHVlLGRvbmU6ISFkb25lfX1mdW5jdGlvbiBpc0l0ZXJhYmxlKGl0KXt2YXIgTz1PYmplY3QoaXQpLFN5bWJvbD1nbG9iYWxbU1lNQk9MXSxoYXNFeHQ9KFN5bWJvbCYmU3ltYm9sW0lURVJBVE9SXXx8RkZfSVRFUkFUT1IpaW4gTztyZXR1cm4gaGFzRXh0fHxTWU1CT0xfSVRFUkFUT1IgaW4gT3x8aGFzKEl0ZXJhdG9ycyxjbGFzc29mKE8pKX1mdW5jdGlvbiBnZXRJdGVyYXRvcihpdCl7dmFyIFN5bWJvbD1nbG9iYWxbU1lNQk9MXSxleHQ9aXRbU3ltYm9sJiZTeW1ib2xbSVRFUkFUT1JdfHxGRl9JVEVSQVRPUl0sZ2V0SXRlcj1leHR8fGl0W1NZTUJPTF9JVEVSQVRPUl18fEl0ZXJhdG9yc1tjbGFzc29mKGl0KV07cmV0dXJuIGFzc2VydE9iamVjdChnZXRJdGVyLmNhbGwoaXQpKX1mdW5jdGlvbiBzdGVwQ2FsbChmbix2YWx1ZSxlbnRyaWVzKXtyZXR1cm4gZW50cmllcz9pbnZva2UoZm4sdmFsdWUpOmZuKHZhbHVlKX1mdW5jdGlvbiBjaGVja0Rhbmdlckl0ZXJDbG9zaW5nKGZuKXt2YXIgZGFuZ2VyPXRydWU7dmFyIE89e25leHQ6ZnVuY3Rpb24oKXt0aHJvdyAxfSxcInJldHVyblwiOmZ1bmN0aW9uKCl7ZGFuZ2VyPWZhbHNlfX07T1tTWU1CT0xfSVRFUkFUT1JdPXJldHVyblRoaXM7dHJ5e2ZuKE8pfWNhdGNoKGUpe31yZXR1cm4gZGFuZ2VyfWZ1bmN0aW9uIGNsb3NlSXRlcmF0b3IoaXRlcmF0b3Ipe3ZhciByZXQ9aXRlcmF0b3JbXCJyZXR1cm5cIl07aWYocmV0IT09dW5kZWZpbmVkKXJldC5jYWxsKGl0ZXJhdG9yKX1mdW5jdGlvbiBzYWZlSXRlckNsb3NlKGV4ZWMsaXRlcmF0b3Ipe3RyeXtleGVjKGl0ZXJhdG9yKX1jYXRjaChlKXtjbG9zZUl0ZXJhdG9yKGl0ZXJhdG9yKTt0aHJvdyBlfX1mdW5jdGlvbiBmb3JPZihpdGVyYWJsZSxlbnRyaWVzLGZuLHRoYXQpe3NhZmVJdGVyQ2xvc2UoZnVuY3Rpb24oaXRlcmF0b3Ipe3ZhciBmPWN0eChmbix0aGF0LGVudHJpZXM/MjoxKSxzdGVwO3doaWxlKCEoc3RlcD1pdGVyYXRvci5uZXh0KCkpLmRvbmUpaWYoc3RlcENhbGwoZixzdGVwLnZhbHVlLGVudHJpZXMpPT09ZmFsc2Upe3JldHVybiBjbG9zZUl0ZXJhdG9yKGl0ZXJhdG9yKX19LGdldEl0ZXJhdG9yKGl0ZXJhYmxlKSl9IWZ1bmN0aW9uKFRBRyxTeW1ib2xSZWdpc3RyeSxBbGxTeW1ib2xzLHNldHRlcil7aWYoIWlzTmF0aXZlKFN5bWJvbCkpe1N5bWJvbD1mdW5jdGlvbihkZXNjcmlwdGlvbil7YXNzZXJ0KCEodGhpcyBpbnN0YW5jZW9mIFN5bWJvbCksU1lNQk9MK1wiIGlzIG5vdCBhIFwiK0NPTlNUUlVDVE9SKTt2YXIgdGFnPXVpZChkZXNjcmlwdGlvbiksc3ltPXNldChjcmVhdGUoU3ltYm9sW1BST1RPVFlQRV0pLFRBRyx0YWcpO0FsbFN5bWJvbHNbdGFnXT1zeW07REVTQyYmc2V0dGVyJiZkZWZpbmVQcm9wZXJ0eShPYmplY3RQcm90byx0YWcse2NvbmZpZ3VyYWJsZTp0cnVlLHNldDpmdW5jdGlvbih2YWx1ZSl7aGlkZGVuKHRoaXMsdGFnLHZhbHVlKX19KTtyZXR1cm4gc3ltfTtoaWRkZW4oU3ltYm9sW1BST1RPVFlQRV0sVE9fU1RSSU5HLGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXNbVEFHXX0pfSRkZWZpbmUoR0xPQkFMK1dSQVAse1N5bWJvbDpTeW1ib2x9KTt2YXIgc3ltYm9sU3RhdGljcz17XCJmb3JcIjpmdW5jdGlvbihrZXkpe3JldHVybiBoYXMoU3ltYm9sUmVnaXN0cnksa2V5Kz1cIlwiKT9TeW1ib2xSZWdpc3RyeVtrZXldOlN5bWJvbFJlZ2lzdHJ5W2tleV09U3ltYm9sKGtleSl9LGl0ZXJhdG9yOlNZTUJPTF9JVEVSQVRPUnx8Z2V0V2VsbEtub3duU3ltYm9sKElURVJBVE9SKSxrZXlGb3I6cGFydC5jYWxsKGtleU9mLFN5bWJvbFJlZ2lzdHJ5KSxzcGVjaWVzOlNZTUJPTF9TUEVDSUVTLHRvU3RyaW5nVGFnOlNZTUJPTF9UQUc9Z2V0V2VsbEtub3duU3ltYm9sKFRPX1NUUklOR19UQUcsdHJ1ZSksdW5zY29wYWJsZXM6U1lNQk9MX1VOU0NPUEFCTEVTLHB1cmU6c2FmZVN5bWJvbCxzZXQ6c2V0LHVzZVNldHRlcjpmdW5jdGlvbigpe3NldHRlcj10cnVlfSx1c2VTaW1wbGU6ZnVuY3Rpb24oKXtzZXR0ZXI9ZmFsc2V9fTtmb3JFYWNoLmNhbGwoYXJyYXkoXCJoYXNJbnN0YW5jZSxpc0NvbmNhdFNwcmVhZGFibGUsbWF0Y2gscmVwbGFjZSxzZWFyY2gsc3BsaXQsdG9QcmltaXRpdmVcIiksZnVuY3Rpb24oaXQpe3N5bWJvbFN0YXRpY3NbaXRdPWdldFdlbGxLbm93blN5bWJvbChpdCl9KTskZGVmaW5lKFNUQVRJQyxTWU1CT0wsc3ltYm9sU3RhdGljcyk7c2V0VG9TdHJpbmdUYWcoU3ltYm9sLFNZTUJPTCk7JGRlZmluZShTVEFUSUMrRk9SQ0VEKiFpc05hdGl2ZShTeW1ib2wpLE9CSkVDVCx7Z2V0T3duUHJvcGVydHlOYW1lczpmdW5jdGlvbihpdCl7dmFyIG5hbWVzPWdldE5hbWVzKHRvT2JqZWN0KGl0KSkscmVzdWx0PVtdLGtleSxpPTA7d2hpbGUobmFtZXMubGVuZ3RoPmkpaGFzKEFsbFN5bWJvbHMsa2V5PW5hbWVzW2krK10pfHxyZXN1bHQucHVzaChrZXkpO3JldHVybiByZXN1bHR9LGdldE93blByb3BlcnR5U3ltYm9sczpmdW5jdGlvbihpdCl7dmFyIG5hbWVzPWdldE5hbWVzKHRvT2JqZWN0KGl0KSkscmVzdWx0PVtdLGtleSxpPTA7d2hpbGUobmFtZXMubGVuZ3RoPmkpaGFzKEFsbFN5bWJvbHMsa2V5PW5hbWVzW2krK10pJiZyZXN1bHQucHVzaChBbGxTeW1ib2xzW2tleV0pO3JldHVybiByZXN1bHR9fSk7c2V0VG9TdHJpbmdUYWcoTWF0aCxNQVRILHRydWUpO3NldFRvU3RyaW5nVGFnKGdsb2JhbC5KU09OLFwiSlNPTlwiLHRydWUpfShzYWZlU3ltYm9sKFwidGFnXCIpLHt9LHt9LHRydWUpOyFmdW5jdGlvbigpe3ZhciBvYmplY3RTdGF0aWM9e2Fzc2lnbjphc3NpZ24saXM6ZnVuY3Rpb24oeCx5KXtyZXR1cm4geD09PXk/eCE9PTB8fDEveD09PTEveTp4IT14JiZ5IT15fX07XCJfX3Byb3RvX19cImluIE9iamVjdFByb3RvJiZmdW5jdGlvbihidWdneSxzZXQpe3RyeXtzZXQ9Y3R4KGNhbGwsZ2V0T3duRGVzY3JpcHRvcihPYmplY3RQcm90byxcIl9fcHJvdG9fX1wiKS5zZXQsMik7c2V0KHt9LEFycmF5UHJvdG8pfWNhdGNoKGUpe2J1Z2d5PXRydWV9b2JqZWN0U3RhdGljLnNldFByb3RvdHlwZU9mPXNldFByb3RvdHlwZU9mPXNldFByb3RvdHlwZU9mfHxmdW5jdGlvbihPLHByb3RvKXthc3NlcnRPYmplY3QoTyk7YXNzZXJ0KHByb3RvPT09bnVsbHx8aXNPYmplY3QocHJvdG8pLHByb3RvLFwiOiBjYW4ndCBzZXQgYXMgcHJvdG90eXBlIVwiKTtpZihidWdneSlPLl9fcHJvdG9fXz1wcm90bztlbHNlIHNldChPLHByb3RvKTtyZXR1cm4gT319KCk7JGRlZmluZShTVEFUSUMsT0JKRUNULG9iamVjdFN0YXRpYyl9KCk7IWZ1bmN0aW9uKHRtcCl7dG1wW1NZTUJPTF9UQUddPURPVDtpZihjb2YodG1wKSE9RE9UKWhpZGRlbihPYmplY3RQcm90byxUT19TVFJJTkcsZnVuY3Rpb24oKXtyZXR1cm5cIltvYmplY3QgXCIrY2xhc3NvZih0aGlzKStcIl1cIn0pfSh7fSk7IWZ1bmN0aW9uKCl7ZnVuY3Rpb24gd3JhcE9iamVjdE1ldGhvZChrZXksTU9ERSl7dmFyIGZuPU9iamVjdFtrZXldLGV4cD1jb3JlW09CSkVDVF1ba2V5XSxmPTAsbz17fTtpZighZXhwfHxpc05hdGl2ZShleHApKXtvW2tleV09TU9ERT09MT9mdW5jdGlvbihpdCl7cmV0dXJuIGlzT2JqZWN0KGl0KT9mbihpdCk6aXR9Ok1PREU9PTI/ZnVuY3Rpb24oaXQpe3JldHVybiBpc09iamVjdChpdCk/Zm4oaXQpOnRydWV9Ok1PREU9PTM/ZnVuY3Rpb24oaXQpe3JldHVybiBpc09iamVjdChpdCk/Zm4oaXQpOmZhbHNlfTpNT0RFPT00P2Z1bmN0aW9uKGl0LGtleSl7cmV0dXJuIGZuKHRvT2JqZWN0KGl0KSxrZXkpfTpmdW5jdGlvbihpdCl7cmV0dXJuIGZuKHRvT2JqZWN0KGl0KSl9O3RyeXtmbihET1QpfWNhdGNoKGUpe2Y9MX0kZGVmaW5lKFNUQVRJQytGT1JDRUQqZixPQkpFQ1Qsbyl9fXdyYXBPYmplY3RNZXRob2QoXCJmcmVlemVcIiwxKTt3cmFwT2JqZWN0TWV0aG9kKFwic2VhbFwiLDEpO3dyYXBPYmplY3RNZXRob2QoXCJwcmV2ZW50RXh0ZW5zaW9uc1wiLDEpO3dyYXBPYmplY3RNZXRob2QoXCJpc0Zyb3plblwiLDIpO3dyYXBPYmplY3RNZXRob2QoXCJpc1NlYWxlZFwiLDIpO3dyYXBPYmplY3RNZXRob2QoXCJpc0V4dGVuc2libGVcIiwzKTt3cmFwT2JqZWN0TWV0aG9kKFwiZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yXCIsNCk7d3JhcE9iamVjdE1ldGhvZChcImdldFByb3RvdHlwZU9mXCIpO3dyYXBPYmplY3RNZXRob2QoXCJrZXlzXCIpO3dyYXBPYmplY3RNZXRob2QoXCJnZXRPd25Qcm9wZXJ0eU5hbWVzXCIpfSgpOyFmdW5jdGlvbihOQU1FKXtOQU1FIGluIEZ1bmN0aW9uUHJvdG98fERFU0MmJmRlZmluZVByb3BlcnR5KEZ1bmN0aW9uUHJvdG8sTkFNRSx7Y29uZmlndXJhYmxlOnRydWUsZ2V0OmZ1bmN0aW9uKCl7dmFyIG1hdGNoPVN0cmluZyh0aGlzKS5tYXRjaCgvXlxccypmdW5jdGlvbiAoW14gKF0qKS8pLG5hbWU9bWF0Y2g/bWF0Y2hbMV06XCJcIjtoYXModGhpcyxOQU1FKXx8ZGVmaW5lUHJvcGVydHkodGhpcyxOQU1FLGRlc2NyaXB0b3IoNSxuYW1lKSk7cmV0dXJuIG5hbWV9LHNldDpmdW5jdGlvbih2YWx1ZSl7aGFzKHRoaXMsTkFNRSl8fGRlZmluZVByb3BlcnR5KHRoaXMsTkFNRSxkZXNjcmlwdG9yKDAsdmFsdWUpKX19KX0oXCJuYW1lXCIpO051bWJlcihcIjBvMVwiKSYmTnVtYmVyKFwiMGIxXCIpfHxmdW5jdGlvbihfTnVtYmVyLE51bWJlclByb3RvKXtmdW5jdGlvbiB0b051bWJlcihpdCl7aWYoaXNPYmplY3QoaXQpKWl0PXRvUHJpbWl0aXZlKGl0KTtpZih0eXBlb2YgaXQ9PVwic3RyaW5nXCImJml0Lmxlbmd0aD4yJiZpdC5jaGFyQ29kZUF0KDApPT00OCl7dmFyIGJpbmFyeT1mYWxzZTtzd2l0Y2goaXQuY2hhckNvZGVBdCgxKSl7Y2FzZSA2NjpjYXNlIDk4OmJpbmFyeT10cnVlO2Nhc2UgNzk6Y2FzZSAxMTE6cmV0dXJuIHBhcnNlSW50KGl0LnNsaWNlKDIpLGJpbmFyeT8yOjgpfX1yZXR1cm4raXR9ZnVuY3Rpb24gdG9QcmltaXRpdmUoaXQpe3ZhciBmbix2YWw7aWYoaXNGdW5jdGlvbihmbj1pdC52YWx1ZU9mKSYmIWlzT2JqZWN0KHZhbD1mbi5jYWxsKGl0KSkpcmV0dXJuIHZhbDtpZihpc0Z1bmN0aW9uKGZuPWl0W1RPX1NUUklOR10pJiYhaXNPYmplY3QodmFsPWZuLmNhbGwoaXQpKSlyZXR1cm4gdmFsO3Rocm93IFR5cGVFcnJvcihcIkNhbid0IGNvbnZlcnQgb2JqZWN0IHRvIG51bWJlclwiKX1OdW1iZXI9ZnVuY3Rpb24gTnVtYmVyKGl0KXtyZXR1cm4gdGhpcyBpbnN0YW5jZW9mIE51bWJlcj9uZXcgX051bWJlcih0b051bWJlcihpdCkpOnRvTnVtYmVyKGl0KX07Zm9yRWFjaC5jYWxsKERFU0M/Z2V0TmFtZXMoX051bWJlcik6YXJyYXkoXCJNQVhfVkFMVUUsTUlOX1ZBTFVFLE5hTixORUdBVElWRV9JTkZJTklUWSxQT1NJVElWRV9JTkZJTklUWVwiKSxmdW5jdGlvbihrZXkpe2tleSBpbiBOdW1iZXJ8fGRlZmluZVByb3BlcnR5KE51bWJlcixrZXksZ2V0T3duRGVzY3JpcHRvcihfTnVtYmVyLGtleSkpfSk7TnVtYmVyW1BST1RPVFlQRV09TnVtYmVyUHJvdG87TnVtYmVyUHJvdG9bQ09OU1RSVUNUT1JdPU51bWJlcjtoaWRkZW4oZ2xvYmFsLE5VTUJFUixOdW1iZXIpfShOdW1iZXIsTnVtYmVyW1BST1RPVFlQRV0pOyFmdW5jdGlvbihpc0ludGVnZXIpeyRkZWZpbmUoU1RBVElDLE5VTUJFUix7RVBTSUxPTjpwb3coMiwtNTIpLGlzRmluaXRlOmZ1bmN0aW9uKGl0KXtyZXR1cm4gdHlwZW9mIGl0PT1cIm51bWJlclwiJiZpc0Zpbml0ZShpdCl9LGlzSW50ZWdlcjppc0ludGVnZXIsaXNOYU46c2FtZU5hTixpc1NhZmVJbnRlZ2VyOmZ1bmN0aW9uKG51bWJlcil7cmV0dXJuIGlzSW50ZWdlcihudW1iZXIpJiZhYnMobnVtYmVyKTw9TUFYX1NBRkVfSU5URUdFUn0sTUFYX1NBRkVfSU5URUdFUjpNQVhfU0FGRV9JTlRFR0VSLE1JTl9TQUZFX0lOVEVHRVI6LU1BWF9TQUZFX0lOVEVHRVIscGFyc2VGbG9hdDpwYXJzZUZsb2F0LHBhcnNlSW50OnBhcnNlSW50fSl9KE51bWJlci5pc0ludGVnZXJ8fGZ1bmN0aW9uKGl0KXtyZXR1cm4haXNPYmplY3QoaXQpJiZpc0Zpbml0ZShpdCkmJmZsb29yKGl0KT09PWl0fSk7IWZ1bmN0aW9uKCl7dmFyIEU9TWF0aC5FLGV4cD1NYXRoLmV4cCxsb2c9TWF0aC5sb2csc3FydD1NYXRoLnNxcnQsc2lnbj1NYXRoLnNpZ258fGZ1bmN0aW9uKHgpe3JldHVybih4PSt4KT09MHx8eCE9eD94Ong8MD8tMToxfTtmdW5jdGlvbiBhc2luaCh4KXtyZXR1cm4haXNGaW5pdGUoeD0reCl8fHg9PTA/eDp4PDA/LWFzaW5oKC14KTpsb2coeCtzcXJ0KHgqeCsxKSl9ZnVuY3Rpb24gZXhwbTEoeCl7cmV0dXJuKHg9K3gpPT0wP3g6eD4tMWUtNiYmeDwxZS02P3greCp4LzI6ZXhwKHgpLTF9JGRlZmluZShTVEFUSUMsTUFUSCx7YWNvc2g6ZnVuY3Rpb24oeCl7cmV0dXJuKHg9K3gpPDE/TmFOOmlzRmluaXRlKHgpP2xvZyh4L0Urc3FydCh4KzEpKnNxcnQoeC0xKS9FKSsxOnh9LGFzaW5oOmFzaW5oLGF0YW5oOmZ1bmN0aW9uKHgpe3JldHVybih4PSt4KT09MD94OmxvZygoMSt4KS8oMS14KSkvMn0sY2JydDpmdW5jdGlvbih4KXtyZXR1cm4gc2lnbih4PSt4KSpwb3coYWJzKHgpLDEvMyl9LGNsejMyOmZ1bmN0aW9uKHgpe3JldHVybih4Pj4+PTApPzMyLXhbVE9fU1RSSU5HXSgyKS5sZW5ndGg6MzJ9LGNvc2g6ZnVuY3Rpb24oeCl7cmV0dXJuKGV4cCh4PSt4KStleHAoLXgpKS8yfSxleHBtMTpleHBtMSxmcm91bmQ6ZnVuY3Rpb24oeCl7cmV0dXJuIG5ldyBGbG9hdDMyQXJyYXkoW3hdKVswXX0saHlwb3Q6ZnVuY3Rpb24odmFsdWUxLHZhbHVlMil7dmFyIHN1bT0wLGxlbjE9YXJndW1lbnRzLmxlbmd0aCxsZW4yPWxlbjEsYXJncz1BcnJheShsZW4xKSxsYXJnPS1JbmZpbml0eSxhcmc7d2hpbGUobGVuMS0tKXthcmc9YXJnc1tsZW4xXT0rYXJndW1lbnRzW2xlbjFdO2lmKGFyZz09SW5maW5pdHl8fGFyZz09LUluZmluaXR5KXJldHVybiBJbmZpbml0eTtpZihhcmc+bGFyZylsYXJnPWFyZ31sYXJnPWFyZ3x8MTt3aGlsZShsZW4yLS0pc3VtKz1wb3coYXJnc1tsZW4yXS9sYXJnLDIpO3JldHVybiBsYXJnKnNxcnQoc3VtKX0saW11bDpmdW5jdGlvbih4LHkpe3ZhciBVSW50MTY9NjU1MzUseG49K3gseW49K3kseGw9VUludDE2JnhuLHlsPVVJbnQxNiZ5bjtyZXR1cm4gMHx4bCp5bCsoKFVJbnQxNiZ4bj4+PjE2KSp5bCt4bCooVUludDE2JnluPj4+MTYpPDwxNj4+PjApfSxsb2cxcDpmdW5jdGlvbih4KXtyZXR1cm4oeD0reCk+LTFlLTgmJng8MWUtOD94LXgqeC8yOmxvZygxK3gpfSxsb2cxMDpmdW5jdGlvbih4KXtyZXR1cm4gbG9nKHgpL01hdGguTE4xMH0sbG9nMjpmdW5jdGlvbih4KXtyZXR1cm4gbG9nKHgpL01hdGguTE4yfSxzaWduOnNpZ24sc2luaDpmdW5jdGlvbih4KXtyZXR1cm4gYWJzKHg9K3gpPDE/KGV4cG0xKHgpLWV4cG0xKC14KSkvMjooZXhwKHgtMSktZXhwKC14LTEpKSooRS8yKX0sdGFuaDpmdW5jdGlvbih4KXt2YXIgYT1leHBtMSh4PSt4KSxiPWV4cG0xKC14KTtyZXR1cm4gYT09SW5maW5pdHk/MTpiPT1JbmZpbml0eT8tMTooYS1iKS8oZXhwKHgpK2V4cCgteCkpfSx0cnVuYzp0cnVuY30pfSgpOyFmdW5jdGlvbihmcm9tQ2hhckNvZGUpe2Z1bmN0aW9uIGFzc2VydE5vdFJlZ0V4cChpdCl7aWYoY29mKGl0KT09UkVHRVhQKXRocm93IFR5cGVFcnJvcigpfSRkZWZpbmUoU1RBVElDLFNUUklORyx7ZnJvbUNvZGVQb2ludDpmdW5jdGlvbih4KXt2YXIgcmVzPVtdLGxlbj1hcmd1bWVudHMubGVuZ3RoLGk9MCxjb2RlO3doaWxlKGxlbj5pKXtjb2RlPSthcmd1bWVudHNbaSsrXTtpZih0b0luZGV4KGNvZGUsMTExNDExMSkhPT1jb2RlKXRocm93IFJhbmdlRXJyb3IoY29kZStcIiBpcyBub3QgYSB2YWxpZCBjb2RlIHBvaW50XCIpO3Jlcy5wdXNoKGNvZGU8NjU1MzY/ZnJvbUNoYXJDb2RlKGNvZGUpOmZyb21DaGFyQ29kZSgoKGNvZGUtPTY1NTM2KT4+MTApKzU1Mjk2LGNvZGUlMTAyNCs1NjMyMCkpfXJldHVybiByZXMuam9pbihcIlwiKX0scmF3OmZ1bmN0aW9uKGNhbGxTaXRlKXt2YXIgcmF3PXRvT2JqZWN0KGNhbGxTaXRlLnJhdyksbGVuPXRvTGVuZ3RoKHJhdy5sZW5ndGgpLHNsbj1hcmd1bWVudHMubGVuZ3RoLHJlcz1bXSxpPTA7d2hpbGUobGVuPmkpe3Jlcy5wdXNoKFN0cmluZyhyYXdbaSsrXSkpO2lmKGk8c2xuKXJlcy5wdXNoKFN0cmluZyhhcmd1bWVudHNbaV0pKX1yZXR1cm4gcmVzLmpvaW4oXCJcIil9fSk7JGRlZmluZShQUk9UTyxTVFJJTkcse2NvZGVQb2ludEF0OmNyZWF0ZVBvaW50QXQoZmFsc2UpLGVuZHNXaXRoOmZ1bmN0aW9uKHNlYXJjaFN0cmluZyl7YXNzZXJ0Tm90UmVnRXhwKHNlYXJjaFN0cmluZyk7dmFyIHRoYXQ9U3RyaW5nKGFzc2VydERlZmluZWQodGhpcykpLGVuZFBvc2l0aW9uPWFyZ3VtZW50c1sxXSxsZW49dG9MZW5ndGgodGhhdC5sZW5ndGgpLGVuZD1lbmRQb3NpdGlvbj09PXVuZGVmaW5lZD9sZW46bWluKHRvTGVuZ3RoKGVuZFBvc2l0aW9uKSxsZW4pO3NlYXJjaFN0cmluZys9XCJcIjtyZXR1cm4gdGhhdC5zbGljZShlbmQtc2VhcmNoU3RyaW5nLmxlbmd0aCxlbmQpPT09c2VhcmNoU3RyaW5nfSxpbmNsdWRlczpmdW5jdGlvbihzZWFyY2hTdHJpbmcpe2Fzc2VydE5vdFJlZ0V4cChzZWFyY2hTdHJpbmcpO3JldHVybiEhflN0cmluZyhhc3NlcnREZWZpbmVkKHRoaXMpKS5pbmRleE9mKHNlYXJjaFN0cmluZyxhcmd1bWVudHNbMV0pfSxyZXBlYXQ6ZnVuY3Rpb24oY291bnQpe3ZhciBzdHI9U3RyaW5nKGFzc2VydERlZmluZWQodGhpcykpLHJlcz1cIlwiLG49dG9JbnRlZ2VyKGNvdW50KTtpZigwPm58fG49PUluZmluaXR5KXRocm93IFJhbmdlRXJyb3IoXCJDb3VudCBjYW4ndCBiZSBuZWdhdGl2ZVwiKTtmb3IoO24+MDsobj4+Pj0xKSYmKHN0cis9c3RyKSlpZihuJjEpcmVzKz1zdHI7cmV0dXJuIHJlc30sc3RhcnRzV2l0aDpmdW5jdGlvbihzZWFyY2hTdHJpbmcpe2Fzc2VydE5vdFJlZ0V4cChzZWFyY2hTdHJpbmcpO3ZhciB0aGF0PVN0cmluZyhhc3NlcnREZWZpbmVkKHRoaXMpKSxpbmRleD10b0xlbmd0aChtaW4oYXJndW1lbnRzWzFdLHRoYXQubGVuZ3RoKSk7c2VhcmNoU3RyaW5nKz1cIlwiO3JldHVybiB0aGF0LnNsaWNlKGluZGV4LGluZGV4K3NlYXJjaFN0cmluZy5sZW5ndGgpPT09c2VhcmNoU3RyaW5nfX0pfShTdHJpbmcuZnJvbUNoYXJDb2RlKTshZnVuY3Rpb24oKXskZGVmaW5lKFNUQVRJQytGT1JDRUQqY2hlY2tEYW5nZXJJdGVyQ2xvc2luZyhBcnJheS5mcm9tKSxBUlJBWSx7ZnJvbTpmdW5jdGlvbihhcnJheUxpa2Upe3ZhciBPPU9iamVjdChhc3NlcnREZWZpbmVkKGFycmF5TGlrZSkpLG1hcGZuPWFyZ3VtZW50c1sxXSxtYXBwaW5nPW1hcGZuIT09dW5kZWZpbmVkLGY9bWFwcGluZz9jdHgobWFwZm4sYXJndW1lbnRzWzJdLDIpOnVuZGVmaW5lZCxpbmRleD0wLGxlbmd0aCxyZXN1bHQsc3RlcDtpZihpc0l0ZXJhYmxlKE8pKXtyZXN1bHQ9bmV3KGdlbmVyaWModGhpcyxBcnJheSkpO3NhZmVJdGVyQ2xvc2UoZnVuY3Rpb24oaXRlcmF0b3Ipe2Zvcig7IShzdGVwPWl0ZXJhdG9yLm5leHQoKSkuZG9uZTtpbmRleCsrKXtyZXN1bHRbaW5kZXhdPW1hcHBpbmc/ZihzdGVwLnZhbHVlLGluZGV4KTpzdGVwLnZhbHVlfX0sZ2V0SXRlcmF0b3IoTykpfWVsc2V7cmVzdWx0PW5ldyhnZW5lcmljKHRoaXMsQXJyYXkpKShsZW5ndGg9dG9MZW5ndGgoTy5sZW5ndGgpKTtmb3IoO2xlbmd0aD5pbmRleDtpbmRleCsrKXtyZXN1bHRbaW5kZXhdPW1hcHBpbmc/ZihPW2luZGV4XSxpbmRleCk6T1tpbmRleF19fXJlc3VsdC5sZW5ndGg9aW5kZXg7cmV0dXJuIHJlc3VsdH19KTskZGVmaW5lKFNUQVRJQyxBUlJBWSx7b2Y6ZnVuY3Rpb24oKXt2YXIgaW5kZXg9MCxsZW5ndGg9YXJndW1lbnRzLmxlbmd0aCxyZXN1bHQ9bmV3KGdlbmVyaWModGhpcyxBcnJheSkpKGxlbmd0aCk7d2hpbGUobGVuZ3RoPmluZGV4KXJlc3VsdFtpbmRleF09YXJndW1lbnRzW2luZGV4KytdO3Jlc3VsdC5sZW5ndGg9bGVuZ3RoO3JldHVybiByZXN1bHR9fSk7c2V0U3BlY2llcyhBcnJheSl9KCk7IWZ1bmN0aW9uKCl7JGRlZmluZShQUk9UTyxBUlJBWSx7Y29weVdpdGhpbjpmdW5jdGlvbih0YXJnZXQsc3RhcnQpe3ZhciBPPU9iamVjdChhc3NlcnREZWZpbmVkKHRoaXMpKSxsZW49dG9MZW5ndGgoTy5sZW5ndGgpLHRvPXRvSW5kZXgodGFyZ2V0LGxlbiksZnJvbT10b0luZGV4KHN0YXJ0LGxlbiksZW5kPWFyZ3VtZW50c1syXSxmaW49ZW5kPT09dW5kZWZpbmVkP2xlbjp0b0luZGV4KGVuZCxsZW4pLGNvdW50PW1pbihmaW4tZnJvbSxsZW4tdG8pLGluYz0xO2lmKGZyb208dG8mJnRvPGZyb20rY291bnQpe2luYz0tMTtmcm9tPWZyb20rY291bnQtMTt0bz10bytjb3VudC0xfXdoaWxlKGNvdW50LS0+MCl7aWYoZnJvbSBpbiBPKU9bdG9dPU9bZnJvbV07ZWxzZSBkZWxldGUgT1t0b107dG8rPWluYztmcm9tKz1pbmN9cmV0dXJuIE99LGZpbGw6ZnVuY3Rpb24odmFsdWUpe3ZhciBPPU9iamVjdChhc3NlcnREZWZpbmVkKHRoaXMpKSxsZW5ndGg9dG9MZW5ndGgoTy5sZW5ndGgpLGluZGV4PXRvSW5kZXgoYXJndW1lbnRzWzFdLGxlbmd0aCksZW5kPWFyZ3VtZW50c1syXSxlbmRQb3M9ZW5kPT09dW5kZWZpbmVkP2xlbmd0aDp0b0luZGV4KGVuZCxsZW5ndGgpO3doaWxlKGVuZFBvcz5pbmRleClPW2luZGV4KytdPXZhbHVlO3JldHVybiBPfSxmaW5kOmNyZWF0ZUFycmF5TWV0aG9kKDUpLGZpbmRJbmRleDpjcmVhdGVBcnJheU1ldGhvZCg2KX0pO2lmKGZyYW1ld29yayl7Zm9yRWFjaC5jYWxsKGFycmF5KFwiZmluZCxmaW5kSW5kZXgsZmlsbCxjb3B5V2l0aGluLGVudHJpZXMsa2V5cyx2YWx1ZXNcIiksZnVuY3Rpb24oaXQpe0FycmF5VW5zY29wYWJsZXNbaXRdPXRydWV9KTtTWU1CT0xfVU5TQ09QQUJMRVMgaW4gQXJyYXlQcm90b3x8aGlkZGVuKEFycmF5UHJvdG8sU1lNQk9MX1VOU0NPUEFCTEVTLEFycmF5VW5zY29wYWJsZXMpfX0oKTshZnVuY3Rpb24oYXQpe2RlZmluZVN0ZEl0ZXJhdG9ycyhBcnJheSxBUlJBWSxmdW5jdGlvbihpdGVyYXRlZCxraW5kKXtzZXQodGhpcyxJVEVSLHtvOnRvT2JqZWN0KGl0ZXJhdGVkKSxpOjAsazpraW5kfSl9LGZ1bmN0aW9uKCl7dmFyIGl0ZXI9dGhpc1tJVEVSXSxPPWl0ZXIubyxraW5kPWl0ZXIuayxpbmRleD1pdGVyLmkrKztpZighT3x8aW5kZXg+PU8ubGVuZ3RoKXtpdGVyLm89dW5kZWZpbmVkO3JldHVybiBpdGVyUmVzdWx0KDEpfWlmKGtpbmQ9PUtFWSlyZXR1cm4gaXRlclJlc3VsdCgwLGluZGV4KTtpZihraW5kPT1WQUxVRSlyZXR1cm4gaXRlclJlc3VsdCgwLE9baW5kZXhdKTtyZXR1cm4gaXRlclJlc3VsdCgwLFtpbmRleCxPW2luZGV4XV0pfSxWQUxVRSk7SXRlcmF0b3JzW0FSR1VNRU5UU109SXRlcmF0b3JzW0FSUkFZXTtkZWZpbmVTdGRJdGVyYXRvcnMoU3RyaW5nLFNUUklORyxmdW5jdGlvbihpdGVyYXRlZCl7c2V0KHRoaXMsSVRFUix7bzpTdHJpbmcoaXRlcmF0ZWQpLGk6MH0pfSxmdW5jdGlvbigpe3ZhciBpdGVyPXRoaXNbSVRFUl0sTz1pdGVyLm8saW5kZXg9aXRlci5pLHBvaW50O2lmKGluZGV4Pj1PLmxlbmd0aClyZXR1cm4gaXRlclJlc3VsdCgxKTtwb2ludD1hdC5jYWxsKE8saW5kZXgpO2l0ZXIuaSs9cG9pbnQubGVuZ3RoO3JldHVybiBpdGVyUmVzdWx0KDAscG9pbnQpfSl9KGNyZWF0ZVBvaW50QXQodHJ1ZSkpO0RFU0MmJiFmdW5jdGlvbihSZWdFeHBQcm90byxfUmVnRXhwKXtpZighZnVuY3Rpb24oKXt0cnl7cmV0dXJuIFJlZ0V4cCgvYS9nLFwiaVwiKT09XCIvYS9pXCJ9Y2F0Y2goZSl7fX0oKSl7UmVnRXhwPWZ1bmN0aW9uIFJlZ0V4cChwYXR0ZXJuLGZsYWdzKXtyZXR1cm4gbmV3IF9SZWdFeHAoY29mKHBhdHRlcm4pPT1SRUdFWFAmJmZsYWdzIT09dW5kZWZpbmVkP3BhdHRlcm4uc291cmNlOnBhdHRlcm4sZmxhZ3MpfTtmb3JFYWNoLmNhbGwoZ2V0TmFtZXMoX1JlZ0V4cCksZnVuY3Rpb24oa2V5KXtrZXkgaW4gUmVnRXhwfHxkZWZpbmVQcm9wZXJ0eShSZWdFeHAsa2V5LHtjb25maWd1cmFibGU6dHJ1ZSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gX1JlZ0V4cFtrZXldfSxzZXQ6ZnVuY3Rpb24oaXQpe19SZWdFeHBba2V5XT1pdH19KX0pO1JlZ0V4cFByb3RvW0NPTlNUUlVDVE9SXT1SZWdFeHA7UmVnRXhwW1BST1RPVFlQRV09UmVnRXhwUHJvdG87aGlkZGVuKGdsb2JhbCxSRUdFWFAsUmVnRXhwKX1pZigvLi9nLmZsYWdzIT1cImdcIilkZWZpbmVQcm9wZXJ0eShSZWdFeHBQcm90byxcImZsYWdzXCIse2NvbmZpZ3VyYWJsZTp0cnVlLGdldDpjcmVhdGVSZXBsYWNlcigvXi4qXFwvKFxcdyopJC8sXCIkMVwiKX0pO3NldFNwZWNpZXMoUmVnRXhwKX0oUmVnRXhwW1BST1RPVFlQRV0sUmVnRXhwKTtpc0Z1bmN0aW9uKHNldEltbWVkaWF0ZSkmJmlzRnVuY3Rpb24oY2xlYXJJbW1lZGlhdGUpfHxmdW5jdGlvbihPTlJFQURZU1RBVEVDSEFOR0Upe3ZhciBwb3N0TWVzc2FnZT1nbG9iYWwucG9zdE1lc3NhZ2UsYWRkRXZlbnRMaXN0ZW5lcj1nbG9iYWwuYWRkRXZlbnRMaXN0ZW5lcixNZXNzYWdlQ2hhbm5lbD1nbG9iYWwuTWVzc2FnZUNoYW5uZWwsY291bnRlcj0wLHF1ZXVlPXt9LGRlZmVyLGNoYW5uZWwscG9ydDtzZXRJbW1lZGlhdGU9ZnVuY3Rpb24oZm4pe3ZhciBhcmdzPVtdLGk9MTt3aGlsZShhcmd1bWVudHMubGVuZ3RoPmkpYXJncy5wdXNoKGFyZ3VtZW50c1tpKytdKTtxdWV1ZVsrK2NvdW50ZXJdPWZ1bmN0aW9uKCl7aW52b2tlKGlzRnVuY3Rpb24oZm4pP2ZuOkZ1bmN0aW9uKGZuKSxhcmdzKX07ZGVmZXIoY291bnRlcik7cmV0dXJuIGNvdW50ZXJ9O2NsZWFySW1tZWRpYXRlPWZ1bmN0aW9uKGlkKXtkZWxldGUgcXVldWVbaWRdfTtmdW5jdGlvbiBydW4oaWQpe2lmKGhhcyhxdWV1ZSxpZCkpe3ZhciBmbj1xdWV1ZVtpZF07ZGVsZXRlIHF1ZXVlW2lkXTtmbigpfX1mdW5jdGlvbiBsaXN0bmVyKGV2ZW50KXtydW4oZXZlbnQuZGF0YSl9aWYoTk9ERSl7ZGVmZXI9ZnVuY3Rpb24oaWQpe25leHRUaWNrKHBhcnQuY2FsbChydW4saWQpKX19ZWxzZSBpZihhZGRFdmVudExpc3RlbmVyJiZpc0Z1bmN0aW9uKHBvc3RNZXNzYWdlKSYmIWdsb2JhbC5pbXBvcnRTY3JpcHRzKXtkZWZlcj1mdW5jdGlvbihpZCl7cG9zdE1lc3NhZ2UoaWQsXCIqXCIpfTthZGRFdmVudExpc3RlbmVyKFwibWVzc2FnZVwiLGxpc3RuZXIsZmFsc2UpfWVsc2UgaWYoaXNGdW5jdGlvbihNZXNzYWdlQ2hhbm5lbCkpe2NoYW5uZWw9bmV3IE1lc3NhZ2VDaGFubmVsO3BvcnQ9Y2hhbm5lbC5wb3J0MjtjaGFubmVsLnBvcnQxLm9ubWVzc2FnZT1saXN0bmVyO2RlZmVyPWN0eChwb3J0LnBvc3RNZXNzYWdlLHBvcnQsMSl9ZWxzZSBpZihkb2N1bWVudCYmT05SRUFEWVNUQVRFQ0hBTkdFIGluIGRvY3VtZW50W0NSRUFURV9FTEVNRU5UXShcInNjcmlwdFwiKSl7ZGVmZXI9ZnVuY3Rpb24oaWQpe2h0bWwuYXBwZW5kQ2hpbGQoZG9jdW1lbnRbQ1JFQVRFX0VMRU1FTlRdKFwic2NyaXB0XCIpKVtPTlJFQURZU1RBVEVDSEFOR0VdPWZ1bmN0aW9uKCl7aHRtbC5yZW1vdmVDaGlsZCh0aGlzKTtydW4oaWQpfX19ZWxzZXtkZWZlcj1mdW5jdGlvbihpZCl7c2V0VGltZW91dChydW4sMCxpZCl9fX0oXCJvbnJlYWR5c3RhdGVjaGFuZ2VcIik7JGRlZmluZShHTE9CQUwrQklORCx7c2V0SW1tZWRpYXRlOnNldEltbWVkaWF0ZSxjbGVhckltbWVkaWF0ZTpjbGVhckltbWVkaWF0ZX0pOyFmdW5jdGlvbihQcm9taXNlLHRlc3Qpe2lzRnVuY3Rpb24oUHJvbWlzZSkmJmlzRnVuY3Rpb24oUHJvbWlzZS5yZXNvbHZlKSYmUHJvbWlzZS5yZXNvbHZlKHRlc3Q9bmV3IFByb21pc2UoZnVuY3Rpb24oKXt9KSk9PXRlc3R8fGZ1bmN0aW9uKGFzYXAsUkVDT1JEKXtmdW5jdGlvbiBpc1RoZW5hYmxlKGl0KXt2YXIgdGhlbjtpZihpc09iamVjdChpdCkpdGhlbj1pdC50aGVuO3JldHVybiBpc0Z1bmN0aW9uKHRoZW4pP3RoZW46ZmFsc2V9ZnVuY3Rpb24gaGFuZGxlZFJlamVjdGlvbk9ySGFzT25SZWplY3RlZChwcm9taXNlKXt2YXIgcmVjb3JkPXByb21pc2VbUkVDT1JEXSxjaGFpbj1yZWNvcmQuYyxpPTAscmVhY3Q7aWYocmVjb3JkLmgpcmV0dXJuIHRydWU7d2hpbGUoY2hhaW4ubGVuZ3RoPmkpe3JlYWN0PWNoYWluW2krK107aWYocmVhY3QuZmFpbHx8aGFuZGxlZFJlamVjdGlvbk9ySGFzT25SZWplY3RlZChyZWFjdC5QKSlyZXR1cm4gdHJ1ZX19ZnVuY3Rpb24gbm90aWZ5KHJlY29yZCxyZWplY3Qpe3ZhciBjaGFpbj1yZWNvcmQuYztpZihyZWplY3R8fGNoYWluLmxlbmd0aClhc2FwKGZ1bmN0aW9uKCl7dmFyIHByb21pc2U9cmVjb3JkLnAsdmFsdWU9cmVjb3JkLnYsb2s9cmVjb3JkLnM9PTEsaT0wO2lmKHJlamVjdCYmIWhhbmRsZWRSZWplY3Rpb25Pckhhc09uUmVqZWN0ZWQocHJvbWlzZSkpe3NldFRpbWVvdXQoZnVuY3Rpb24oKXtpZighaGFuZGxlZFJlamVjdGlvbk9ySGFzT25SZWplY3RlZChwcm9taXNlKSl7aWYoTk9ERSl7aWYoIXByb2Nlc3MuZW1pdChcInVuaGFuZGxlZFJlamVjdGlvblwiLHZhbHVlLHByb21pc2UpKXt9fWVsc2UgaWYoaXNGdW5jdGlvbihjb25zb2xlLmVycm9yKSl7Y29uc29sZS5lcnJvcihcIlVuaGFuZGxlZCBwcm9taXNlIHJlamVjdGlvblwiLHZhbHVlKX19fSwxZTMpfWVsc2Ugd2hpbGUoY2hhaW4ubGVuZ3RoPmkpIWZ1bmN0aW9uKHJlYWN0KXt2YXIgY2I9b2s/cmVhY3Qub2s6cmVhY3QuZmFpbCxyZXQsdGhlbjt0cnl7aWYoY2Ipe2lmKCFvaylyZWNvcmQuaD10cnVlO3JldD1jYj09PXRydWU/dmFsdWU6Y2IodmFsdWUpO2lmKHJldD09PXJlYWN0LlApe3JlYWN0LnJlaihUeXBlRXJyb3IoUFJPTUlTRStcIi1jaGFpbiBjeWNsZVwiKSl9ZWxzZSBpZih0aGVuPWlzVGhlbmFibGUocmV0KSl7dGhlbi5jYWxsKHJldCxyZWFjdC5yZXMscmVhY3QucmVqKX1lbHNlIHJlYWN0LnJlcyhyZXQpfWVsc2UgcmVhY3QucmVqKHZhbHVlKX1jYXRjaChlcnIpe3JlYWN0LnJlaihlcnIpfX0oY2hhaW5baSsrXSk7Y2hhaW4ubGVuZ3RoPTB9KX1mdW5jdGlvbiByZXNvbHZlKHZhbHVlKXt2YXIgcmVjb3JkPXRoaXMsdGhlbix3cmFwcGVyO2lmKHJlY29yZC5kKXJldHVybjtyZWNvcmQuZD10cnVlO3JlY29yZD1yZWNvcmQucnx8cmVjb3JkO3RyeXtpZih0aGVuPWlzVGhlbmFibGUodmFsdWUpKXt3cmFwcGVyPXtyOnJlY29yZCxkOmZhbHNlfTt0aGVuLmNhbGwodmFsdWUsY3R4KHJlc29sdmUsd3JhcHBlciwxKSxjdHgocmVqZWN0LHdyYXBwZXIsMSkpfWVsc2V7cmVjb3JkLnY9dmFsdWU7cmVjb3JkLnM9MTtub3RpZnkocmVjb3JkKX19Y2F0Y2goZXJyKXtyZWplY3QuY2FsbCh3cmFwcGVyfHx7cjpyZWNvcmQsZDpmYWxzZX0sZXJyKX19ZnVuY3Rpb24gcmVqZWN0KHZhbHVlKXt2YXIgcmVjb3JkPXRoaXM7aWYocmVjb3JkLmQpcmV0dXJuO3JlY29yZC5kPXRydWU7cmVjb3JkPXJlY29yZC5yfHxyZWNvcmQ7cmVjb3JkLnY9dmFsdWU7cmVjb3JkLnM9Mjtub3RpZnkocmVjb3JkLHRydWUpfWZ1bmN0aW9uIGdldENvbnN0cnVjdG9yKEMpe3ZhciBTPWFzc2VydE9iamVjdChDKVtTWU1CT0xfU1BFQ0lFU107cmV0dXJuIFMhPXVuZGVmaW5lZD9TOkN9UHJvbWlzZT1mdW5jdGlvbihleGVjdXRvcil7YXNzZXJ0RnVuY3Rpb24oZXhlY3V0b3IpO2Fzc2VydEluc3RhbmNlKHRoaXMsUHJvbWlzZSxQUk9NSVNFKTt2YXIgcmVjb3JkPXtwOnRoaXMsYzpbXSxzOjAsZDpmYWxzZSx2OnVuZGVmaW5lZCxoOmZhbHNlfTtoaWRkZW4odGhpcyxSRUNPUkQscmVjb3JkKTt0cnl7ZXhlY3V0b3IoY3R4KHJlc29sdmUscmVjb3JkLDEpLGN0eChyZWplY3QscmVjb3JkLDEpKX1jYXRjaChlcnIpe3JlamVjdC5jYWxsKHJlY29yZCxlcnIpfX07YXNzaWduSGlkZGVuKFByb21pc2VbUFJPVE9UWVBFXSx7dGhlbjpmdW5jdGlvbihvbkZ1bGZpbGxlZCxvblJlamVjdGVkKXt2YXIgUz1hc3NlcnRPYmplY3QoYXNzZXJ0T2JqZWN0KHRoaXMpW0NPTlNUUlVDVE9SXSlbU1lNQk9MX1NQRUNJRVNdO3ZhciByZWFjdD17b2s6aXNGdW5jdGlvbihvbkZ1bGZpbGxlZCk/b25GdWxmaWxsZWQ6dHJ1ZSxmYWlsOmlzRnVuY3Rpb24ob25SZWplY3RlZCk/b25SZWplY3RlZDpmYWxzZX0sUD1yZWFjdC5QPW5ldyhTIT11bmRlZmluZWQ/UzpQcm9taXNlKShmdW5jdGlvbihyZXNvbHZlLHJlamVjdCl7cmVhY3QucmVzPWFzc2VydEZ1bmN0aW9uKHJlc29sdmUpO3JlYWN0LnJlaj1hc3NlcnRGdW5jdGlvbihyZWplY3QpfSkscmVjb3JkPXRoaXNbUkVDT1JEXTtyZWNvcmQuYy5wdXNoKHJlYWN0KTtyZWNvcmQucyYmbm90aWZ5KHJlY29yZCk7cmV0dXJuIFB9LFwiY2F0Y2hcIjpmdW5jdGlvbihvblJlamVjdGVkKXtyZXR1cm4gdGhpcy50aGVuKHVuZGVmaW5lZCxvblJlamVjdGVkKX19KTthc3NpZ25IaWRkZW4oUHJvbWlzZSx7YWxsOmZ1bmN0aW9uKGl0ZXJhYmxlKXt2YXIgUHJvbWlzZT1nZXRDb25zdHJ1Y3Rvcih0aGlzKSx2YWx1ZXM9W107cmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUscmVqZWN0KXtmb3JPZihpdGVyYWJsZSxmYWxzZSxwdXNoLHZhbHVlcyk7dmFyIHJlbWFpbmluZz12YWx1ZXMubGVuZ3RoLHJlc3VsdHM9QXJyYXkocmVtYWluaW5nKTtpZihyZW1haW5pbmcpZm9yRWFjaC5jYWxsKHZhbHVlcyxmdW5jdGlvbihwcm9taXNlLGluZGV4KXtQcm9taXNlLnJlc29sdmUocHJvbWlzZSkudGhlbihmdW5jdGlvbih2YWx1ZSl7cmVzdWx0c1tpbmRleF09dmFsdWU7LS1yZW1haW5pbmd8fHJlc29sdmUocmVzdWx0cyl9LHJlamVjdCl9KTtlbHNlIHJlc29sdmUocmVzdWx0cyl9KX0scmFjZTpmdW5jdGlvbihpdGVyYWJsZSl7dmFyIFByb21pc2U9Z2V0Q29uc3RydWN0b3IodGhpcyk7cmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUscmVqZWN0KXtmb3JPZihpdGVyYWJsZSxmYWxzZSxmdW5jdGlvbihwcm9taXNlKXtQcm9taXNlLnJlc29sdmUocHJvbWlzZSkudGhlbihyZXNvbHZlLHJlamVjdCl9KX0pfSxyZWplY3Q6ZnVuY3Rpb24ocil7cmV0dXJuIG5ldyhnZXRDb25zdHJ1Y3Rvcih0aGlzKSkoZnVuY3Rpb24ocmVzb2x2ZSxyZWplY3Qpe3JlamVjdChyKX0pfSxyZXNvbHZlOmZ1bmN0aW9uKHgpe3JldHVybiBpc09iamVjdCh4KSYmUkVDT1JEIGluIHgmJmdldFByb3RvdHlwZU9mKHgpPT09dGhpc1tQUk9UT1RZUEVdP3g6bmV3KGdldENvbnN0cnVjdG9yKHRoaXMpKShmdW5jdGlvbihyZXNvbHZlLHJlamVjdCl7cmVzb2x2ZSh4KX0pfX0pfShuZXh0VGlja3x8c2V0SW1tZWRpYXRlLHNhZmVTeW1ib2woXCJyZWNvcmRcIikpO3NldFRvU3RyaW5nVGFnKFByb21pc2UsUFJPTUlTRSk7c2V0U3BlY2llcyhQcm9taXNlKTskZGVmaW5lKEdMT0JBTCtGT1JDRUQqIWlzTmF0aXZlKFByb21pc2UpLHtQcm9taXNlOlByb21pc2V9KX0oZ2xvYmFsW1BST01JU0VdKTshZnVuY3Rpb24oKXt2YXIgVUlEPXNhZmVTeW1ib2woXCJ1aWRcIiksTzE9c2FmZVN5bWJvbChcIk8xXCIpLFdFQUs9c2FmZVN5bWJvbChcIndlYWtcIiksTEVBSz1zYWZlU3ltYm9sKFwibGVha1wiKSxMQVNUPXNhZmVTeW1ib2woXCJsYXN0XCIpLEZJUlNUPXNhZmVTeW1ib2woXCJmaXJzdFwiKSxTSVpFPURFU0M/c2FmZVN5bWJvbChcInNpemVcIik6XCJzaXplXCIsdWlkPTAsdG1wPXt9O2Z1bmN0aW9uIGdldENvbGxlY3Rpb24oQyxOQU1FLG1ldGhvZHMsY29tbW9uTWV0aG9kcyxpc01hcCxpc1dlYWspe3ZhciBBRERFUj1pc01hcD9cInNldFwiOlwiYWRkXCIscHJvdG89QyYmQ1tQUk9UT1RZUEVdLE89e307ZnVuY3Rpb24gaW5pdEZyb21JdGVyYWJsZSh0aGF0LGl0ZXJhYmxlKXtpZihpdGVyYWJsZSE9dW5kZWZpbmVkKWZvck9mKGl0ZXJhYmxlLGlzTWFwLHRoYXRbQURERVJdLHRoYXQpO3JldHVybiB0aGF0fWZ1bmN0aW9uIGZpeFNWWihrZXksY2hhaW4pe3ZhciBtZXRob2Q9cHJvdG9ba2V5XTtpZihmcmFtZXdvcmspcHJvdG9ba2V5XT1mdW5jdGlvbihhLGIpe3ZhciByZXN1bHQ9bWV0aG9kLmNhbGwodGhpcyxhPT09MD8wOmEsYik7cmV0dXJuIGNoYWluP3RoaXM6cmVzdWx0fX1pZighaXNOYXRpdmUoQyl8fCEoaXNXZWFrfHwhQlVHR1lfSVRFUkFUT1JTJiZoYXMocHJvdG8sRk9SX0VBQ0gpJiZoYXMocHJvdG8sXCJlbnRyaWVzXCIpKSl7Qz1pc1dlYWs/ZnVuY3Rpb24oaXRlcmFibGUpe2Fzc2VydEluc3RhbmNlKHRoaXMsQyxOQU1FKTtzZXQodGhpcyxVSUQsdWlkKyspO2luaXRGcm9tSXRlcmFibGUodGhpcyxpdGVyYWJsZSl9OmZ1bmN0aW9uKGl0ZXJhYmxlKXt2YXIgdGhhdD10aGlzO2Fzc2VydEluc3RhbmNlKHRoYXQsQyxOQU1FKTtzZXQodGhhdCxPMSxjcmVhdGUobnVsbCkpO3NldCh0aGF0LFNJWkUsMCk7c2V0KHRoYXQsTEFTVCx1bmRlZmluZWQpO3NldCh0aGF0LEZJUlNULHVuZGVmaW5lZCk7aW5pdEZyb21JdGVyYWJsZSh0aGF0LGl0ZXJhYmxlKX07YXNzaWduSGlkZGVuKGFzc2lnbkhpZGRlbihDW1BST1RPVFlQRV0sbWV0aG9kcyksY29tbW9uTWV0aG9kcyk7aXNXZWFrfHwhREVTQ3x8ZGVmaW5lUHJvcGVydHkoQ1tQUk9UT1RZUEVdLFwic2l6ZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gYXNzZXJ0RGVmaW5lZCh0aGlzW1NJWkVdKX19KX1lbHNle3ZhciBOYXRpdmU9QyxpbnN0PW5ldyBDLGNoYWluPWluc3RbQURERVJdKGlzV2Vhaz97fTotMCwxKSxidWdneVplcm87aWYoY2hlY2tEYW5nZXJJdGVyQ2xvc2luZyhmdW5jdGlvbihPKXtuZXcgQyhPKX0pKXtDPWZ1bmN0aW9uKGl0ZXJhYmxlKXthc3NlcnRJbnN0YW5jZSh0aGlzLEMsTkFNRSk7cmV0dXJuIGluaXRGcm9tSXRlcmFibGUobmV3IE5hdGl2ZSxpdGVyYWJsZSl9O0NbUFJPVE9UWVBFXT1wcm90bztpZihmcmFtZXdvcmspcHJvdG9bQ09OU1RSVUNUT1JdPUN9aXNXZWFrfHxpbnN0W0ZPUl9FQUNIXShmdW5jdGlvbih2YWwsa2V5KXtidWdneVplcm89MS9rZXk9PT0tSW5maW5pdHl9KTtpZihidWdneVplcm8pe2ZpeFNWWihcImRlbGV0ZVwiKTtmaXhTVlooXCJoYXNcIik7aXNNYXAmJmZpeFNWWihcImdldFwiKX1pZihidWdneVplcm98fGNoYWluIT09aW5zdClmaXhTVlooQURERVIsdHJ1ZSl9c2V0VG9TdHJpbmdUYWcoQyxOQU1FKTtzZXRTcGVjaWVzKEMpO09bTkFNRV09QzskZGVmaW5lKEdMT0JBTCtXUkFQK0ZPUkNFRCohaXNOYXRpdmUoQyksTyk7aXNXZWFrfHxkZWZpbmVTdGRJdGVyYXRvcnMoQyxOQU1FLGZ1bmN0aW9uKGl0ZXJhdGVkLGtpbmQpe3NldCh0aGlzLElURVIse286aXRlcmF0ZWQsazpraW5kfSl9LGZ1bmN0aW9uKCl7dmFyIGl0ZXI9dGhpc1tJVEVSXSxraW5kPWl0ZXIuayxlbnRyeT1pdGVyLmw7d2hpbGUoZW50cnkmJmVudHJ5LnIpZW50cnk9ZW50cnkucDtpZighaXRlci5vfHwhKGl0ZXIubD1lbnRyeT1lbnRyeT9lbnRyeS5uOml0ZXIub1tGSVJTVF0pKXtpdGVyLm89dW5kZWZpbmVkO3JldHVybiBpdGVyUmVzdWx0KDEpfWlmKGtpbmQ9PUtFWSlyZXR1cm4gaXRlclJlc3VsdCgwLGVudHJ5LmspO2lmKGtpbmQ9PVZBTFVFKXJldHVybiBpdGVyUmVzdWx0KDAsZW50cnkudik7cmV0dXJuIGl0ZXJSZXN1bHQoMCxbZW50cnkuayxlbnRyeS52XSl9LGlzTWFwP0tFWStWQUxVRTpWQUxVRSwhaXNNYXApO3JldHVybiBDfWZ1bmN0aW9uIGZhc3RLZXkoaXQsY3JlYXRlKXtpZighaXNPYmplY3QoaXQpKXJldHVybih0eXBlb2YgaXQ9PVwic3RyaW5nXCI/XCJTXCI6XCJQXCIpK2l0O2lmKGlzRnJvemVuKGl0KSlyZXR1cm5cIkZcIjtpZighaGFzKGl0LFVJRCkpe2lmKCFjcmVhdGUpcmV0dXJuXCJFXCI7aGlkZGVuKGl0LFVJRCwrK3VpZCl9cmV0dXJuXCJPXCIraXRbVUlEXX1mdW5jdGlvbiBnZXRFbnRyeSh0aGF0LGtleSl7dmFyIGluZGV4PWZhc3RLZXkoa2V5KSxlbnRyeTtpZihpbmRleCE9XCJGXCIpcmV0dXJuIHRoYXRbTzFdW2luZGV4XTtmb3IoZW50cnk9dGhhdFtGSVJTVF07ZW50cnk7ZW50cnk9ZW50cnkubil7aWYoZW50cnkuaz09a2V5KXJldHVybiBlbnRyeX19ZnVuY3Rpb24gZGVmKHRoYXQsa2V5LHZhbHVlKXt2YXIgZW50cnk9Z2V0RW50cnkodGhhdCxrZXkpLHByZXYsaW5kZXg7aWYoZW50cnkpZW50cnkudj12YWx1ZTtlbHNle3RoYXRbTEFTVF09ZW50cnk9e2k6aW5kZXg9ZmFzdEtleShrZXksdHJ1ZSksazprZXksdjp2YWx1ZSxwOnByZXY9dGhhdFtMQVNUXSxuOnVuZGVmaW5lZCxyOmZhbHNlfTtpZighdGhhdFtGSVJTVF0pdGhhdFtGSVJTVF09ZW50cnk7aWYocHJldilwcmV2Lm49ZW50cnk7dGhhdFtTSVpFXSsrO2lmKGluZGV4IT1cIkZcIil0aGF0W08xXVtpbmRleF09ZW50cnl9cmV0dXJuIHRoYXR9dmFyIGNvbGxlY3Rpb25NZXRob2RzPXtjbGVhcjpmdW5jdGlvbigpe2Zvcih2YXIgdGhhdD10aGlzLGRhdGE9dGhhdFtPMV0sZW50cnk9dGhhdFtGSVJTVF07ZW50cnk7ZW50cnk9ZW50cnkubil7XG5lbnRyeS5yPXRydWU7aWYoZW50cnkucCllbnRyeS5wPWVudHJ5LnAubj11bmRlZmluZWQ7ZGVsZXRlIGRhdGFbZW50cnkuaV19dGhhdFtGSVJTVF09dGhhdFtMQVNUXT11bmRlZmluZWQ7dGhhdFtTSVpFXT0wfSxcImRlbGV0ZVwiOmZ1bmN0aW9uKGtleSl7dmFyIHRoYXQ9dGhpcyxlbnRyeT1nZXRFbnRyeSh0aGF0LGtleSk7aWYoZW50cnkpe3ZhciBuZXh0PWVudHJ5Lm4scHJldj1lbnRyeS5wO2RlbGV0ZSB0aGF0W08xXVtlbnRyeS5pXTtlbnRyeS5yPXRydWU7aWYocHJldilwcmV2Lm49bmV4dDtpZihuZXh0KW5leHQucD1wcmV2O2lmKHRoYXRbRklSU1RdPT1lbnRyeSl0aGF0W0ZJUlNUXT1uZXh0O2lmKHRoYXRbTEFTVF09PWVudHJ5KXRoYXRbTEFTVF09cHJldjt0aGF0W1NJWkVdLS19cmV0dXJuISFlbnRyeX0sZm9yRWFjaDpmdW5jdGlvbihjYWxsYmFja2ZuKXt2YXIgZj1jdHgoY2FsbGJhY2tmbixhcmd1bWVudHNbMV0sMyksZW50cnk7d2hpbGUoZW50cnk9ZW50cnk/ZW50cnkubjp0aGlzW0ZJUlNUXSl7ZihlbnRyeS52LGVudHJ5LmssdGhpcyk7d2hpbGUoZW50cnkmJmVudHJ5LnIpZW50cnk9ZW50cnkucH19LGhhczpmdW5jdGlvbihrZXkpe3JldHVybiEhZ2V0RW50cnkodGhpcyxrZXkpfX07TWFwPWdldENvbGxlY3Rpb24oTWFwLE1BUCx7Z2V0OmZ1bmN0aW9uKGtleSl7dmFyIGVudHJ5PWdldEVudHJ5KHRoaXMsa2V5KTtyZXR1cm4gZW50cnkmJmVudHJ5LnZ9LHNldDpmdW5jdGlvbihrZXksdmFsdWUpe3JldHVybiBkZWYodGhpcyxrZXk9PT0wPzA6a2V5LHZhbHVlKX19LGNvbGxlY3Rpb25NZXRob2RzLHRydWUpO1NldD1nZXRDb2xsZWN0aW9uKFNldCxTRVQse2FkZDpmdW5jdGlvbih2YWx1ZSl7cmV0dXJuIGRlZih0aGlzLHZhbHVlPXZhbHVlPT09MD8wOnZhbHVlLHZhbHVlKX19LGNvbGxlY3Rpb25NZXRob2RzKTtmdW5jdGlvbiBkZWZXZWFrKHRoYXQsa2V5LHZhbHVlKXtpZihpc0Zyb3plbihhc3NlcnRPYmplY3Qoa2V5KSkpbGVha1N0b3JlKHRoYXQpLnNldChrZXksdmFsdWUpO2Vsc2V7aGFzKGtleSxXRUFLKXx8aGlkZGVuKGtleSxXRUFLLHt9KTtrZXlbV0VBS11bdGhhdFtVSURdXT12YWx1ZX1yZXR1cm4gdGhhdH1mdW5jdGlvbiBsZWFrU3RvcmUodGhhdCl7cmV0dXJuIHRoYXRbTEVBS118fGhpZGRlbih0aGF0LExFQUssbmV3IE1hcClbTEVBS119dmFyIHdlYWtNZXRob2RzPXtcImRlbGV0ZVwiOmZ1bmN0aW9uKGtleSl7aWYoIWlzT2JqZWN0KGtleSkpcmV0dXJuIGZhbHNlO2lmKGlzRnJvemVuKGtleSkpcmV0dXJuIGxlYWtTdG9yZSh0aGlzKVtcImRlbGV0ZVwiXShrZXkpO3JldHVybiBoYXMoa2V5LFdFQUspJiZoYXMoa2V5W1dFQUtdLHRoaXNbVUlEXSkmJmRlbGV0ZSBrZXlbV0VBS11bdGhpc1tVSURdXX0saGFzOmZ1bmN0aW9uKGtleSl7aWYoIWlzT2JqZWN0KGtleSkpcmV0dXJuIGZhbHNlO2lmKGlzRnJvemVuKGtleSkpcmV0dXJuIGxlYWtTdG9yZSh0aGlzKS5oYXMoa2V5KTtyZXR1cm4gaGFzKGtleSxXRUFLKSYmaGFzKGtleVtXRUFLXSx0aGlzW1VJRF0pfX07V2Vha01hcD1nZXRDb2xsZWN0aW9uKFdlYWtNYXAsV0VBS01BUCx7Z2V0OmZ1bmN0aW9uKGtleSl7aWYoaXNPYmplY3Qoa2V5KSl7aWYoaXNGcm96ZW4oa2V5KSlyZXR1cm4gbGVha1N0b3JlKHRoaXMpLmdldChrZXkpO2lmKGhhcyhrZXksV0VBSykpcmV0dXJuIGtleVtXRUFLXVt0aGlzW1VJRF1dfX0sc2V0OmZ1bmN0aW9uKGtleSx2YWx1ZSl7cmV0dXJuIGRlZldlYWsodGhpcyxrZXksdmFsdWUpfX0sd2Vha01ldGhvZHMsdHJ1ZSx0cnVlKTtpZihmcmFtZXdvcmsmJihuZXcgV2Vha01hcCkuc2V0KE9iamVjdC5mcmVlemUodG1wKSw3KS5nZXQodG1wKSE9Nyl7Zm9yRWFjaC5jYWxsKGFycmF5KFwiZGVsZXRlLGhhcyxnZXQsc2V0XCIpLGZ1bmN0aW9uKGtleSl7dmFyIG1ldGhvZD1XZWFrTWFwW1BST1RPVFlQRV1ba2V5XTtXZWFrTWFwW1BST1RPVFlQRV1ba2V5XT1mdW5jdGlvbihhLGIpe2lmKGlzT2JqZWN0KGEpJiZpc0Zyb3plbihhKSl7dmFyIHJlc3VsdD1sZWFrU3RvcmUodGhpcylba2V5XShhLGIpO3JldHVybiBrZXk9PVwic2V0XCI/dGhpczpyZXN1bHR9cmV0dXJuIG1ldGhvZC5jYWxsKHRoaXMsYSxiKX19KX1XZWFrU2V0PWdldENvbGxlY3Rpb24oV2Vha1NldCxXRUFLU0VULHthZGQ6ZnVuY3Rpb24odmFsdWUpe3JldHVybiBkZWZXZWFrKHRoaXMsdmFsdWUsdHJ1ZSl9fSx3ZWFrTWV0aG9kcyxmYWxzZSx0cnVlKX0oKTshZnVuY3Rpb24oKXtmdW5jdGlvbiBFbnVtZXJhdGUoaXRlcmF0ZWQpe3ZhciBrZXlzPVtdLGtleTtmb3Ioa2V5IGluIGl0ZXJhdGVkKWtleXMucHVzaChrZXkpO3NldCh0aGlzLElURVIse286aXRlcmF0ZWQsYTprZXlzLGk6MH0pfWNyZWF0ZUl0ZXJhdG9yKEVudW1lcmF0ZSxPQkpFQ1QsZnVuY3Rpb24oKXt2YXIgaXRlcj10aGlzW0lURVJdLGtleXM9aXRlci5hLGtleTtkb3tpZihpdGVyLmk+PWtleXMubGVuZ3RoKXJldHVybiBpdGVyUmVzdWx0KDEpfXdoaWxlKCEoKGtleT1rZXlzW2l0ZXIuaSsrXSlpbiBpdGVyLm8pKTtyZXR1cm4gaXRlclJlc3VsdCgwLGtleSl9KTtmdW5jdGlvbiB3cmFwKGZuKXtyZXR1cm4gZnVuY3Rpb24oaXQpe2Fzc2VydE9iamVjdChpdCk7dHJ5e3JldHVybiBmbi5hcHBseSh1bmRlZmluZWQsYXJndW1lbnRzKSx0cnVlfWNhdGNoKGUpe3JldHVybiBmYWxzZX19fWZ1bmN0aW9uIHJlZmxlY3RHZXQodGFyZ2V0LHByb3BlcnR5S2V5KXt2YXIgcmVjZWl2ZXI9YXJndW1lbnRzLmxlbmd0aDwzP3RhcmdldDphcmd1bWVudHNbMl0sZGVzYz1nZXRPd25EZXNjcmlwdG9yKGFzc2VydE9iamVjdCh0YXJnZXQpLHByb3BlcnR5S2V5KSxwcm90bztpZihkZXNjKXJldHVybiBoYXMoZGVzYyxcInZhbHVlXCIpP2Rlc2MudmFsdWU6ZGVzYy5nZXQ9PT11bmRlZmluZWQ/dW5kZWZpbmVkOmRlc2MuZ2V0LmNhbGwocmVjZWl2ZXIpO3JldHVybiBpc09iamVjdChwcm90bz1nZXRQcm90b3R5cGVPZih0YXJnZXQpKT9yZWZsZWN0R2V0KHByb3RvLHByb3BlcnR5S2V5LHJlY2VpdmVyKTp1bmRlZmluZWR9ZnVuY3Rpb24gcmVmbGVjdFNldCh0YXJnZXQscHJvcGVydHlLZXksVil7dmFyIHJlY2VpdmVyPWFyZ3VtZW50cy5sZW5ndGg8ND90YXJnZXQ6YXJndW1lbnRzWzNdLG93bkRlc2M9Z2V0T3duRGVzY3JpcHRvcihhc3NlcnRPYmplY3QodGFyZ2V0KSxwcm9wZXJ0eUtleSksZXhpc3RpbmdEZXNjcmlwdG9yLHByb3RvO2lmKCFvd25EZXNjKXtpZihpc09iamVjdChwcm90bz1nZXRQcm90b3R5cGVPZih0YXJnZXQpKSl7cmV0dXJuIHJlZmxlY3RTZXQocHJvdG8scHJvcGVydHlLZXksVixyZWNlaXZlcil9b3duRGVzYz1kZXNjcmlwdG9yKDApfWlmKGhhcyhvd25EZXNjLFwidmFsdWVcIikpe2lmKG93bkRlc2Mud3JpdGFibGU9PT1mYWxzZXx8IWlzT2JqZWN0KHJlY2VpdmVyKSlyZXR1cm4gZmFsc2U7ZXhpc3RpbmdEZXNjcmlwdG9yPWdldE93bkRlc2NyaXB0b3IocmVjZWl2ZXIscHJvcGVydHlLZXkpfHxkZXNjcmlwdG9yKDApO2V4aXN0aW5nRGVzY3JpcHRvci52YWx1ZT1WO3JldHVybiBkZWZpbmVQcm9wZXJ0eShyZWNlaXZlcixwcm9wZXJ0eUtleSxleGlzdGluZ0Rlc2NyaXB0b3IpLHRydWV9cmV0dXJuIG93bkRlc2Muc2V0PT09dW5kZWZpbmVkP2ZhbHNlOihvd25EZXNjLnNldC5jYWxsKHJlY2VpdmVyLFYpLHRydWUpfXZhciBpc0V4dGVuc2libGU9T2JqZWN0LmlzRXh0ZW5zaWJsZXx8cmV0dXJuSXQ7dmFyIHJlZmxlY3Q9e2FwcGx5OmN0eChjYWxsLGFwcGx5LDMpLGNvbnN0cnVjdDpmdW5jdGlvbih0YXJnZXQsYXJndW1lbnRzTGlzdCl7dmFyIHByb3RvPWFzc2VydEZ1bmN0aW9uKGFyZ3VtZW50cy5sZW5ndGg8Mz90YXJnZXQ6YXJndW1lbnRzWzJdKVtQUk9UT1RZUEVdLGluc3RhbmNlPWNyZWF0ZShpc09iamVjdChwcm90byk/cHJvdG86T2JqZWN0UHJvdG8pLHJlc3VsdD1hcHBseS5jYWxsKHRhcmdldCxpbnN0YW5jZSxhcmd1bWVudHNMaXN0KTtyZXR1cm4gaXNPYmplY3QocmVzdWx0KT9yZXN1bHQ6aW5zdGFuY2V9LGRlZmluZVByb3BlcnR5OndyYXAoZGVmaW5lUHJvcGVydHkpLGRlbGV0ZVByb3BlcnR5OmZ1bmN0aW9uKHRhcmdldCxwcm9wZXJ0eUtleSl7dmFyIGRlc2M9Z2V0T3duRGVzY3JpcHRvcihhc3NlcnRPYmplY3QodGFyZ2V0KSxwcm9wZXJ0eUtleSk7cmV0dXJuIGRlc2MmJiFkZXNjLmNvbmZpZ3VyYWJsZT9mYWxzZTpkZWxldGUgdGFyZ2V0W3Byb3BlcnR5S2V5XX0sZW51bWVyYXRlOmZ1bmN0aW9uKHRhcmdldCl7cmV0dXJuIG5ldyBFbnVtZXJhdGUoYXNzZXJ0T2JqZWN0KHRhcmdldCkpfSxnZXQ6cmVmbGVjdEdldCxnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3I6ZnVuY3Rpb24odGFyZ2V0LHByb3BlcnR5S2V5KXtyZXR1cm4gZ2V0T3duRGVzY3JpcHRvcihhc3NlcnRPYmplY3QodGFyZ2V0KSxwcm9wZXJ0eUtleSl9LGdldFByb3RvdHlwZU9mOmZ1bmN0aW9uKHRhcmdldCl7cmV0dXJuIGdldFByb3RvdHlwZU9mKGFzc2VydE9iamVjdCh0YXJnZXQpKX0saGFzOmZ1bmN0aW9uKHRhcmdldCxwcm9wZXJ0eUtleSl7cmV0dXJuIHByb3BlcnR5S2V5IGluIHRhcmdldH0saXNFeHRlbnNpYmxlOmZ1bmN0aW9uKHRhcmdldCl7cmV0dXJuISFpc0V4dGVuc2libGUoYXNzZXJ0T2JqZWN0KHRhcmdldCkpfSxvd25LZXlzOm93bktleXMscHJldmVudEV4dGVuc2lvbnM6d3JhcChPYmplY3QucHJldmVudEV4dGVuc2lvbnN8fHJldHVybkl0KSxzZXQ6cmVmbGVjdFNldH07aWYoc2V0UHJvdG90eXBlT2YpcmVmbGVjdC5zZXRQcm90b3R5cGVPZj1mdW5jdGlvbih0YXJnZXQscHJvdG8pe3JldHVybiBzZXRQcm90b3R5cGVPZihhc3NlcnRPYmplY3QodGFyZ2V0KSxwcm90byksdHJ1ZX07JGRlZmluZShHTE9CQUwse1JlZmxlY3Q6e319KTskZGVmaW5lKFNUQVRJQyxcIlJlZmxlY3RcIixyZWZsZWN0KX0oKTshZnVuY3Rpb24oKXskZGVmaW5lKFBST1RPLEFSUkFZLHtpbmNsdWRlczpjcmVhdGVBcnJheUNvbnRhaW5zKHRydWUpfSk7JGRlZmluZShQUk9UTyxTVFJJTkcse2F0OmNyZWF0ZVBvaW50QXQodHJ1ZSl9KTtmdW5jdGlvbiBjcmVhdGVPYmplY3RUb0FycmF5KGlzRW50cmllcyl7cmV0dXJuIGZ1bmN0aW9uKG9iamVjdCl7dmFyIE89dG9PYmplY3Qob2JqZWN0KSxrZXlzPWdldEtleXMob2JqZWN0KSxsZW5ndGg9a2V5cy5sZW5ndGgsaT0wLHJlc3VsdD1BcnJheShsZW5ndGgpLGtleTtpZihpc0VudHJpZXMpd2hpbGUobGVuZ3RoPmkpcmVzdWx0W2ldPVtrZXk9a2V5c1tpKytdLE9ba2V5XV07ZWxzZSB3aGlsZShsZW5ndGg+aSlyZXN1bHRbaV09T1trZXlzW2krK11dO3JldHVybiByZXN1bHR9fSRkZWZpbmUoU1RBVElDLE9CSkVDVCx7Z2V0T3duUHJvcGVydHlEZXNjcmlwdG9yczpmdW5jdGlvbihvYmplY3Qpe3ZhciBPPXRvT2JqZWN0KG9iamVjdCkscmVzdWx0PXt9O2ZvckVhY2guY2FsbChvd25LZXlzKE8pLGZ1bmN0aW9uKGtleSl7ZGVmaW5lUHJvcGVydHkocmVzdWx0LGtleSxkZXNjcmlwdG9yKDAsZ2V0T3duRGVzY3JpcHRvcihPLGtleSkpKX0pO3JldHVybiByZXN1bHR9LHZhbHVlczpjcmVhdGVPYmplY3RUb0FycmF5KGZhbHNlKSxlbnRyaWVzOmNyZWF0ZU9iamVjdFRvQXJyYXkodHJ1ZSl9KTskZGVmaW5lKFNUQVRJQyxSRUdFWFAse2VzY2FwZTpjcmVhdGVSZXBsYWNlcigvKFtcXFxcXFwtW1xcXXt9KCkqKz8uLF4kfF0pL2csXCJcXFxcJDFcIix0cnVlKX0pfSgpOyFmdW5jdGlvbihSRUZFUkVOQ0Upe1JFRkVSRU5DRV9HRVQ9Z2V0V2VsbEtub3duU3ltYm9sKFJFRkVSRU5DRStcIkdldFwiLHRydWUpO3ZhciBSRUZFUkVOQ0VfU0VUPWdldFdlbGxLbm93blN5bWJvbChSRUZFUkVOQ0UrU0VULHRydWUpLFJFRkVSRU5DRV9ERUxFVEU9Z2V0V2VsbEtub3duU3ltYm9sKFJFRkVSRU5DRStcIkRlbGV0ZVwiLHRydWUpOyRkZWZpbmUoU1RBVElDLFNZTUJPTCx7cmVmZXJlbmNlR2V0OlJFRkVSRU5DRV9HRVQscmVmZXJlbmNlU2V0OlJFRkVSRU5DRV9TRVQscmVmZXJlbmNlRGVsZXRlOlJFRkVSRU5DRV9ERUxFVEV9KTtoaWRkZW4oRnVuY3Rpb25Qcm90byxSRUZFUkVOQ0VfR0VULHJldHVyblRoaXMpO2Z1bmN0aW9uIHNldE1hcE1ldGhvZHMoQ29uc3RydWN0b3Ipe2lmKENvbnN0cnVjdG9yKXt2YXIgTWFwUHJvdG89Q29uc3RydWN0b3JbUFJPVE9UWVBFXTtoaWRkZW4oTWFwUHJvdG8sUkVGRVJFTkNFX0dFVCxNYXBQcm90by5nZXQpO2hpZGRlbihNYXBQcm90byxSRUZFUkVOQ0VfU0VULE1hcFByb3RvLnNldCk7aGlkZGVuKE1hcFByb3RvLFJFRkVSRU5DRV9ERUxFVEUsTWFwUHJvdG9bXCJkZWxldGVcIl0pfX1zZXRNYXBNZXRob2RzKE1hcCk7c2V0TWFwTWV0aG9kcyhXZWFrTWFwKX0oXCJyZWZlcmVuY2VcIik7IWZ1bmN0aW9uKGFycmF5U3RhdGljcyl7ZnVuY3Rpb24gc2V0QXJyYXlTdGF0aWNzKGtleXMsbGVuZ3RoKXtmb3JFYWNoLmNhbGwoYXJyYXkoa2V5cyksZnVuY3Rpb24oa2V5KXtpZihrZXkgaW4gQXJyYXlQcm90bylhcnJheVN0YXRpY3Nba2V5XT1jdHgoY2FsbCxBcnJheVByb3RvW2tleV0sbGVuZ3RoKX0pfXNldEFycmF5U3RhdGljcyhcInBvcCxyZXZlcnNlLHNoaWZ0LGtleXMsdmFsdWVzLGVudHJpZXNcIiwxKTtzZXRBcnJheVN0YXRpY3MoXCJpbmRleE9mLGV2ZXJ5LHNvbWUsZm9yRWFjaCxtYXAsZmlsdGVyLGZpbmQsZmluZEluZGV4LGluY2x1ZGVzXCIsMyk7c2V0QXJyYXlTdGF0aWNzKFwiam9pbixzbGljZSxjb25jYXQscHVzaCxzcGxpY2UsdW5zaGlmdCxzb3J0LGxhc3RJbmRleE9mLFwiK1wicmVkdWNlLHJlZHVjZVJpZ2h0LGNvcHlXaXRoaW4sZmlsbCx0dXJuXCIpOyRkZWZpbmUoU1RBVElDLEFSUkFZLGFycmF5U3RhdGljcyl9KHt9KTshZnVuY3Rpb24oTm9kZUxpc3Qpe2lmKGZyYW1ld29yayYmTm9kZUxpc3QmJiEoU1lNQk9MX0lURVJBVE9SIGluIE5vZGVMaXN0W1BST1RPVFlQRV0pKXtoaWRkZW4oTm9kZUxpc3RbUFJPVE9UWVBFXSxTWU1CT0xfSVRFUkFUT1IsSXRlcmF0b3JzW0FSUkFZXSl9SXRlcmF0b3JzLk5vZGVMaXN0PUl0ZXJhdG9yc1tBUlJBWV19KGdsb2JhbC5Ob2RlTGlzdCl9KHR5cGVvZiBzZWxmIT1cInVuZGVmaW5lZFwiJiZzZWxmLk1hdGg9PT1NYXRoP3NlbGY6RnVuY3Rpb24oXCJyZXR1cm4gdGhpc1wiKSgpLHRydWUpfSx7fV0sMzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7KGZ1bmN0aW9uKGdsb2JhbCl7IWZ1bmN0aW9uKGdsb2JhbCl7XCJ1c2Ugc3RyaWN0XCI7dmFyIGhhc093bj1PYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O3ZhciB1bmRlZmluZWQ7dmFyIGl0ZXJhdG9yU3ltYm9sPXR5cGVvZiBTeW1ib2w9PT1cImZ1bmN0aW9uXCImJlN5bWJvbC5pdGVyYXRvcnx8XCJAQGl0ZXJhdG9yXCI7dmFyIGluTW9kdWxlPXR5cGVvZiBtb2R1bGU9PT1cIm9iamVjdFwiO3ZhciBydW50aW1lPWdsb2JhbC5yZWdlbmVyYXRvclJ1bnRpbWU7aWYocnVudGltZSl7aWYoaW5Nb2R1bGUpe21vZHVsZS5leHBvcnRzPXJ1bnRpbWV9cmV0dXJufXJ1bnRpbWU9Z2xvYmFsLnJlZ2VuZXJhdG9yUnVudGltZT1pbk1vZHVsZT9tb2R1bGUuZXhwb3J0czp7fTtmdW5jdGlvbiB3cmFwKGlubmVyRm4sb3V0ZXJGbixzZWxmLHRyeUxvY3NMaXN0KXtyZXR1cm4gbmV3IEdlbmVyYXRvcihpbm5lckZuLG91dGVyRm4sc2VsZnx8bnVsbCx0cnlMb2NzTGlzdHx8W10pfXJ1bnRpbWUud3JhcD13cmFwO2Z1bmN0aW9uIHRyeUNhdGNoKGZuLG9iaixhcmcpe3RyeXtyZXR1cm57dHlwZTpcIm5vcm1hbFwiLGFyZzpmbi5jYWxsKG9iaixhcmcpfX1jYXRjaChlcnIpe3JldHVybnt0eXBlOlwidGhyb3dcIixhcmc6ZXJyfX19dmFyIEdlblN0YXRlU3VzcGVuZGVkU3RhcnQ9XCJzdXNwZW5kZWRTdGFydFwiO3ZhciBHZW5TdGF0ZVN1c3BlbmRlZFlpZWxkPVwic3VzcGVuZGVkWWllbGRcIjt2YXIgR2VuU3RhdGVFeGVjdXRpbmc9XCJleGVjdXRpbmdcIjt2YXIgR2VuU3RhdGVDb21wbGV0ZWQ9XCJjb21wbGV0ZWRcIjt2YXIgQ29udGludWVTZW50aW5lbD17fTtmdW5jdGlvbiBHZW5lcmF0b3JGdW5jdGlvbigpe31mdW5jdGlvbiBHZW5lcmF0b3JGdW5jdGlvblByb3RvdHlwZSgpe312YXIgR3A9R2VuZXJhdG9yRnVuY3Rpb25Qcm90b3R5cGUucHJvdG90eXBlPUdlbmVyYXRvci5wcm90b3R5cGU7R2VuZXJhdG9yRnVuY3Rpb24ucHJvdG90eXBlPUdwLmNvbnN0cnVjdG9yPUdlbmVyYXRvckZ1bmN0aW9uUHJvdG90eXBlO0dlbmVyYXRvckZ1bmN0aW9uUHJvdG90eXBlLmNvbnN0cnVjdG9yPUdlbmVyYXRvckZ1bmN0aW9uO0dlbmVyYXRvckZ1bmN0aW9uLmRpc3BsYXlOYW1lPVwiR2VuZXJhdG9yRnVuY3Rpb25cIjtydW50aW1lLmlzR2VuZXJhdG9yRnVuY3Rpb249ZnVuY3Rpb24oZ2VuRnVuKXt2YXIgY3Rvcj10eXBlb2YgZ2VuRnVuPT09XCJmdW5jdGlvblwiJiZnZW5GdW4uY29uc3RydWN0b3I7cmV0dXJuIGN0b3I/Y3Rvcj09PUdlbmVyYXRvckZ1bmN0aW9ufHwoY3Rvci5kaXNwbGF5TmFtZXx8Y3Rvci5uYW1lKT09PVwiR2VuZXJhdG9yRnVuY3Rpb25cIjpmYWxzZX07cnVudGltZS5tYXJrPWZ1bmN0aW9uKGdlbkZ1bil7Z2VuRnVuLl9fcHJvdG9fXz1HZW5lcmF0b3JGdW5jdGlvblByb3RvdHlwZTtnZW5GdW4ucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoR3ApO3JldHVybiBnZW5GdW59O3J1bnRpbWUuYXN5bmM9ZnVuY3Rpb24oaW5uZXJGbixvdXRlckZuLHNlbGYsdHJ5TG9jc0xpc3Qpe3JldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLHJlamVjdCl7dmFyIGdlbmVyYXRvcj13cmFwKGlubmVyRm4sb3V0ZXJGbixzZWxmLHRyeUxvY3NMaXN0KTt2YXIgY2FsbE5leHQ9c3RlcC5iaW5kKGdlbmVyYXRvci5uZXh0KTt2YXIgY2FsbFRocm93PXN0ZXAuYmluZChnZW5lcmF0b3JbXCJ0aHJvd1wiXSk7ZnVuY3Rpb24gc3RlcChhcmcpe3ZhciByZWNvcmQ9dHJ5Q2F0Y2godGhpcyxudWxsLGFyZyk7aWYocmVjb3JkLnR5cGU9PT1cInRocm93XCIpe3JlamVjdChyZWNvcmQuYXJnKTtyZXR1cm59dmFyIGluZm89cmVjb3JkLmFyZztpZihpbmZvLmRvbmUpe3Jlc29sdmUoaW5mby52YWx1ZSl9ZWxzZXtQcm9taXNlLnJlc29sdmUoaW5mby52YWx1ZSkudGhlbihjYWxsTmV4dCxjYWxsVGhyb3cpfX1jYWxsTmV4dCgpfSl9O2Z1bmN0aW9uIEdlbmVyYXRvcihpbm5lckZuLG91dGVyRm4sc2VsZix0cnlMb2NzTGlzdCl7dmFyIGdlbmVyYXRvcj1vdXRlckZuP09iamVjdC5jcmVhdGUob3V0ZXJGbi5wcm90b3R5cGUpOnRoaXM7dmFyIGNvbnRleHQ9bmV3IENvbnRleHQodHJ5TG9jc0xpc3QpO3ZhciBzdGF0ZT1HZW5TdGF0ZVN1c3BlbmRlZFN0YXJ0O2Z1bmN0aW9uIGludm9rZShtZXRob2QsYXJnKXtpZihzdGF0ZT09PUdlblN0YXRlRXhlY3V0aW5nKXt0aHJvdyBuZXcgRXJyb3IoXCJHZW5lcmF0b3IgaXMgYWxyZWFkeSBydW5uaW5nXCIpfWlmKHN0YXRlPT09R2VuU3RhdGVDb21wbGV0ZWQpe3JldHVybiBkb25lUmVzdWx0KCl9d2hpbGUodHJ1ZSl7dmFyIGRlbGVnYXRlPWNvbnRleHQuZGVsZWdhdGU7aWYoZGVsZWdhdGUpe3ZhciByZWNvcmQ9dHJ5Q2F0Y2goZGVsZWdhdGUuaXRlcmF0b3JbbWV0aG9kXSxkZWxlZ2F0ZS5pdGVyYXRvcixhcmcpO2lmKHJlY29yZC50eXBlPT09XCJ0aHJvd1wiKXtjb250ZXh0LmRlbGVnYXRlPW51bGw7bWV0aG9kPVwidGhyb3dcIjthcmc9cmVjb3JkLmFyZztjb250aW51ZX1tZXRob2Q9XCJuZXh0XCI7YXJnPXVuZGVmaW5lZDt2YXIgaW5mbz1yZWNvcmQuYXJnO2lmKGluZm8uZG9uZSl7Y29udGV4dFtkZWxlZ2F0ZS5yZXN1bHROYW1lXT1pbmZvLnZhbHVlO2NvbnRleHQubmV4dD1kZWxlZ2F0ZS5uZXh0TG9jfWVsc2V7c3RhdGU9R2VuU3RhdGVTdXNwZW5kZWRZaWVsZDtyZXR1cm4gaW5mb31jb250ZXh0LmRlbGVnYXRlPW51bGx9aWYobWV0aG9kPT09XCJuZXh0XCIpe2lmKHN0YXRlPT09R2VuU3RhdGVTdXNwZW5kZWRTdGFydCYmdHlwZW9mIGFyZyE9PVwidW5kZWZpbmVkXCIpe3Rocm93IG5ldyBUeXBlRXJyb3IoXCJhdHRlbXB0IHRvIHNlbmQgXCIrSlNPTi5zdHJpbmdpZnkoYXJnKStcIiB0byBuZXdib3JuIGdlbmVyYXRvclwiKX1pZihzdGF0ZT09PUdlblN0YXRlU3VzcGVuZGVkWWllbGQpe2NvbnRleHQuc2VudD1hcmd9ZWxzZXtkZWxldGUgY29udGV4dC5zZW50fX1lbHNlIGlmKG1ldGhvZD09PVwidGhyb3dcIil7aWYoc3RhdGU9PT1HZW5TdGF0ZVN1c3BlbmRlZFN0YXJ0KXtzdGF0ZT1HZW5TdGF0ZUNvbXBsZXRlZDt0aHJvdyBhcmd9aWYoY29udGV4dC5kaXNwYXRjaEV4Y2VwdGlvbihhcmcpKXttZXRob2Q9XCJuZXh0XCI7YXJnPXVuZGVmaW5lZH19ZWxzZSBpZihtZXRob2Q9PT1cInJldHVyblwiKXtjb250ZXh0LmFicnVwdChcInJldHVyblwiLGFyZyl9c3RhdGU9R2VuU3RhdGVFeGVjdXRpbmc7dmFyIHJlY29yZD10cnlDYXRjaChpbm5lckZuLHNlbGYsY29udGV4dCk7aWYocmVjb3JkLnR5cGU9PT1cIm5vcm1hbFwiKXtzdGF0ZT1jb250ZXh0LmRvbmU/R2VuU3RhdGVDb21wbGV0ZWQ6R2VuU3RhdGVTdXNwZW5kZWRZaWVsZDt2YXIgaW5mbz17dmFsdWU6cmVjb3JkLmFyZyxkb25lOmNvbnRleHQuZG9uZX07aWYocmVjb3JkLmFyZz09PUNvbnRpbnVlU2VudGluZWwpe2lmKGNvbnRleHQuZGVsZWdhdGUmJm1ldGhvZD09PVwibmV4dFwiKXthcmc9dW5kZWZpbmVkfX1lbHNle3JldHVybiBpbmZvfX1lbHNlIGlmKHJlY29yZC50eXBlPT09XCJ0aHJvd1wiKXtzdGF0ZT1HZW5TdGF0ZUNvbXBsZXRlZDtpZihtZXRob2Q9PT1cIm5leHRcIil7Y29udGV4dC5kaXNwYXRjaEV4Y2VwdGlvbihyZWNvcmQuYXJnKX1lbHNle2FyZz1yZWNvcmQuYXJnfX19fWdlbmVyYXRvci5uZXh0PWludm9rZS5iaW5kKGdlbmVyYXRvcixcIm5leHRcIik7Z2VuZXJhdG9yW1widGhyb3dcIl09aW52b2tlLmJpbmQoZ2VuZXJhdG9yLFwidGhyb3dcIik7Z2VuZXJhdG9yW1wicmV0dXJuXCJdPWludm9rZS5iaW5kKGdlbmVyYXRvcixcInJldHVyblwiKTtyZXR1cm4gZ2VuZXJhdG9yfUdwW2l0ZXJhdG9yU3ltYm9sXT1mdW5jdGlvbigpe3JldHVybiB0aGlzfTtHcC50b1N0cmluZz1mdW5jdGlvbigpe3JldHVyblwiW29iamVjdCBHZW5lcmF0b3JdXCJ9O2Z1bmN0aW9uIHB1c2hUcnlFbnRyeShsb2NzKXt2YXIgZW50cnk9e3RyeUxvYzpsb2NzWzBdfTtpZigxIGluIGxvY3Mpe2VudHJ5LmNhdGNoTG9jPWxvY3NbMV19aWYoMiBpbiBsb2NzKXtlbnRyeS5maW5hbGx5TG9jPWxvY3NbMl07ZW50cnkuYWZ0ZXJMb2M9bG9jc1szXX10aGlzLnRyeUVudHJpZXMucHVzaChlbnRyeSl9ZnVuY3Rpb24gcmVzZXRUcnlFbnRyeShlbnRyeSl7dmFyIHJlY29yZD1lbnRyeS5jb21wbGV0aW9ufHx7fTtyZWNvcmQudHlwZT1cIm5vcm1hbFwiO2RlbGV0ZSByZWNvcmQuYXJnO2VudHJ5LmNvbXBsZXRpb249cmVjb3JkfWZ1bmN0aW9uIENvbnRleHQodHJ5TG9jc0xpc3Qpe3RoaXMudHJ5RW50cmllcz1be3RyeUxvYzpcInJvb3RcIn1dO3RyeUxvY3NMaXN0LmZvckVhY2gocHVzaFRyeUVudHJ5LHRoaXMpO3RoaXMucmVzZXQoKX1ydW50aW1lLmtleXM9ZnVuY3Rpb24ob2JqZWN0KXt2YXIga2V5cz1bXTtmb3IodmFyIGtleSBpbiBvYmplY3Qpe2tleXMucHVzaChrZXkpfWtleXMucmV2ZXJzZSgpO3JldHVybiBmdW5jdGlvbiBuZXh0KCl7d2hpbGUoa2V5cy5sZW5ndGgpe3ZhciBrZXk9a2V5cy5wb3AoKTtpZihrZXkgaW4gb2JqZWN0KXtuZXh0LnZhbHVlPWtleTtuZXh0LmRvbmU9ZmFsc2U7cmV0dXJuIG5leHR9fW5leHQuZG9uZT10cnVlO3JldHVybiBuZXh0fX07ZnVuY3Rpb24gdmFsdWVzKGl0ZXJhYmxlKXtpZihpdGVyYWJsZSl7dmFyIGl0ZXJhdG9yTWV0aG9kPWl0ZXJhYmxlW2l0ZXJhdG9yU3ltYm9sXTtpZihpdGVyYXRvck1ldGhvZCl7cmV0dXJuIGl0ZXJhdG9yTWV0aG9kLmNhbGwoaXRlcmFibGUpfWlmKHR5cGVvZiBpdGVyYWJsZS5uZXh0PT09XCJmdW5jdGlvblwiKXtyZXR1cm4gaXRlcmFibGV9aWYoIWlzTmFOKGl0ZXJhYmxlLmxlbmd0aCkpe3ZhciBpPS0xLG5leHQ9ZnVuY3Rpb24gbmV4dCgpe3doaWxlKCsraTxpdGVyYWJsZS5sZW5ndGgpe2lmKGhhc093bi5jYWxsKGl0ZXJhYmxlLGkpKXtuZXh0LnZhbHVlPWl0ZXJhYmxlW2ldO25leHQuZG9uZT1mYWxzZTtyZXR1cm4gbmV4dH19bmV4dC52YWx1ZT11bmRlZmluZWQ7bmV4dC5kb25lPXRydWU7cmV0dXJuIG5leHR9O3JldHVybiBuZXh0Lm5leHQ9bmV4dH19cmV0dXJue25leHQ6ZG9uZVJlc3VsdH19cnVudGltZS52YWx1ZXM9dmFsdWVzO2Z1bmN0aW9uIGRvbmVSZXN1bHQoKXtyZXR1cm57dmFsdWU6dW5kZWZpbmVkLGRvbmU6dHJ1ZX19Q29udGV4dC5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOkNvbnRleHQscmVzZXQ6ZnVuY3Rpb24oKXt0aGlzLnByZXY9MDt0aGlzLm5leHQ9MDt0aGlzLnNlbnQ9dW5kZWZpbmVkO3RoaXMuZG9uZT1mYWxzZTt0aGlzLmRlbGVnYXRlPW51bGw7dGhpcy50cnlFbnRyaWVzLmZvckVhY2gocmVzZXRUcnlFbnRyeSk7Zm9yKHZhciB0ZW1wSW5kZXg9MCx0ZW1wTmFtZTtoYXNPd24uY2FsbCh0aGlzLHRlbXBOYW1lPVwidFwiK3RlbXBJbmRleCl8fHRlbXBJbmRleDwyMDsrK3RlbXBJbmRleCl7dGhpc1t0ZW1wTmFtZV09bnVsbH19LHN0b3A6ZnVuY3Rpb24oKXt0aGlzLmRvbmU9dHJ1ZTt2YXIgcm9vdEVudHJ5PXRoaXMudHJ5RW50cmllc1swXTt2YXIgcm9vdFJlY29yZD1yb290RW50cnkuY29tcGxldGlvbjtpZihyb290UmVjb3JkLnR5cGU9PT1cInRocm93XCIpe3Rocm93IHJvb3RSZWNvcmQuYXJnfXJldHVybiB0aGlzLnJ2YWx9LGRpc3BhdGNoRXhjZXB0aW9uOmZ1bmN0aW9uKGV4Y2VwdGlvbil7aWYodGhpcy5kb25lKXt0aHJvdyBleGNlcHRpb259dmFyIGNvbnRleHQ9dGhpcztmdW5jdGlvbiBoYW5kbGUobG9jLGNhdWdodCl7cmVjb3JkLnR5cGU9XCJ0aHJvd1wiO3JlY29yZC5hcmc9ZXhjZXB0aW9uO2NvbnRleHQubmV4dD1sb2M7cmV0dXJuISFjYXVnaHR9Zm9yKHZhciBpPXRoaXMudHJ5RW50cmllcy5sZW5ndGgtMTtpPj0wOy0taSl7dmFyIGVudHJ5PXRoaXMudHJ5RW50cmllc1tpXTt2YXIgcmVjb3JkPWVudHJ5LmNvbXBsZXRpb247aWYoZW50cnkudHJ5TG9jPT09XCJyb290XCIpe3JldHVybiBoYW5kbGUoXCJlbmRcIil9aWYoZW50cnkudHJ5TG9jPD10aGlzLnByZXYpe3ZhciBoYXNDYXRjaD1oYXNPd24uY2FsbChlbnRyeSxcImNhdGNoTG9jXCIpO3ZhciBoYXNGaW5hbGx5PWhhc093bi5jYWxsKGVudHJ5LFwiZmluYWxseUxvY1wiKTtpZihoYXNDYXRjaCYmaGFzRmluYWxseSl7aWYodGhpcy5wcmV2PGVudHJ5LmNhdGNoTG9jKXtyZXR1cm4gaGFuZGxlKGVudHJ5LmNhdGNoTG9jLHRydWUpfWVsc2UgaWYodGhpcy5wcmV2PGVudHJ5LmZpbmFsbHlMb2Mpe3JldHVybiBoYW5kbGUoZW50cnkuZmluYWxseUxvYyl9fWVsc2UgaWYoaGFzQ2F0Y2gpe2lmKHRoaXMucHJldjxlbnRyeS5jYXRjaExvYyl7cmV0dXJuIGhhbmRsZShlbnRyeS5jYXRjaExvYyx0cnVlKX19ZWxzZSBpZihoYXNGaW5hbGx5KXtpZih0aGlzLnByZXY8ZW50cnkuZmluYWxseUxvYyl7cmV0dXJuIGhhbmRsZShlbnRyeS5maW5hbGx5TG9jKX19ZWxzZXt0aHJvdyBuZXcgRXJyb3IoXCJ0cnkgc3RhdGVtZW50IHdpdGhvdXQgY2F0Y2ggb3IgZmluYWxseVwiKX19fX0sYWJydXB0OmZ1bmN0aW9uKHR5cGUsYXJnKXtmb3IodmFyIGk9dGhpcy50cnlFbnRyaWVzLmxlbmd0aC0xO2k+PTA7LS1pKXt2YXIgZW50cnk9dGhpcy50cnlFbnRyaWVzW2ldO2lmKGVudHJ5LnRyeUxvYzw9dGhpcy5wcmV2JiZoYXNPd24uY2FsbChlbnRyeSxcImZpbmFsbHlMb2NcIikmJnRoaXMucHJldjxlbnRyeS5maW5hbGx5TG9jKXt2YXIgZmluYWxseUVudHJ5PWVudHJ5O2JyZWFrfX1pZihmaW5hbGx5RW50cnkmJih0eXBlPT09XCJicmVha1wifHx0eXBlPT09XCJjb250aW51ZVwiKSYmZmluYWxseUVudHJ5LnRyeUxvYzw9YXJnJiZhcmc8ZmluYWxseUVudHJ5LmZpbmFsbHlMb2Mpe2ZpbmFsbHlFbnRyeT1udWxsfXZhciByZWNvcmQ9ZmluYWxseUVudHJ5P2ZpbmFsbHlFbnRyeS5jb21wbGV0aW9uOnt9O3JlY29yZC50eXBlPXR5cGU7cmVjb3JkLmFyZz1hcmc7aWYoZmluYWxseUVudHJ5KXt0aGlzLm5leHQ9ZmluYWxseUVudHJ5LmZpbmFsbHlMb2N9ZWxzZXt0aGlzLmNvbXBsZXRlKHJlY29yZCl9cmV0dXJuIENvbnRpbnVlU2VudGluZWx9LGNvbXBsZXRlOmZ1bmN0aW9uKHJlY29yZCxhZnRlckxvYyl7aWYocmVjb3JkLnR5cGU9PT1cInRocm93XCIpe3Rocm93IHJlY29yZC5hcmd9aWYocmVjb3JkLnR5cGU9PT1cImJyZWFrXCJ8fHJlY29yZC50eXBlPT09XCJjb250aW51ZVwiKXt0aGlzLm5leHQ9cmVjb3JkLmFyZ31lbHNlIGlmKHJlY29yZC50eXBlPT09XCJyZXR1cm5cIil7dGhpcy5ydmFsPXJlY29yZC5hcmc7dGhpcy5uZXh0PVwiZW5kXCJ9ZWxzZSBpZihyZWNvcmQudHlwZT09PVwibm9ybWFsXCImJmFmdGVyTG9jKXt0aGlzLm5leHQ9YWZ0ZXJMb2N9cmV0dXJuIENvbnRpbnVlU2VudGluZWx9LGZpbmlzaDpmdW5jdGlvbihmaW5hbGx5TG9jKXtmb3IodmFyIGk9dGhpcy50cnlFbnRyaWVzLmxlbmd0aC0xO2k+PTA7LS1pKXt2YXIgZW50cnk9dGhpcy50cnlFbnRyaWVzW2ldO2lmKGVudHJ5LmZpbmFsbHlMb2M9PT1maW5hbGx5TG9jKXtyZXR1cm4gdGhpcy5jb21wbGV0ZShlbnRyeS5jb21wbGV0aW9uLGVudHJ5LmFmdGVyTG9jKX19fSxcImNhdGNoXCI6ZnVuY3Rpb24odHJ5TG9jKXtmb3IodmFyIGk9dGhpcy50cnlFbnRyaWVzLmxlbmd0aC0xO2k+PTA7LS1pKXt2YXIgZW50cnk9dGhpcy50cnlFbnRyaWVzW2ldO2lmKGVudHJ5LnRyeUxvYz09PXRyeUxvYyl7dmFyIHJlY29yZD1lbnRyeS5jb21wbGV0aW9uO2lmKHJlY29yZC50eXBlPT09XCJ0aHJvd1wiKXt2YXIgdGhyb3duPXJlY29yZC5hcmc7cmVzZXRUcnlFbnRyeShlbnRyeSl9cmV0dXJuIHRocm93bn19dGhyb3cgbmV3IEVycm9yKFwiaWxsZWdhbCBjYXRjaCBhdHRlbXB0XCIpfSxkZWxlZ2F0ZVlpZWxkOmZ1bmN0aW9uKGl0ZXJhYmxlLHJlc3VsdE5hbWUsbmV4dExvYyl7dGhpcy5kZWxlZ2F0ZT17aXRlcmF0b3I6dmFsdWVzKGl0ZXJhYmxlKSxyZXN1bHROYW1lOnJlc3VsdE5hbWUsbmV4dExvYzpuZXh0TG9jfTtyZXR1cm4gQ29udGludWVTZW50aW5lbH19fSh0eXBlb2YgZ2xvYmFsPT09XCJvYmplY3RcIj9nbG9iYWw6dHlwZW9mIHdpbmRvdz09PVwib2JqZWN0XCI/d2luZG93OnRoaXMpfSkuY2FsbCh0aGlzLHR5cGVvZiBnbG9iYWwhPT1cInVuZGVmaW5lZFwiP2dsb2JhbDp0eXBlb2Ygc2VsZiE9PVwidW5kZWZpbmVkXCI/c2VsZjp0eXBlb2Ygd2luZG93IT09XCJ1bmRlZmluZWRcIj93aW5kb3c6e30pfSx7fV19LHt9LFsxXSk7IiwiJ3VzZSBzdHJpY3QnO1xuXG4vKipcbiAqIGlmIHVzaW5nIGEgZmVhdHVyZSB0aGF0IHJlcXVpcmVzIGEgYnJvd3Nlci1wb2x5ZmlsbFxuICogQHNlZSBodHRwczovL2JhYmVsanMuaW8vZG9jcy91c2FnZS9wb2x5ZmlsbC9cbiAqL1xucmVxdWlyZSgnYmFiZWwvYnJvd3Nlci1wb2x5ZmlsbCcpO1xuXG5pbXBvcnQgUG9zaXRpb25TdGlja3kgZnJvbSAnLi9wb3NpdGlvbi1zdGlja3knO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiAoZWxlbWVudCkge1xuICByZXR1cm4gbmV3IFBvc2l0aW9uU3RpY2t5KGVsZW1lbnQpO1xufVxuXG5sZXQgU3RpY2t5RWxlbWVudFByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoSFRNTEVsZW1lbnQucHJvdG90eXBlKTtcblxuU3RpY2t5RWxlbWVudFByb3RvdHlwZS5hdHRhY2hlZENhbGxiYWNrID0gZnVuY3Rpb24gKCkge1xuICBuZXcgUG9zaXRpb25TdGlja3kodGhpcyk7XG59O1xuXG5kb2N1bWVudC5yZWdpc3RlckVsZW1lbnQoJ3Bvc2l0aW9uLXN0aWNreScsIHtcbiAgcHJvdG90eXBlOiBTdGlja3lFbGVtZW50UHJvdG90eXBlLFxuICBleHRlbmRzOiAnZGl2J1xufSk7IiwiJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQgUmVjdGFuZ2xlIGZyb20gJy4vcmVjdGFuZ2xlJztcbmltcG9ydCB1dGlsIGZyb20gJy4vdXRpbCc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvc2l0aW9uU3RpY2t5IHtcblxuICBjb25zdHJ1Y3RvcihlbGVtZW50KSB7XG5cbiAgICB0aGlzLnN0aWNreSA9IGVsZW1lbnQ7XG4gICAgdGhpcy5wYXJlbnQgPSBlbGVtZW50LnBhcmVudE5vZGU7XG4gICAgdGhpcy5yZWN0YW5nbGUgPSBuZXcgV2Vha01hcCgpO1xuXG4gICAgdGhpcy5yZWN0YW5nbGUuc2V0KHRoaXMuc3RpY2t5LCBuZXcgUmVjdGFuZ2xlKHRoaXMuc3RpY2t5KSk7XG4gICAgdGhpcy5yZWN0YW5nbGUuc2V0KHRoaXMucGFyZW50LCBuZXcgUmVjdGFuZ2xlKHRoaXMucGFyZW50KSk7XG5cbiAgICB0aGlzLmRpZmYgPSB7XG4gICAgICB0b3A6IHRoaXMuc3RpY2t5Lm9mZnNldFRvcCAtIHRoaXMucGFyZW50Lm9mZnNldFRvcCxcbiAgICAgIGxlZnQ6IHRoaXMuc3RpY2t5Lm9mZnNldExlZnQgLSB0aGlzLnBhcmVudC5vZmZzZXRMZWZ0XG4gICAgfTtcblxuICAgIHRoaXMub3JpZ2luYWwgPSB7XG4gICAgICBwb3NpdGlvbjogZWxlbWVudC5zdHlsZS5wb3NpdGlvbixcbiAgICAgIHRvcDogZWxlbWVudC5zdHlsZS50b3AucmVwbGFjZSgncHgnLCAnJykgLSAwLFxuICAgICAgYm90dG9tOiBlbGVtZW50LnN0eWxlLmJvdHRvbS5yZXBsYWNlKCdweCcsICcnKSAtIDAsXG4gICAgICB3aWR0aDogZWxlbWVudC5zdHlsZS53aWR0aCxcbiAgICAgIGhlaWdodDogZWxlbWVudC5zdHlsZS5oZWlnaHRcbiAgICB9O1xuXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIHRoaXMub25TY3JvbGwuYmluZCh0aGlzKSk7XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIHRoaXMub25SZXNpemUuYmluZCh0aGlzKSk7XG4gIH1cblxuICBvblNjcm9sbChlKSB7XG5cbiAgICBsZXQgc3RpY2t5ID0gdGhpcy5yZWN0YW5nbGUuZ2V0KHRoaXMuc3RpY2t5KTtcbiAgICBsZXQgcGFyZW50ID0gdGhpcy5yZWN0YW5nbGUuZ2V0KHRoaXMucGFyZW50KTtcblxuICAgIGlmICh3aW5kb3cuc2Nyb2xsWSArIHN0aWNreS5oZWlnaHQgLSB0aGlzLm9yaWdpbmFsLmJvdHRvbSA+IHBhcmVudC5ib3R0b20gLSB0aGlzLmRpZmYudG9wKSB7XG5cbiAgICAgIHV0aWwuc2V0U3R5bGUodGhpcy5zdGlja3ksIHtcbiAgICAgICAgcG9zaXRpb246ICdhYnNvbHV0ZScsXG4gICAgICAgIHRvcDogYCR7cGFyZW50LmJvdHRvbSAtIHN0aWNreS5oZWlnaHQgLSB0aGlzLmRpZmYudG9wfXB4YCxcbiAgICAgICAgbGVmdDogJ2F1dG8nXG4gICAgICB9KTtcblxuICAgIH0gZWxzZSBpZiAod2luZG93LnNjcm9sbFkgPj0gcGFyZW50LnRvcCAtIHRoaXMub3JpZ2luYWwudG9wKSB7XG5cbiAgICAgIHV0aWwuc2V0U3R5bGUodGhpcy5zdGlja3ksIHtcbiAgICAgICAgcG9zaXRpb246ICdmaXhlZCcsXG4gICAgICAgIHRvcDogYCR7dGhpcy5vcmlnaW5hbC50b3B9cHhgLFxuICAgICAgICBsZWZ0OiBgJHtwYXJlbnQubGVmdCArIHRoaXMuZGlmZi5sZWZ0fXB4YCxcbiAgICAgICAgd2lkdGg6IGAke3N0aWNreS53aWR0aH1weGBcbiAgICAgIH0pO1xuXG4gICAgfSBlbHNlIHtcblxuICAgICAgdXRpbC5zZXRTdHlsZSh0aGlzLnN0aWNreSwge1xuICAgICAgICBwb3NpdGlvbjogdGhpcy5vcmlnaW5hbC5wb3NpdGlvbixcbiAgICAgICAgd2lkdGg6IHRoaXMub3JpZ2luYWwud2lkdGgsXG4gICAgICAgIGhlaWdodDogdGhpcy5vcmlnaW5hbC5oZWlnaHRcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIG9uUmVzaXplKGUpIHtcblxuICAgIHRoaXMucmVjdGFuZ2xlLnNldCh0aGlzLnN0aWNreSwgbmV3IFJlY3RhbmdsZSh0aGlzLnN0aWNreSkpO1xuICAgIHRoaXMucmVjdGFuZ2xlLnNldCh0aGlzLnBhcmVudCwgbmV3IFJlY3RhbmdsZSh0aGlzLnBhcmVudCkpO1xuXG4gICAgdGhpcy5vblNjcm9sbC5jYWxsKHRoaXMpO1xuICB9XG59XG4iLCIndXNlIHN0cmljdCc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFJlY3RhbmdsZSB7XG4gIFxuICBjb25zdHJ1Y3RvcihlbGVtZW50KSB7XG4gICAgdGhpcy5fdG9wID0gZWxlbWVudC5vZmZzZXRUb3A7XG4gICAgdGhpcy5fbGVmdCA9IGVsZW1lbnQub2Zmc2V0TGVmdDtcbiAgICB0aGlzLl93aWR0aCA9IGVsZW1lbnQuY2xpZW50V2lkdGg7XG4gICAgdGhpcy5faGVpZ2h0ID0gZWxlbWVudC5jbGllbnRIZWlnaHQ7XG4gIH1cbiAgXG4gIGdldCB0b3AoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3RvcDtcbiAgfVxuXG4gIHNldCB0b3AodmFsdWUpIHtcbiAgICB0aGlzLl90b3AgPSB2YWx1ZTtcbiAgfVxuICBcbiAgZ2V0IGxlZnQoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2xlZnQ7XG4gIH1cblxuICBzZXQgbGVmdCh2YWx1ZSkge1xuICAgIHRoaXMuX2xlZnQgPSB2YWx1ZTtcbiAgfVxuICBcbiAgZ2V0IHJpZ2h0KCkge1xuICAgIHJldHVybiB0aGlzLl9sZWZ0ICsgdGhpcy5fd2lkdGg7XG4gIH1cbiAgXG4gIGdldCBib3R0b20oKSB7XG4gICAgcmV0dXJuIHRoaXMuX3RvcCArIHRoaXMuX2hlaWdodDtcbiAgfVxuICBcbiAgZ2V0IHdpZHRoKCkge1xuICAgIHJldHVybiB0aGlzLl93aWR0aDtcbiAgfVxuXG4gIHNldCB3aWR0aCh2YWx1ZSkge1xuICAgIHRoaXMuX3dpZHRoID0gdmFsdWU7XG4gIH1cbiAgXG4gIGdldCBoZWlnaHQoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2hlaWdodDtcbiAgfVxuXG4gIHNldCBoZWlnaHQodmFsdWUpIHtcbiAgICB0aGlzLl9oZWlnaHQgPSB2YWx1ZTtcbiAgfVxufSIsIid1c2Ugc3RyaWN0JztcblxuZXhwb3J0IGRlZmF1bHQge1xuXG4gIHNldFN0eWxlOiAoZWxlbWVudCwgcHJvcGVydGllcykgPT4ge1xuICAgIE9iamVjdC5rZXlzKHByb3BlcnRpZXMpLmZvckVhY2goKGtleSkgPT4ge1xuICAgICAgZWxlbWVudC5zdHlsZVtrZXldID0gcHJvcGVydGllc1trZXldO1xuICAgIH0pO1xuICB9XG5cbn07Il19
